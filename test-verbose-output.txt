
> justice-companion@1.0.0 test F:\Justice Companion take 2
> vitest "--reporter=verbose"

[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m

[1m[7m[34m DEV [39m[27m[22m [34mv2.1.9 [39m[90mF:/Justice Companion take 2[39m

 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mgetCurrentUserIdFromSession[2m > [22mshould return userId when session is valid
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mgetCurrentUserIdFromSession[2m > [22mshould throw error when no active session
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mgetCurrentUserIdFromSession[2m > [22mshould throw error when session is invalid (not in database)
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mgetCurrentUserIdFromSession[2m > [22mshould throw error when session is expired
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mCase Handlers Authorization[2m > [22mCASE_CREATE[2m > [22mshould auto-assign userId from session when creating case
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mCase Handlers Authorization[2m > [22mCASE_CREATE[2m > [22mshould throw error if no active session
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mCase Handlers Authorization[2m > [22mCASE_GET_BY_ID[2m > [22mshould allow access when user owns the case
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mCase Handlers Authorization[2m > [22mCASE_GET_BY_ID[2m > [22mshould throw error when user does not own the case
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mCase Handlers Authorization[2m > [22mCASE_GET_ALL[2m > [22mshould return only cases owned by current user
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mCase Handlers Authorization[2m > [22mCASE_GET_ALL[2m > [22mshould return empty array if user has no cases
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mCase Handlers Authorization[2m > [22mCASE_UPDATE[2m > [22mshould allow update when user owns the case
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mCase Handlers Authorization[2m > [22mCASE_UPDATE[2m > [22mshould throw error when user tries to update another user case
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mCase Handlers Authorization[2m > [22mCASE_DELETE[2m > [22mshould allow delete when user owns the case
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mCase Handlers Authorization[2m > [22mCASE_DELETE[2m > [22mshould throw error when user tries to delete another user case
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mCase Handlers Authorization[2m > [22mCASE_GET_STATISTICS[2m > [22mshould calculate statistics for current user cases only
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mEvidence Handlers Authorization[2m > [22mEVIDENCE_CREATE[2m > [22mshould allow evidence creation when user owns the parent case
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mEvidence Handlers Authorization[2m > [22mEVIDENCE_CREATE[2m > [22mshould throw error when user tries to add evidence to another user case
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mEvidence Handlers Authorization[2m > [22mEVIDENCE_GET_BY_ID[2m > [22mshould allow access when user owns the parent case
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mEvidence Handlers Authorization[2m > [22mEVIDENCE_GET_BY_ID[2m > [22mshould throw error when user does not own the parent case
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mEvidence Handlers Authorization[2m > [22mEVIDENCE_GET_ALL[2m > [22mshould return only evidence from user-owned cases
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mConversation Handlers Authorization[2m > [22mCONVERSATION_CREATE[2m > [22mshould verify case ownership when caseId is provided
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mConversation Handlers Authorization[2m > [22mCONVERSATION_CREATE[2m > [22mshould skip verification when caseId is null (general chat)
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mConversation Handlers Authorization[2m > [22mCONVERSATION_GET[2m > [22mshould allow access when conversation has caseId and user owns case
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mConversation Handlers Authorization[2m > [22mCONVERSATION_GET[2m > [22mshould throw error when conversation has null caseId (security gap)
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mConversation Handlers Authorization[2m > [22mCONVERSATION_GET_ALL[2m > [22mshould return only conversations from user-owned cases
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mGDPR Handlers Authorization[2m > [22mGDPR_EXPORT_USER_DATA[2m > [22mshould export only current user data, not all users
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mGDPR Handlers Authorization[2m > [22mGDPR_EXPORT_USER_DATA[2m > [22mshould filter conversations to user-owned cases only
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mGDPR Handlers Authorization[2m > [22mGDPR_DELETE_USER_DATA[2m > [22mshould delete only current user data using WHERE clause
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mGDPR Handlers Authorization[2m > [22mGDPR_DELETE_USER_DATA[2m > [22mshould NOT delete all data without WHERE clause
 [32m✓[39m src/electron-ipc-authorization.test.ts[2m > [22mGDPR Handlers Authorization[2m > [22mGDPR_DELETE_USER_DATA[2m > [22mshould delete conversations only for user-owned cases
[90mstdout[2m | src/services/AuthenticationService.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/AuditLogger.e2e.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/AuditLogger.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mSingleton Pattern[2m > [22mshould return the same instance on multiple getInstance() calls
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mSingleton Pattern[2m > [22mshould export a singleton instance as secureStorage
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mSingleton Pattern[2m > [22mshould return the same instance for exported secureStorage
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mInitialization - init()[2m > [22mshould initialize successfully when encryption is available
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mInitialization - init()[2m > [22mshould initialize successfully when encryption is NOT available
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mInitialization - init()[2m > [22mshould warn about encryption unavailability on Linux
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mInitialization - init()[2m > [22mshould not re-initialize if already initialized
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mInitialization - init()[2m > [22mshould throw error when initialization fails
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mInitialization - init()[2m > [22mshould throw error with non-Error object failure
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mEncryption Availability - isEncryptionAvailable()[2m > [22mshould return false before initialization
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mEncryption Availability - isEncryptionAvailable()[2m > [22mshould return true when encryption is available
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mEncryption Availability - isEncryptionAvailable()[2m > [22mshould return false when encryption is not available
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mSet API Key - setApiKey()[2m > [22mshould auto-initialize before setting API key
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mSet API Key - setApiKey()[2m > [22mshould set API key successfully
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mSet API Key - setApiKey()[2m > [22mshould not re-initialize if already initialized
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mSet API Key - setApiKey()[2m > [22mshould throw error when key is empty
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mSet API Key - setApiKey()[2m > [22mshould throw error when value is empty
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mSet API Key - setApiKey()[2m > [22mshould throw error when key is null
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mSet API Key - setApiKey()[2m > [22mshould throw error when value is null
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mSet API Key - setApiKey()[2m > [22mshould throw error when key is undefined
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mSet API Key - setApiKey()[2m > [22mshould throw error when value is undefined
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mSet API Key - setApiKey()[2m > [22mshould handle IPC failure when setting API key
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mSet API Key - setApiKey()[2m > [22mshould handle non-Error IPC failure when setting API key
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mSet API Key - setApiKey()[2m > [22mshould allow setting keys with special characters
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mGet API Key - getApiKey()[2m > [22mshould auto-initialize before getting API key
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mGet API Key - getApiKey()[2m > [22mshould get API key successfully
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mGet API Key - getApiKey()[2m > [22mshould return null when API key not found
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mGet API Key - getApiKey()[2m > [22mshould return null when IPC returns undefined
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mGet API Key - getApiKey()[2m > [22mshould return null when IPC returns empty string
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mGet API Key - getApiKey()[2m > [22mshould throw error when key is empty
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mGet API Key - getApiKey()[2m > [22mshould throw error when key is null
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mGet API Key - getApiKey()[2m > [22mshould throw error when key is undefined
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mGet API Key - getApiKey()[2m > [22mshould handle IPC failure when getting API key
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mGet API Key - getApiKey()[2m > [22mshould handle non-Error IPC failure when getting API key
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mGet API Key - getApiKey()[2m > [22mshould not re-initialize if already initialized
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mDelete API Key - deleteApiKey()[2m > [22mshould auto-initialize before deleting API key
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mDelete API Key - deleteApiKey()[2m > [22mshould delete API key successfully
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mDelete API Key - deleteApiKey()[2m > [22mshould throw error when key is empty
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mDelete API Key - deleteApiKey()[2m > [22mshould throw error when key is null
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mDelete API Key - deleteApiKey()[2m > [22mshould throw error when key is undefined
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mDelete API Key - deleteApiKey()[2m > [22mshould handle IPC failure when deleting API key
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mDelete API Key - deleteApiKey()[2m > [22mshould handle non-Error IPC failure when deleting API key
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mDelete API Key - deleteApiKey()[2m > [22mshould not re-initialize if already initialized
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mHas API Key - hasApiKey()[2m > [22mshould auto-initialize before checking API key existence
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mHas API Key - hasApiKey()[2m > [22mshould return true when API key exists
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mHas API Key - hasApiKey()[2m > [22mshould return false when API key does not exist
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mHas API Key - hasApiKey()[2m > [22mshould return false when API key is empty string
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mHas API Key - hasApiKey()[2m > [22mshould return false when key is empty
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mHas API Key - hasApiKey()[2m > [22mshould return false when key is null
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mHas API Key - hasApiKey()[2m > [22mshould return false when key is undefined
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mHas API Key - hasApiKey()[2m > [22mshould return false when getApiKey throws error
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mHas API Key - hasApiKey()[2m > [22mshould not re-initialize if already initialized
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mClear All - clearAll()[2m > [22mshould auto-initialize before clearing all keys
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mClear All - clearAll()[2m > [22mshould clear all API keys successfully
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mClear All - clearAll()[2m > [22mshould handle IPC failure when clearing all keys
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mClear All - clearAll()[2m > [22mshould handle non-Error IPC failure when clearing all keys
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mClear All - clearAll()[2m > [22mshould not re-initialize if already initialized
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mIntegration Scenarios[2m > [22mshould handle complete CRUD workflow
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mIntegration Scenarios[2m > [22mshould handle multiple API keys independently
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mIntegration Scenarios[2m > [22mshould handle clearAll() removing all keys
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mIntegration Scenarios[2m > [22mshould maintain singleton across operations
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mEdge Cases[2m > [22mshould handle whitespace-only key gracefully
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mEdge Cases[2m > [22mshould handle very long API key values
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mEdge Cases[2m > [22mshould handle special characters in key names
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mEdge Cases[2m > [22mshould handle rapid successive calls
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mError Message Validation[2m > [22mshould provide detailed error message for set failures
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mError Message Validation[2m > [22mshould provide detailed error message for get failures
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mError Message Validation[2m > [22mshould provide detailed error message for delete failures
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mConsole Logging[2m > [22mshould log warning when encryption is unavailable
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mConsole Logging[2m > [22mshould log error when initialization fails
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mConsole Logging[2m > [22mshould log error with key name when set fails
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mConsole Logging[2m > [22mshould log error with key name when get fails
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mConsole Logging[2m > [22mshould log error with key name when delete fails
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mConsole Logging[2m > [22mshould log error when clearAll fails
 [32m✓[39m src/services/SecureStorageService.test.ts[2m > [22mSecureStorageService[2m > [22mConsole Logging[2m > [22mshould not log when operations succeed
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mCase Handlers[2m > [22mCASE_CREATE[2m > [22mshould create case and return success with data
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mCase Handlers[2m > [22mCASE_CREATE[2m > [22mshould handle validation errors
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mCase Handlers[2m > [22mCASE_CREATE[2m > [22mshould handle database errors
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mCase Handlers[2m > [22mCASE_GET_BY_ID[2m > [22mshould return case when found
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mCase Handlers[2m > [22mCASE_GET_BY_ID[2m > [22mshould return null when case not found
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mCase Handlers[2m > [22mCASE_GET_BY_ID[2m > [22mshould handle errors
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mCase Handlers[2m > [22mCASE_GET_ALL[2m > [22mshould return all cases
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mCase Handlers[2m > [22mCASE_GET_ALL[2m > [22mshould return empty array when no cases exist
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mCase Handlers[2m > [22mCASE_UPDATE[2m > [22mshould update case successfully
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mCase Handlers[2m > [22mCASE_UPDATE[2m > [22mshould handle update of non-existent case
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mCase Handlers[2m > [22mCASE_DELETE[2m > [22mshould delete case successfully
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mCase Handlers[2m > [22mCASE_DELETE[2m > [22mshould handle deletion of non-existent case
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mCase Handlers[2m > [22mCASE_CLOSE[2m > [22mshould close case successfully
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mCase Handlers[2m > [22mCASE_GET_STATISTICS[2m > [22mshould return case statistics
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mEvidence Handlers[2m > [22mEVIDENCE_CREATE[2m > [22mshould create evidence successfully
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mEvidence Handlers[2m > [22mEVIDENCE_CREATE[2m > [22mshould handle missing required fields
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mEvidence Handlers[2m > [22mEVIDENCE_GET_BY_ID[2m > [22mshould return evidence when found
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mEvidence Handlers[2m > [22mEVIDENCE_GET_ALL[2m > [22mshould return all evidence
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mEvidence Handlers[2m > [22mEVIDENCE_GET_ALL[2m > [22mshould filter by evidence type
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mEvidence Handlers[2m > [22mEVIDENCE_GET_BY_CASE[2m > [22mshould return evidence for specific case
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mEvidence Handlers[2m > [22mEVIDENCE_UPDATE[2m > [22mshould update evidence successfully
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mEvidence Handlers[2m > [22mEVIDENCE_DELETE[2m > [22mshould delete evidence successfully
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mAI Handlers[2m > [22mAI_CHECK_STATUS[2m > [22mshould return AI service status
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mAI Handlers[2m > [22mAI_CHECK_STATUS[2m > [22mshould handle disconnected AI service
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mAI Handlers[2m > [22mAI_CHAT[2m > [22mshould process chat request successfully
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mAI Handlers[2m > [22mAI_CHAT[2m > [22mshould handle AI service errors
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mProfile Handlers[2m > [22mPROFILE_GET[2m > [22mshould return user profile
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mProfile Handlers[2m > [22mPROFILE_UPDATE[2m > [22mshould update user profile
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mModel Handlers[2m > [22mMODEL_GET_AVAILABLE[2m > [22mshould return available models
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mModel Handlers[2m > [22mMODEL_GET_DOWNLOADED[2m > [22mshould return downloaded models
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mModel Handlers[2m > [22mMODEL_IS_DOWNLOADED[2m > [22mshould check if model is downloaded
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mModel Handlers[2m > [22mMODEL_IS_DOWNLOADED[2m > [22mshould return false for non-downloaded model
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mModel Handlers[2m > [22mMODEL_DELETE[2m > [22mshould delete model successfully
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFacts Handlers[2m > [22mfacts:store[2m > [22mshould store fact with new format
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFacts Handlers[2m > [22mfacts:store[2m > [22mshould store fact with old format and confidence mapping
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFacts Handlers[2m > [22mfacts:get[2m > [22mshould get all facts for case
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFacts Handlers[2m > [22mfacts:get[2m > [22mshould get facts filtered by category
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFacts Handlers[2m > [22mfacts:count[2m > [22mshould return count of facts
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mIntegration Tests[2m > [22mshould handle case creation -> evidence creation flow
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mIntegration Tests[2m > [22mshould handle case -> facts -> retrieval flow
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mIntegration Tests[2m > [22mshould handle update -> get flow
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mError Propagation[2m > [22mshould propagate database errors correctly
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mError Propagation[2m > [22mshould handle network errors in AI handlers
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mError Propagation[2m > [22mshould handle validation errors with specific messages
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mHandler Registration[2m > [22mshould register all case handlers
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mHandler Registration[2m > [22mshould register all evidence handlers
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mHandler Registration[2m > [22mshould register all AI handlers
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mHandler Registration[2m > [22mshould register all profile handlers
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mHandler Registration[2m > [22mshould register all model handlers
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mHandler Registration[2m > [22mshould register all facts handlers
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mConversation Handlers[2m > [22mCONVERSATION_CREATE[2m > [22mshould create conversation with case ID
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mConversation Handlers[2m > [22mCONVERSATION_CREATE[2m > [22mshould create conversation without case (general chat)
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mConversation Handlers[2m > [22mCONVERSATION_CREATE[2m > [22mshould handle validation errors
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mConversation Handlers[2m > [22mCONVERSATION_GET[2m > [22mshould return conversation by ID
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mConversation Handlers[2m > [22mCONVERSATION_GET[2m > [22mshould return null when conversation not found
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mConversation Handlers[2m > [22mCONVERSATION_GET_ALL[2m > [22mshould return all conversations
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mConversation Handlers[2m > [22mCONVERSATION_GET_ALL[2m > [22mshould filter conversations by case
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mConversation Handlers[2m > [22mCONVERSATION_GET_ALL[2m > [22mshould return empty array when no conversations exist
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mConversation Handlers[2m > [22mCONVERSATION_GET_RECENT[2m > [22mshould return recent conversations for case
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mConversation Handlers[2m > [22mCONVERSATION_LOAD_WITH_MESSAGES[2m > [22mshould load conversation with messages
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mConversation Handlers[2m > [22mCONVERSATION_LOAD_WITH_MESSAGES[2m > [22mshould return null when conversation not found
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mConversation Handlers[2m > [22mCONVERSATION_DELETE[2m > [22mshould delete conversation successfully
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mConversation Handlers[2m > [22mCONVERSATION_DELETE[2m > [22mshould handle deletion of non-existent conversation
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mConversation Handlers[2m > [22mMESSAGE_ADD[2m > [22mshould add message to conversation
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mConversation Handlers[2m > [22mMESSAGE_ADD[2m > [22mshould handle invalid conversation ID
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mGDPR Handlers[2m > [22mGDPR_EXPORT_USER_DATA[2m > [22mshould export all user data as JSON
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mGDPR Handlers[2m > [22mGDPR_EXPORT_USER_DATA[2m > [22mshould include all data types in export
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mGDPR Handlers[2m > [22mGDPR_EXPORT_USER_DATA[2m > [22mshould handle export errors
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mGDPR Handlers[2m > [22mGDPR_DELETE_USER_DATA[2m > [22mshould delete all user data with correct confirmation
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mGDPR Handlers[2m > [22mGDPR_DELETE_USER_DATA[2m > [22mshould reject deletion without correct confirmation
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mGDPR Handlers[2m > [22mGDPR_DELETE_USER_DATA[2m > [22mshould handle deletion errors
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFile Handlers[2m > [22mFILE_SELECT[2m > [22mshould open file picker and return selected file
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFile Handlers[2m > [22mFILE_SELECT[2m > [22mshould return canceled when user cancels
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFile Handlers[2m > [22mFILE_SELECT[2m > [22mshould handle dialog errors
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFile Handlers[2m > [22mFILE_UPLOAD[2m > [22mshould upload and process PDF file
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFile Handlers[2m > [22mFILE_UPLOAD[2m > [22mshould reject files over 50MB
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFile Handlers[2m > [22mFILE_UPLOAD[2m > [22mshould handle file read errors
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFile Handlers[2m > [22mFILE_VIEW[2m > [22mshould open file in default application
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFile Handlers[2m > [22mFILE_VIEW[2m > [22mshould handle file open errors
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFile Handlers[2m > [22mFILE_DOWNLOAD[2m > [22mshould save file to user-selected location
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFile Handlers[2m > [22mFILE_DOWNLOAD[2m > [22mshould handle user cancellation
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFile Handlers[2m > [22mFILE_DOWNLOAD[2m > [22mshould handle file copy errors
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFile Handlers[2m > [22mFILE_PRINT[2m > [22mshould open file for printing
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFile Handlers[2m > [22mFILE_PRINT[2m > [22mshould handle print errors
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFile Handlers[2m > [22mFILE_EMAIL[2m > [22mshould compose email with attachments
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mFile Handlers[2m > [22mFILE_EMAIL[2m > [22mshould handle email client errors
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mAI Streaming Handlers[2m > [22mAI_STREAM_START[2m > [22mshould start streaming chat response
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mAI Streaming Handlers[2m > [22mAI_STREAM_START[2m > [22mshould handle stream initiation errors
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mAI Streaming Handlers[2m > [22mAI Stream Events[2m > [22mshould emit stream tokens during streaming
 [32m✓[39m src/electron-ipc-handlers.test.ts[2m > [22mIPC Handlers[2m > [22mAI Streaming Handlers[2m > [22mAI Stream Events[2m > [22mshould emit stream completion event
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mCore Functionality[2m > [22mlogs an audit event successfully
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mCore Functionality[2m > [22mgenerates unique IDs for each log entry
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mCore Functionality[2m > [22mgenerates ISO 8601 timestamps with milliseconds
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mCore Functionality[2m > [22mstores all provided fields correctly
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mCore Functionality[2m > [22mdefaults success to true when not provided
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mHash Calculation[2m > [22mcalculates integrity hash for each entry
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mHash Calculation[2m > [22mproduces different hashes for different events
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mHash Calculation[2m > [22mproduces same hash for identical data (deterministic)
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mChain Integrity[2m > [22mfirst log has null previous hash
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mChain Integrity[2m > [22msecond log references first log hash
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mChain Integrity[2m > [22mverifies intact chain successfully
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mChain Integrity[2m > [22mdetects tampered integrity hash
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mChain Integrity[2m > [22mdetects broken chain link
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mChain Integrity[2m > [22mdetects tampered event data
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mChain Integrity[2m > [22mreturns valid:true for empty audit log
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mQuery Functionality[2m > [22mfilters by resource type
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mQuery Functionality[2m > [22mfilters by event type
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mQuery Functionality[2m > [22mfilters by success status
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mQuery Functionality[2m > [22mfilters by resource ID
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mQuery Functionality[2m > [22mfilters by user ID
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mQuery Functionality[2m > [22mlimits results
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mQuery Functionality[2m > [22msupports offset pagination
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mQuery Functionality[2m > [22mcombines multiple filters
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mQuery Functionality[2m > [22mreturns empty array when no matches found
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mQuery Functionality[2m > [22mreturns logs in descending chronological order
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mExport Functionality[2m > [22mexports to JSON format
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mExport Functionality[2m > [22mexports to CSV format
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mExport Functionality[2m > [22mexports with filters applied
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mExport Functionality[2m > [22mhandles CSV escaping for commas in fields
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mExport Functionality[2m > [22mreturns empty string for CSV with no results
 [32m✓[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mExport Functionality[2m > [22mJSON export preserves all fields
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mError Handling[2m > [22mdoes not throw on logging failure
[31m   → expected "error" to be called with arguments: [ '❌ Audit logging failed:', …(1) ][90m

Received: 

[1m  1st error call:

[22m[2m  Array [[22m
[32m-   "❌ Audit logging failed:",[90m
[32m-   Any<Error>,[90m
[31m+   "[2025-10-19T12:43:27.751Z][ERROR][App] ❌ Audit logging failed: {[90m
[31m+   \"error\": {}[90m
[31m+ }",[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mEdge Cases[2m > [22mhandles null/undefined optional fields
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mEdge Cases[2m > [22mserializes complex details objects
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mEdge Cases[2m > [22mhandles details with null value
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mEdge Cases[2m > [22mhandles empty details object
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mEdge Cases[2m > [22mhandles very long detail strings
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mEdge Cases[2m > [22mhandles special characters in fields
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mEdge Cases[2m > [22mhandles Unicode characters in details
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mAction Types[2m > [22msupports create action
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mAction Types[2m > [22msupports read action
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mAction Types[2m > [22msupports update action
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mAction Types[2m > [22msupports delete action
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mAction Types[2m > [22msupports export action
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mAction Types[2m > [22msupports decrypt action
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mSuccess and Error Tracking[2m > [22mlogs successful operations with success=true
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mSuccess and Error Tracking[2m > [22mlogs failed operations with success=false and error message
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mSuccess and Error Tracking[2m > [22mfilters successful operations only
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mSuccess and Error Tracking[2m > [22mfilters failed operations only
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mImmutability[2m > [22mcreates new log entries without modifying existing ones
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mLarge Chain Verification[2m > [22mverifies chain with 100 entries
[31m   → The database connection is not open[39m
 [31m×[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mLarge Chain Verification[2m > [22mdetects tampering in middle of large chain
[31m   → The database connection is not open[39m
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mInitial State and Data Loading[2m > [22mshould initialize with empty array and loading state
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mInitial State and Data Loading[2m > [22mshould initialize with empty array and loading state
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mInitial State and Data Loading[2m > [22mshould load case facts on mount
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mInitial State and Data Loading[2m > [22mshould load user facts on mount
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mregister()[2m > [22mshould register a new user with valid credentials
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mregister()[2m > [22mshould enforce minimum password length (12 chars)
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mregister()[2m > [22mshould require at least one uppercase letter
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mregister()[2m > [22mshould require at least one lowercase letter
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mregister()[2m > [22mshould require at least one number
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mInitial State and Data Loading[2m > [22mshould handle empty case facts list
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mInitial State and Data Loading[2m > [22mshould handle empty user facts list
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mregister()[2m > [22mshould reject duplicate username
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mInitial State and Data Loading[2m > [22mshould handle missing data property in response
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mregister()[2m > [22mshould reject duplicate email
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mInitial State and Data Loading[2m > [22mshould handle missing data property in response
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mInitial State and Data Loading[2m > [22mshould load facts with all importance levels
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mregister()[2m > [22mshould generate unique salt for each user
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mCaseId Changes[2m > [22mshould reload user facts when caseId changes
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mCaseId Changes[2m > [22mshould reload case facts when caseId changes
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mCreate Operation[2m > [22mshould create a personal fact
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mregister()[2m > [22mshould log registration event
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mCreate Operation[2m > [22mshould create a case fact with all fields
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mCreate Operation[2m > [22mshould create facts of all types
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mCreate Operation[2m > [22mshould create a case fact without importance (defaults to medium)
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mlogin()[2m > [22mshould login with valid credentials
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mEvent Type Coverage (18 Event Types)[2m > [22mCase Operations (5 event types)[2m > [22mlogs case.create event
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mEvent Type Coverage (18 Event Types)[2m > [22mCase Operations (5 event types)[2m > [22mlogs case.read event via findById
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mEvent Type Coverage (18 Event Types)[2m > [22mCase Operations (5 event types)[2m > [22mlogs case.update event
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mEvent Type Coverage (18 Event Types)[2m > [22mCase Operations (5 event types)[2m > [22mlogs case.delete event
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mEvent Type Coverage (18 Event Types)[2m > [22mCase Operations (5 event types)[2m > [22mlogs case.pii_access event when accessing encrypted description
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mEvent Type Coverage (18 Event Types)[2m > [22mEvidence Operations (6 event types)[2m > [22mlogs evidence.create event
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mEvent Type Coverage (18 Event Types)[2m > [22mEvidence Operations (6 event types)[2m > [22mlogs evidence.update event
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mEvent Type Coverage (18 Event Types)[2m > [22mEvidence Operations (6 event types)[2m > [22mlogs evidence.delete event
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mEvent Type Coverage (18 Event Types)[2m > [22mEvidence Operations (6 event types)[2m > [22mlogs evidence.content_access when accessing encrypted content
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mEvent Type Coverage (18 Event Types)[2m > [22mEvidence Operations (6 event types)[2m > [22mlogs evidence.export event (manual)
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mEvent Type Coverage (18 Event Types)[2m > [22mEvidence Operations (6 event types)[2m > [22mlogs evidence.read event (manual)
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mEvent Type Coverage (18 Event Types)[2m > [22mEncryption Operations (2 event types)[2m > [22mlogs encryption.key_loaded event
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mEvent Type Coverage (18 Event Types)[2m > [22mEncryption Operations (2 event types)[2m > [22mlogs encryption.decrypt event
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mEvent Type Coverage (18 Event Types)[2m > [22mDatabase Operations (3 event types)[2m > [22mlogs database.backup event
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mEvent Type Coverage (18 Event Types)[2m > [22mDatabase Operations (3 event types)[2m > [22mlogs database.restore event
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mEvent Type Coverage (18 Event Types)[2m > [22mDatabase Operations (3 event types)[2m > [22mlogs database.migrate event
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mEvent Type Coverage (18 Event Types)[2m > [22mConfig Operations (1 event type)[2m > [22mlogs config.change event
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mFull Workflow Integration Tests[2m > [22mmaintains hash chain integrity across complete case lifecycle
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mFull Workflow Integration Tests[2m > [22mmaintains hash chain integrity across case + evidence workflow
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mFull Workflow Integration Tests[2m > [22mmaintains integrity when operations fail
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mGDPR Compliance[2m > [22mdoes not log PII in case.create details
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mGDPR Compliance[2m > [22mdoes not log sensitive content in evidence.create details
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mGDPR Compliance[2m > [22mlogs only metadata for PII access events
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mPerformance Tests[2m > [22mhandles 1000+ audit log entries efficiently
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mPerformance Tests[2m > [22mverifies integrity of 1000+ log chain in reasonable time
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mPerformance Tests[2m > [22mqueries large audit log efficiently
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mPerformance Tests[2m > [22mexports large audit log efficiently
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mConcurrent Logging[2m > [22mmaintains hash chain integrity with concurrent operations
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mConcurrent Logging[2m > [22mhandles rapid sequential logging correctly
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mError Recovery[2m > [22mcontinues logging after failed operation
 [32m✓[39m src/services/AuditLogger.e2e.test.ts[2m > [22mAuditLogger E2E[2m > [22mTamper Detection in Real Scenarios[2m > [22mdetects tampering attempt in multi-step workflow
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mCreate Operation[2m > [22mshould handle create failure with error message
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mCreate Operation[2m > [22mshould create facts of all categories
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mCreate Operation[2m > [22mshould handle create exception
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mCreate Operation[2m > [22mshould create facts with all importance levels
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mUpdate Operation[2m > [22mshould update fact content
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mlogin()[2m > [22mshould create session with 24-hour expiration
[90mstderr[2m | src/features/facts/hooks/useCaseFacts.test.ts[2m > [22m[2museCaseFacts[2m > [22m[2mCreate Operation[2m > [22m[2mshould handle create failure with error message
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mCreate Operation[2m > [22mshould handle create failure with error message
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mUpdate Operation[2m > [22mshould update fact type
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mlogin()[2m > [22mshould reject login with invalid username
[90mstderr[2m | src/features/facts/hooks/useCaseFacts.test.ts[2m > [22m[2museCaseFacts[2m > [22m[2mCreate Operation[2m > [22m[2mshould handle create exception
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mCreate Operation[2m > [22mshould handle create exception
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mUpdate Operation[2m > [22mshould update both content and type
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mUpdate Operation[2m > [22mshould update fact content only
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mUpdate Operation[2m > [22mshould handle update failure with error message
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mUpdate Operation[2m > [22mshould update fact category only
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mlogin()[2m > [22mshould reject login with invalid password
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mUpdate Operation[2m > [22mshould handle update exception
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mlogin()[2m > [22mshould reject login for inactive user
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mUpdate Operation[2m > [22mshould update fact importance only
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mDelete Operation[2m > [22mshould delete a user fact successfully
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mUpdate Operation[2m > [22mshould update all fields together
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mDelete Operation[2m > [22mshould handle delete failure with error message
[90mstderr[2m | src/features/facts/hooks/useCaseFacts.test.ts[2m > [22m[2museCaseFacts[2m > [22m[2mUpdate Operation[2m > [22m[2mshould handle update failure with error message
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mUpdate Operation[2m > [22mshould handle update failure with error message
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mlogin()[2m > [22mshould update last login timestamp
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mDelete Operation[2m > [22mshould handle delete exception
[90mstderr[2m | src/features/facts/hooks/useCaseFacts.test.ts[2m > [22m[2museCaseFacts[2m > [22m[2mUpdate Operation[2m > [22m[2mshould handle update exception
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mUpdate Operation[2m > [22mshould handle update exception
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mType-Based Filtering (loadFactsByType)[2m > [22mshould load facts filtered by type
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mDelete Operation[2m > [22mshould delete a case fact successfully
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mlogin()[2m > [22mshould include IP address in session if provided
[90mstderr[2m | src/features/facts/hooks/useCaseFacts.test.ts[2m > [22m[2museCaseFacts[2m > [22m[2mDelete Operation[2m > [22m[2mshould handle delete failure with error message
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mDelete Operation[2m > [22mshould handle delete failure with error message
[90mstderr[2m | src/features/facts/hooks/useCaseFacts.test.ts[2m > [22m[2museCaseFacts[2m > [22m[2mDelete Operation[2m > [22m[2mshould handle delete exception
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mlogin()[2m > [22mshould log successful login
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mDelete Operation[2m > [22mshould handle delete exception
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mType-Based Filtering (loadFactsByType)[2m > [22mshould load all fact types individually
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mCategory-Based Filtering (loadFactsByCategory)[2m > [22mshould load facts filtered by category
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mType-Based Filtering (loadFactsByType)[2m > [22mshould handle empty filtered results
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mlogin()[2m > [22mshould log failed login attempts
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mType-Based Filtering (loadFactsByType)[2m > [22mshould handle filter error
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mCategory-Based Filtering (loadFactsByCategory)[2m > [22mshould load all fact categories individually
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mType-Based Filtering (loadFactsByType)[2m > [22mshould set loading state during filter operation
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mCategory-Based Filtering (loadFactsByCategory)[2m > [22mshould handle empty filtered results
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mcreateCaseFact[2m > [22mshould create a case fact with valid input
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mcreateCaseFact[2m > [22mshould create case facts with different categories
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mcreateCaseFact[2m > [22mshould create case facts with different importance levels
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mcreateCaseFact[2m > [22mshould throw error if factContent is empty
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mcreateCaseFact[2m > [22mshould throw error if factContent exceeds 5000 characters
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mcreateCaseFact[2m > [22mshould accept factContent exactly 5000 characters
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mcreateCaseFact[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mgetCaseFactById[2m > [22mshould return a case fact by id
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mgetCaseFactById[2m > [22mshould return null if case fact not found
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mgetCaseFactById[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mgetCaseFactsByCaseId[2m > [22mshould return all case facts for a case
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mgetCaseFactsByCaseId[2m > [22mshould return empty array if no case facts exist
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mgetCaseFactsByCaseId[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mgetCaseFactsByCategory[2m > [22mshould return case facts filtered by category
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mgetCaseFactsByCategory[2m > [22mshould return empty array if no facts match category
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mgetCaseFactsByCategory[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mgetCaseFactsByImportance[2m > [22mshould return case facts filtered by importance
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mgetCaseFactsByImportance[2m > [22mshould return empty array if no facts match importance
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mgetCaseFactsByImportance[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mupdateCaseFact[2m > [22mshould update a case fact with valid input
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mupdateCaseFact[2m > [22mshould update only factContent
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mupdateCaseFact[2m > [22mshould update only importance
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mupdateCaseFact[2m > [22mshould throw error if factContent is empty string
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mupdateCaseFact[2m > [22mshould throw error if factContent exceeds 5000 characters
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mupdateCaseFact[2m > [22mshould throw error if case fact not found
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mupdateCaseFact[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mdeleteCaseFact[2m > [22mshould delete a case fact successfully
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mdeleteCaseFact[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mEdge Cases[2m > [22mshould handle special characters in factContent
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mEdge Cases[2m > [22mshould handle unicode characters in factContent
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mEdge Cases[2m > [22mshould handle formatted content with newlines
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts[2m > [22mCaseFactsService[2m > [22mEdge Cases[2m > [22mshould handle dates and timestamps in factContent
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mRefresh Functionality[2m > [22mshould refresh user facts list
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mCategory-Based Filtering (loadFactsByCategory)[2m > [22mshould handle category filter error
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mlogin()[2m > [22mshould use timing-safe password comparison
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mRefresh Functionality[2m > [22mshould set loading state during refresh
[90mstderr[2m | src/features/facts/hooks/useCaseFacts.test.ts[2m > [22m[2museCaseFacts[2m > [22m[2mCategory-Based Filtering (loadFactsByCategory)[2m > [22m[2mshould set loading state during category filter operation
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mError Handling[2m > [22mshould handle list failure with error message
[90mstderr[2m | src/features/facts/hooks/useCaseFacts.test.ts[2m > [22m[2museCaseFacts[2m > [22m[2mCategory-Based Filtering (loadFactsByCategory)[2m > [22m[2mshould set loading state during category filter operation
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mlogout()[2m > [22mshould delete session on logout
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mError Handling[2m > [22mshould handle list failure without error message
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mCategory-Based Filtering (loadFactsByCategory)[2m > [22mshould set loading state during category filter operation
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mError Handling[2m > [22mshould handle list exception
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mImportance-Based Filtering (loadFactsByImportance)[2m > [22mshould load facts filtered by importance
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mError Handling[2m > [22mshould handle non-Error exception
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mlogout()[2m > [22mshould log logout event
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mImportance-Based Filtering (loadFactsByImportance)[2m > [22mshould load all importance levels individually
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts[2m > [22museUserFacts[2m > [22mError Handling[2m > [22mshould clear previous error on successful operation
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mInitial State and Data Loading[2m > [22mshould initialize with empty array and loading state
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mInitial State and Data Loading[2m > [22mshould load timeline events on mount
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mImportance-Based Filtering (loadFactsByImportance)[2m > [22mshould handle empty filtered results
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mlogout()[2m > [22mshould handle logout of non-existent session gracefully
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mInitial State and Data Loading[2m > [22mshould handle empty timeline events list
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mImportance-Based Filtering (loadFactsByImportance)[2m > [22mshould handle importance filter error
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mInitial State and Data Loading[2m > [22mshould handle missing data property in response
[90mstderr[2m | src/features/facts/hooks/useCaseFacts.test.ts[2m > [22m[2museCaseFacts[2m > [22m[2mImportance-Based Filtering (loadFactsByImportance)[2m > [22m[2mshould set loading state during importance filter operation
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mInitial State and Data Loading[2m > [22mshould handle timeline events with null description
[90mstderr[2m | src/features/facts/hooks/useCaseFacts.test.ts[2m > [22m[2museCaseFacts[2m > [22m[2mImportance-Based Filtering (loadFactsByImportance)[2m > [22m[2mshould set loading state during importance filter operation
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mvalidateSession()[2m > [22mshould return user for valid session
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mCaseId Changes[2m > [22mshould reload timeline events when caseId changes
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mImportance-Based Filtering (loadFactsByImportance)[2m > [22mshould set loading state during importance filter operation
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mRefresh Functionality[2m > [22mshould refresh case facts list
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mCreate Operation[2m > [22mshould create a new timeline event with all fields
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mvalidateSession()[2m > [22mshould return null for null session ID
[90mstderr[2m | src/features/facts/hooks/useCaseFacts.test.ts[2m > [22m[2museCaseFacts[2m > [22m[2mRefresh Functionality[2m > [22m[2mshould set loading state during refresh
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mCreate Operation[2m > [22mshould create a new timeline event without description
[90mstderr[2m | src/features/facts/hooks/useCaseFacts.test.ts[2m > [22m[2museCaseFacts[2m > [22m[2mRefresh Functionality[2m > [22m[2mshould set loading state during refresh
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mCreate Operation[2m > [22mshould handle various date formats
[90mstderr[2m | src/features/timeline/hooks/useTimeline.test.ts[2m > [22m[2museTimeline[2m > [22m[2mCreate Operation[2m > [22m[2mshould handle create failure with error message
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mRefresh Functionality[2m > [22mshould set loading state during refresh
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mCreate Operation[2m > [22mshould handle create failure with error message
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mvalidateSession()[2m > [22mshould return null for non-existent session
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mError Handling[2m > [22mshould handle list failure with error message
[90mstderr[2m | src/features/timeline/hooks/useTimeline.test.ts[2m > [22m[2museTimeline[2m > [22m[2mCreate Operation[2m > [22m[2mshould handle create exception
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mCreate Operation[2m > [22mshould handle create exception
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mError Handling[2m > [22mshould handle list failure without error message
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mUpdate Operation[2m > [22mshould update an existing timeline event with all fields
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mError Handling[2m > [22mshould handle list exception
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mUpdate Operation[2m > [22mshould update with partial fields
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mvalidateSession()[2m > [22mshould return null and delete expired session
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mError Handling[2m > [22mshould handle non-Error exception
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mUpdate Operation[2m > [22mshould update only the event date
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts[2m > [22museCaseFacts[2m > [22mError Handling[2m > [22mshould clear previous error on successful operation
[90mstderr[2m | src/features/timeline/hooks/useTimeline.test.ts[2m > [22m[2museTimeline[2m > [22m[2mUpdate Operation[2m > [22m[2mshould handle update failure with error message
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mUpdate Operation[2m > [22mshould handle update failure with error message
[90mstderr[2m | src/features/timeline/hooks/useTimeline.test.ts[2m > [22m[2museTimeline[2m > [22m[2mUpdate Operation[2m > [22m[2mshould handle update exception
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mUpdate Operation[2m > [22mshould handle update exception
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mRendering States[2m > [22mshould render loading state
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mRendering States[2m > [22mshould render error state
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mRendering States[2m > [22mshould render empty state when no notes exist
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mRendering States[2m > [22mshould render notes list when data is loaded
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mRendering States[2m > [22mshould display correct count in header[33m 358[2mms[22m[39m
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mRendering States[2m > [22mshould render Add Note button[33m 418[2mms[22m[39m
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mRendering States[2m > [22mshould display timestamps for notes
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mDelete Operation[2m > [22mshould delete a timeline event successfully
[90mstderr[2m | src/features/timeline/hooks/useTimeline.test.ts[2m > [22m[2museTimeline[2m > [22m[2mDelete Operation[2m > [22m[2mshould handle delete failure with error message
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mDelete Operation[2m > [22mshould handle delete failure with error message
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mchangePassword()[2m > [22mshould change password successfully[33m 390[2mms[22m[39m
[90mstderr[2m | src/features/timeline/hooks/useTimeline.test.ts[2m > [22m[2museTimeline[2m > [22m[2mDelete Operation[2m > [22m[2mshould handle delete exception
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mDelete Operation[2m > [22mshould handle delete exception
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mRefresh Functionality[2m > [22mshould refresh timeline events list
[90mstderr[2m | src/features/timeline/hooks/useTimeline.test.ts[2m > [22m[2museTimeline[2m > [22m[2mRefresh Functionality[2m > [22m[2mshould set loading state during refresh
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

[90mstderr[2m | src/features/timeline/hooks/useTimeline.test.ts[2m > [22m[2museTimeline[2m > [22m[2mRefresh Functionality[2m > [22m[2mshould set loading state during refresh
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mchangePassword()[2m > [22mshould reject old password after change[33m 377[2mms[22m[39m
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mRefresh Functionality[2m > [22mshould set loading state during refresh
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mError Handling[2m > [22mshould handle list failure with error message
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mError Handling[2m > [22mshould handle list failure without error message
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mchangePassword()[2m > [22mshould reject change with incorrect old password
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mError Handling[2m > [22mshould handle list exception
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mCreate Note Workflow[2m > [22mshould show note creator when Add button is clicked[33m 803[2mms[22m[39m
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mError Handling[2m > [22mshould handle non-Error exception
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mchangePassword()[2m > [22mshould validate new password strength
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts[2m > [22museTimeline[2m > [22mError Handling[2m > [22mshould clear previous error on successful operation
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mCreate Note Workflow[2m > [22mshould autofocus textarea when creating new note[33m 333[2mms[22m[39m
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mchangePassword()[2m > [22mshould invalidate all sessions after password change[33m 363[2mms[22m[39m
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mchangePassword()[2m > [22mshould log password change event
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mchangePassword()[2m > [22mshould log failed password change attempts
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mCreate Note Workflow[2m > [22mshould call createNote when Save button is clicked with content[33m 944[2mms[22m[39m
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mcleanupExpiredSessions()[2m > [22mshould delete expired sessions
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mcleanupExpiredSessions()[2m > [22mshould return 0 if no expired sessions
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mcleanupExpiredSessions()[2m > [22mshould log cleanup event if sessions deleted
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mSecurity - Password Hashing[2m > [22mshould never store passwords in plaintext
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mRendering States[2m > [22mshould render loading state
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mRendering States[2m > [22mshould render error state
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mRendering States[2m > [22mshould render empty state when no facts match filters
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mRendering States[2m > [22mshould render facts list when data is loaded
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mRendering States[2m > [22mshould display correct count in header[33m 387[2mms[22m[39m
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mRendering States[2m > [22mshould render Add Case Fact button[33m 546[2mms[22m[39m
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mCategory Filtering[2m > [22mshould display all category filter buttons with counts[33m 811[2mms[22m[39m
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mSecurity - Password Hashing[2m > [22mshould use random salt for each user
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mSecurity - Password Hashing[2m > [22mshould produce consistent hash for same password+salt
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mCreate Note Workflow[2m > [22mshould clear textarea and hide creator after successful creation[33m 752[2mms[22m[39m
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mCategory Filtering[2m > [22mshould filter facts by timeline category[33m 399[2mms[22m[39m
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mInitial State and Data Loading[2m > [22mshould initialize with empty array and loading state
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mSecurity - Session Management[2m > [22mshould generate UUID session IDs
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mInitial State and Data Loading[2m > [22mshould load legal issues on mount
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mInitial State and Data Loading[2m > [22mshould handle empty legal issues list
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mInitial State and Data Loading[2m > [22mshould handle missing data property in response
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mCategory Filtering[2m > [22mshould filter facts by evidence category[33m 427[2mms[22m[39m
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mCreate Note Workflow[2m > [22mshould NOT call createNote when content is empty[33m 505[2mms[22m[39m
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mInitial State and Data Loading[2m > [22mshould handle legal issues with null optional fields
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mSecurity - Session Management[2m > [22mshould generate unique session IDs
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mCaseId Changes[2m > [22mshould reload legal issues when caseId changes
[90mstdout[2m | src/repositories/FactsRepositories.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mSecurity - Session Management[2m > [22mshould enforce 24-hour session expiration
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mCreate Operation[2m > [22mshould create a new legal issue with all fields
 [32m✓[39m src/repositories/FactsRepositories.test.ts[2m > [22mFacts Repositories Integration Tests[2m > [22mCreating both fact types for a case[2m > [22mshould create user facts and case facts for the same case
 [32m✓[39m src/repositories/FactsRepositories.test.ts[2m > [22mFacts Repositories Integration Tests[2m > [22mEncryption verification across both repositories[2m > [22mshould encrypt both user facts and case facts independently
 [32m✓[39m src/repositories/FactsRepositories.test.ts[2m > [22mFacts Repositories Integration Tests[2m > [22mFiltering and categorization[2m > [22mshould filter user facts by type
 [32m✓[39m src/repositories/FactsRepositories.test.ts[2m > [22mFacts Repositories Integration Tests[2m > [22mFiltering and categorization[2m > [22mshould filter case facts by category
 [32m✓[39m src/repositories/FactsRepositories.test.ts[2m > [22mFacts Repositories Integration Tests[2m > [22mFiltering and categorization[2m > [22mshould filter case facts by importance
 [32m✓[39m src/repositories/FactsRepositories.test.ts[2m > [22mFacts Repositories Integration Tests[2m > [22mCascade delete behavior[2m > [22mshould delete both user facts and case facts when case is deleted
 [32m✓[39m src/repositories/FactsRepositories.test.ts[2m > [22mFacts Repositories Integration Tests[2m > [22mAudit trail verification[2m > [22mshould create separate audit logs for user facts and case facts
 [32m✓[39m src/repositories/FactsRepositories.test.ts[2m > [22mFacts Repositories Integration Tests[2m > [22mAudit trail verification[2m > [22mshould audit content access for both fact types
 [32m✓[39m src/repositories/FactsRepositories.test.ts[2m > [22mFacts Repositories Integration Tests[2m > [22mAudit trail verification[2m > [22mshould audit updates and deletes for both fact types
 [32m✓[39m src/repositories/FactsRepositories.test.ts[2m > [22mFacts Repositories Integration Tests[2m > [22mReal-world case scenario[2m > [22mshould handle a complete employment discrimination case with mixed facts
 [32m✓[39m src/repositories/FactsRepositories.test.ts[2m > [22mFacts Repositories Integration Tests[2m > [22mError handling[2m > [22mshould handle invalid case IDs gracefully
 [32m✓[39m src/repositories/FactsRepositories.test.ts[2m > [22mFacts Repositories Integration Tests[2m > [22mError handling[2m > [22mshould handle invalid fact types
 [32m✓[39m src/repositories/FactsRepositories.test.ts[2m > [22mFacts Repositories Integration Tests[2m > [22mError handling[2m > [22mshould handle invalid fact categories
 [32m✓[39m src/repositories/FactsRepositories.test.ts[2m > [22mFacts Repositories Integration Tests[2m > [22mError handling[2m > [22mshould handle invalid importance levels
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mCreate Operation[2m > [22mshould create a new legal issue with only required fields
[90mstderr[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mRemember Me and Session Persistence[2m > [22m[2mshould create session with Remember Me flag
[22m[39m[2025-10-19T12:43:35.026Z][WARN][AuthenticationService] Remember Me requested but no persistence handler configured

 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mRemember Me and Session Persistence[2m > [22mshould create session with Remember Me flag
[90mstderr[2m | src/features/legal/hooks/useLegalIssues.test.ts[2m > [22m[2museLegalIssues[2m > [22m[2mCreate Operation[2m > [22m[2mshould handle create failure with error message
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mCreate Operation[2m > [22mshould handle create failure with error message
[90mstderr[2m | src/features/legal/hooks/useLegalIssues.test.ts[2m > [22m[2museLegalIssues[2m > [22m[2mCreate Operation[2m > [22m[2mshould handle create exception
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mCreate Operation[2m > [22mshould handle create exception
[90mstderr[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mRemember Me and Session Persistence[2m > [22m[2mshould create 30-day session when Remember Me is enabled
[22m[39m[2025-10-19T12:43:35.169Z][WARN][AuthenticationService] Remember Me requested but no persistence handler configured

 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mRemember Me and Session Persistence[2m > [22mshould create 30-day session when Remember Me is enabled
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mCreate Note Workflow[2m > [22mshould NOT call createNote when content is only whitespace[33m 520[2mms[22m[39m
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyCaseOwnership[2m > [22mshould pass when case exists and user is owner
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyCaseOwnership[2m > [22mshould pass when case has null userId for backward compatibility
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyCaseOwnership[2m > [22mshould throw AuthorizationError when case does not exist
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyCaseOwnership[2m > [22mshould log audit event when case does not exist
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyCaseOwnership[2m > [22mshould throw AuthorizationError when user is not owner
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyCaseOwnership[2m > [22mshould log audit event when user is not owner
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyCaseOwnership[2m > [22mshould work without audit logger (optional dependency)
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyAdminRole[2m > [22mshould pass when user has admin role
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyAdminRole[2m > [22mshould throw AuthorizationError when user is not admin
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyAdminRole[2m > [22mshould log audit event when user is not admin
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyAdminRole[2m > [22mshould work without audit logger (optional dependency)
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyUserActive[2m > [22mshould pass when user is active
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyUserActive[2m > [22mshould throw AuthorizationError when user is not active
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyUserActive[2m > [22mshould log audit event when user is not active
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyUserActive[2m > [22mshould work without audit logger (optional dependency)
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyCanModifyUser[2m > [22mshould pass when user modifies themselves
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyCanModifyUser[2m > [22mshould pass when admin modifies another user
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyCanModifyUser[2m > [22mshould pass when admin modifies themselves
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyCanModifyUser[2m > [22mshould throw AuthorizationError when non-admin tries to modify another user
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyCanModifyUser[2m > [22mshould log audit event when non-admin tries to modify another user
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mverifyCanModifyUser[2m > [22mshould work without audit logger (optional dependency)
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mAuthorizationError[2m > [22mshould be an instance of Error
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mAuthorizationError[2m > [22mshould have correct name property
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mAuthorizationError[2m > [22mshould have correct message property
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mAuthorizationError[2m > [22mshould be catchable as specific error type
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mEdge Cases[2m > [22mshould handle zero IDs correctly
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mEdge Cases[2m > [22mshould handle negative IDs correctly
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mEdge Cases[2m > [22mshould handle very large IDs correctly
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mEdge Cases[2m > [22mshould convert numeric IDs to strings in audit logs
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mSecurity Scenarios[2m > [22mshould prevent horizontal privilege escalation (user accessing another user data)
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mSecurity Scenarios[2m > [22mshould prevent vertical privilege escalation (regular user accessing admin features)
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mSecurity Scenarios[2m > [22mshould prevent inactive users from accessing resources
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mSecurity Scenarios[2m > [22mshould prevent non-admin users from modifying other users
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mSecurity Scenarios[2m > [22mshould allow admins to perform all admin operations
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mAudit Logging Coverage[2m > [22mshould audit all authorization failures for case ownership
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mAudit Logging Coverage[2m > [22mshould audit admin role failures
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mAudit Logging Coverage[2m > [22mshould audit inactive user failures
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mAudit Logging Coverage[2m > [22mshould audit user modification failures
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts[2m > [22mAuthorizationMiddleware[2m > [22mAudit Logging Coverage[2m > [22mshould not audit successful authorizations
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mUpdate Operation[2m > [22mshould update an existing legal issue with all fields
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mUpdate Operation[2m > [22mshould update with partial fields
[90mstderr[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mRemember Me and Session Persistence[2m > [22m[2mshould handle Remember Me without persistence handler gracefully
[22m[39m[2025-10-19T12:43:35.309Z][WARN][AuthenticationService] Remember Me requested but no persistence handler configured

 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mRemember Me and Session Persistence[2m > [22mshould handle Remember Me without persistence handler gracefully
[90mstderr[2m | src/features/legal/hooks/useLegalIssues.test.ts[2m > [22m[2museLegalIssues[2m > [22m[2mUpdate Operation[2m > [22m[2mshould handle update failure with error message
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mUpdate Operation[2m > [22mshould handle update failure with error message
[90mstderr[2m | src/features/legal/hooks/useLegalIssues.test.ts[2m > [22m[2museLegalIssues[2m > [22m[2mUpdate Operation[2m > [22m[2mshould handle update exception
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mUpdate Operation[2m > [22mshould handle update exception
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mDelete Operation[2m > [22mshould delete a legal issue successfully
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mRemember Me and Session Persistence[2m > [22mshould always generate new session ID on login (prevent session fixation)
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mRemember Me and Session Persistence[2m > [22mshould restore persisted session returns null without handler
[90mstderr[2m | src/features/legal/hooks/useLegalIssues.test.ts[2m > [22m[2museLegalIssues[2m > [22m[2mDelete Operation[2m > [22m[2mshould handle delete failure with error message
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mDelete Operation[2m > [22mshould handle delete failure with error message
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mCategory Filtering[2m > [22mshould show all facts when "All" category filter is selected[33m 579[2mms[22m[39m
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mImportance Filtering[2m > [22mshould display all importance filter buttons with counts[33m 488[2mms[22m[39m
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mRemember Me and Session Persistence[2m > [22mwith mock persistence handler[2m > [22mshould store session when Remember Me is enabled
[90mstderr[2m | src/features/legal/hooks/useLegalIssues.test.ts[2m > [22m[2museLegalIssues[2m > [22m[2mDelete Operation[2m > [22m[2mshould handle delete exception
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mDelete Operation[2m > [22mshould handle delete exception
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mRefresh Functionality[2m > [22mshould refresh legal issues list
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mRemember Me and Session Persistence[2m > [22mwith mock persistence handler[2m > [22mshould not store session when Remember Me is disabled
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mCreate Note Workflow[2m > [22mshould hide creator and clear content when Cancel is clicked[33m 598[2mms[22m[39m
[90mstderr[2m | src/features/legal/hooks/useLegalIssues.test.ts[2m > [22m[2museLegalIssues[2m > [22m[2mRefresh Functionality[2m > [22m[2mshould set loading state during refresh
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

[90mstderr[2m | src/features/legal/hooks/useLegalIssues.test.ts[2m > [22m[2museLegalIssues[2m > [22m[2mRefresh Functionality[2m > [22m[2mshould set loading state during refresh
[22m[39mWarning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)
Warning: An update to TestComponent inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at TestComponent (F:\Justice Companion take 2\node_modules\.pnpm\@testing-library+react@16.3_59c0e11b10e1a70d511ef984e8664550\node_modules\@testing-library\react\dist\pure.js:329:5)

 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mImportance Filtering[2m > [22mshould filter facts by critical importance
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mRendering - Legal Disclaimer[2m > [22mshould render legal disclaimer banner
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mRendering - Filters and Controls[2m > [22mshould render case filter dropdown
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mRendering - Filters and Controls[2m > [22mshould render status filter dropdown
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mRendering - Filters and Controls[2m > [22mshould render upload evidence button[33m 1170[2mms[22m[39m
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mLoading State[2m > [22mshould show skeleton cards when loading
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mLoading State[2m > [22mshould show legal disclaimer when loading
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mError State[2m > [22mshould display error message when error exists
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mError State[2m > [22mshould show retry button in error state
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mEmpty State[2m > [22mshould show empty state when no documents exist
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mEmpty State[2m > [22mshould show upload button in empty state
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mDocument Display[2m > [22mshould display all documents from evidence
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mDocument Display[2m > [22mshould map evidence to document with correct status
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mDocument Display[2m > [22mshould display case names for documents
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mFiltering[2m > [22mshould change case filter value
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mRemember Me and Session Persistence[2m > [22mwith mock persistence handler[2m > [22mshould clear persisted session on logout
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mUpdate Note Workflow[2m > [22mshould enter edit mode when Edit button is clicked
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mRefresh Functionality[2m > [22mshould set loading state during refresh
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mFiltering[2m > [22mshould filter documents by status
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mError Handling[2m > [22mshould handle list failure with error message
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mRemember Me and Session Persistence[2m > [22mwith mock persistence handler[2m > [22mshould restore valid persisted session
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mError Handling[2m > [22mshould handle list failure without error message
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mImportance Filtering[2m > [22mshould filter facts by high importance
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mError Handling[2m > [22mshould handle list exception
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mRemember Me and Session Persistence[2m > [22mwith mock persistence handler[2m > [22mshould clear expired persisted session
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mEdge Cases[2m > [22mshould handle empty username gracefully
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mEdge Cases[2m > [22mshould handle empty password gracefully
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mUpdate Note Workflow[2m > [22mshould show Save and Cancel buttons in edit mode[33m 312[2mms[22m[39m
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mError Handling[2m > [22mshould handle non-Error exception
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mFiltering[2m > [22mshould reset to all statuses
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mEdge Cases[2m > [22mshould handle empty email gracefully
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts[2m > [22museLegalIssues[2m > [22mError Handling[2m > [22mshould clear previous error on successful operation
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mDocument Selection[2m > [22mshould select document when clicked
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mEdge Cases[2m > [22mshould handle very long passwords
 [32m✓[39m src/services/AuthenticationService.test.ts[2m > [22mAuthenticationService[2m > [22mEdge Cases[2m > [22mshould handle special characters in password
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mImportance Filtering[2m > [22mshould combine category and importance filters[33m 452[2mms[22m[39m
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mDocument Selection[2m > [22mshould deselect document when clicked again
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mDocument Selection[2m > [22mshould allow multiple selections
[90mstdout[2m | src/tests/authorization-security.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mDocument Selection[2m > [22mshould show bundle actions when documents selected
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mPUBLIC Handlers[2m > [22mshould allow access without authentication
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mPUBLIC Handlers[2m > [22mshould work even with an active session
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mAUTHENTICATED Handlers[2m > [22mshould deny access without session
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mAUTHENTICATED Handlers[2m > [22mshould deny access with invalid session
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mAUTHENTICATED Handlers[2m > [22mshould allow access with valid session
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mAUTHENTICATED Handlers[2m > [22mshould deny access for inactive users
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mAUTHORIZED Handlers[2m > [22mshould check resource ownership
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mAUTHORIZED Handlers[2m > [22mshould deny access to non-owned resources
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mADMIN Handlers[2m > [22mshould deny access for non-admin users
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mADMIN Handlers[2m > [22mshould allow access for admin users
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mADMIN Handlers[2m > [22mshould apply rate limiting to admin endpoints
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mRate Limiting[2m > [22mshould enforce rate limits when enabled
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mCustom Validation[2m > [22mshould execute additional checks
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mCustom Validation[2m > [22mshould deny access if additional check fails
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mError Handling[2m > [22mshould handle handler errors gracefully
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mError Handling[2m > [22mshould not leak sensitive information in errors
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mAudit Logging[2m > [22mshould log successful authorization for sensitive operations
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mAudit Logging[2m > [22mshould log authorization failures
[31m   → AuthorizationWrapper is not a constructor[39m
 [31m×[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mBatch Operations[2m > [22mshould wrap multiple handlers at once
[31m   → AuthorizationWrapper is not a constructor[39m
 [32m✓[39m src/tests/authorization-security.test.ts[2m > [22mSecurity Compliance Tests[2m > [22mOWASP Top 10 Coverage[2m > [22mA01:2021 - Broken Access Control: Should enforce proper authorization
 [32m✓[39m src/tests/authorization-security.test.ts[2m > [22mSecurity Compliance Tests[2m > [22mOWASP Top 10 Coverage[2m > [22mA02:2021 - Cryptographic Failures: Should not expose sensitive data
 [32m✓[39m src/tests/authorization-security.test.ts[2m > [22mSecurity Compliance Tests[2m > [22mOWASP Top 10 Coverage[2m > [22mA03:2021 - Injection: Should validate and sanitize inputs
 [32m✓[39m src/tests/authorization-security.test.ts[2m > [22mSecurity Compliance Tests[2m > [22mOWASP Top 10 Coverage[2m > [22mA04:2021 - Insecure Design: Should implement defense in depth
 [32m✓[39m src/tests/authorization-security.test.ts[2m > [22mSecurity Compliance Tests[2m > [22mOWASP Top 10 Coverage[2m > [22mA05:2021 - Security Misconfiguration: Should have secure defaults
 [32m✓[39m src/tests/authorization-security.test.ts[2m > [22mSecurity Compliance Tests[2m > [22mOWASP Top 10 Coverage[2m > [22mA07:2021 - Identification and Authentication Failures: Should validate sessions
 [32m✓[39m src/tests/authorization-security.test.ts[2m > [22mSecurity Compliance Tests[2m > [22mOWASP Top 10 Coverage[2m > [22mA09:2021 - Security Logging and Monitoring Failures: Should log security events
 [32m✓[39m src/tests/authorization-security.test.ts[2m > [22mSecurity Compliance Tests[2m > [22mGDPR Compliance[2m > [22mshould require authentication for data export
 [32m✓[39m src/tests/authorization-security.test.ts[2m > [22mSecurity Compliance Tests[2m > [22mGDPR Compliance[2m > [22mshould require confirmation for data deletion
 [32m✓[39m src/tests/authorization-security.test.ts[2m > [22mSecurity Compliance Tests[2m > [22mGDPR Compliance[2m > [22mshould audit all data access
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mUpdate Note Workflow[2m > [22mshould call updateNote when Save button is clicked with changes[33m 834[2mms[22m[39m
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mFile Operations - Single Document[2m > [22mshould call viewFile when clicking view button
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mImportance Filtering[2m > [22mshould show empty state when combined filters match nothing[33m 534[2mms[22m[39m
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mFile Operations - Single Document[2m > [22mshould call downloadFile when clicking download button
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mcreateTimelineEvent[2m > [22mshould create a timeline event with valid input
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mcreateTimelineEvent[2m > [22mshould create a timeline event without description
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mcreateTimelineEvent[2m > [22mshould throw error if title is empty
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mcreateTimelineEvent[2m > [22mshould throw error if title exceeds 200 characters
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mcreateTimelineEvent[2m > [22mshould accept title exactly 200 characters
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mcreateTimelineEvent[2m > [22mshould throw error if eventDate is missing
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mcreateTimelineEvent[2m > [22mshould throw error if description exceeds 10000 characters
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mcreateTimelineEvent[2m > [22mshould accept description exactly 10000 characters
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mcreateTimelineEvent[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mgetTimelineEventById[2m > [22mshould return a timeline event by id
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mgetTimelineEventById[2m > [22mshould return null if timeline event not found
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mgetTimelineEventById[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mgetTimelineEventsByCaseId[2m > [22mshould return all timeline events for a case
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mgetTimelineEventsByCaseId[2m > [22mshould return empty array if no timeline events exist
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mgetTimelineEventsByCaseId[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mupdateTimelineEvent[2m > [22mshould update a timeline event with valid input
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mupdateTimelineEvent[2m > [22mshould update only title
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mupdateTimelineEvent[2m > [22mshould throw error if title is empty string
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mupdateTimelineEvent[2m > [22mshould throw error if title exceeds 200 characters
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mupdateTimelineEvent[2m > [22mshould throw error if description exceeds 10000 characters
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mupdateTimelineEvent[2m > [22mshould throw error if timeline event not found
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mupdateTimelineEvent[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mdeleteTimelineEvent[2m > [22mshould delete a timeline event successfully
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mdeleteTimelineEvent[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mEdge Cases[2m > [22mshould handle special characters in title
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mEdge Cases[2m > [22mshould handle unicode characters in title and description
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mEdge Cases[2m > [22mshould handle various date formats
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts[2m > [22mTimelineService[2m > [22mEdge Cases[2m > [22mshould handle newlines in description
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mFile Operations - Single Document[2m > [22mshould call printFile when clicking print button
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mCreate Case Fact Workflow[2m > [22mshould show fact creator when Add button is clicked[33m 364[2mms[22m[39m
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mFile Operations - Single Document[2m > [22mshould call emailFiles when clicking email button
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mBundle Operations[2m > [22mshould download all documents when no selection
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mCreate Case Fact Workflow[2m > [22mshould default to "timeline" category and "medium" importance[33m 322[2mms[22m[39m
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mUpdate Note Workflow[2m > [22mshould exit edit mode after successful update[33m 734[2mms[22m[39m
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mBundle Operations[2m > [22mshould download only selected documents
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mUpdate Note Workflow[2m > [22mshould NOT call updateNote when content is empty[33m 364[2mms[22m[39m
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mCreate Case Fact Workflow[2m > [22mshould allow changing category before creating[33m 395[2mms[22m[39m
[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mcreate[2m > [22mshould create a case fact with encrypted content
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mcreate[2m > [22mshould create case facts with different categories
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mcreate[2m > [22mshould create case facts with different importance levels
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mcreate[2m > [22mshould audit case fact creation
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mfindById[2m > [22mshould find case fact by ID and decrypt content
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mfindById[2m > [22mshould return null for non-existent ID
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mfindById[2m > [22mshould audit content access
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mfindByCaseId[2m > [22mshould find all case facts for a case ordered by importance
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mfindByCaseId[2m > [22mshould return empty array for case with no facts
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mfindByCaseId[2m > [22mshould audit bulk content access
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mfindByCategory[2m > [22mshould find case facts by category
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mfindByCategory[2m > [22mshould return empty array for category with no facts
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mfindByCategory[2m > [22mshould audit filtered content access
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mfindByImportance[2m > [22mshould find case facts by importance level
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mfindByImportance[2m > [22mshould return empty array for importance level with no facts
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mupdate[2m > [22mshould update fact content with re-encryption
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mupdate[2m > [22mshould update fact category and importance
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mupdate[2m > [22mshould return null for non-existent ID
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mupdate[2m > [22mshould audit fact updates
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mdelete[2m > [22mshould delete case fact
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mdelete[2m > [22mshould return false for non-existent ID
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mdelete[2m > [22mshould audit fact deletion
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mbackward compatibility[2m > [22mshould handle legacy plaintext data
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts[2m > [22mCaseFactsRepository[2m > [22mCASCADE DELETE[2m > [22mshould delete case facts when case is deleted
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mCreate Case Fact Workflow[2m > [22mshould allow changing importance before creating[33m 471[2mms[22m[39m
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mUpdate Note Workflow[2m > [22mshould exit edit mode and revert changes when Cancel is clicked[33m 774[2mms[22m[39m
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mInitial State and Data Loading[2m > [22mshould initialize with empty notes array and loading state
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mInitial State and Data Loading[2m > [22mshould load notes on mount
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mBundle Operations[2m > [22mshould email bundle with multiple files
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mInitial State and Data Loading[2m > [22mshould handle empty notes list
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mCreate Case Fact Workflow[2m > [22mshould render new fact creator UI elements[33m 492[2mms[22m[39m
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mCore Functionality[2m > [22mshould encrypt and decrypt data correctly
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mCore Functionality[2m > [22mshould produce EncryptedData with all required fields
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mCore Functionality[2m > [22mshould decrypt valid encrypted data successfully
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mCore Functionality[2m > [22mshould generate 32-byte encryption key
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mCore Functionality[2m > [22mshould correctly identify encrypted data with isEncrypted()
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mCore Functionality[2m > [22mshould return false for non-encrypted data with isEncrypted()
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mSecurity Properties[2m > [22mshould generate unique IVs for same plaintext encrypted twice
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mSecurity Properties[2m > [22mshould include non-empty authentication tag
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mSecurity Properties[2m > [22mshould detect tampered ciphertext via authentication tag
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mSecurity Properties[2m > [22mshould detect tampered authentication tag
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mSecurity Properties[2m > [22mshould reject 31-byte key (too short)
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mSecurity Properties[2m > [22mshould reject 33-byte key (too long)
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mEdge Cases[2m > [22mshould return null for empty string
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mEdge Cases[2m > [22mshould return null for null input to encrypt()
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mEdge Cases[2m > [22mshould return null for undefined input to encrypt()
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mEdge Cases[2m > [22mshould return null for whitespace-only string
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mEdge Cases[2m > [22mshould return null when decrypting null
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mEdge Cases[2m > [22mshould return null when decrypting undefined
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mError Handling[2m > [22mshould throw error for corrupted ciphertext
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mError Handling[2m > [22mshould throw error for invalid base64 in IV
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mError Handling[2m > [22mshould throw error for invalid base64 in ciphertext
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mError Handling[2m > [22mshould throw error for missing algorithm field
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mError Handling[2m > [22mshould fail gracefully when decrypting with wrong key
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mError Handling[2m > [22mshould throw error for malformed EncryptedData object
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mKey Rotation[2m > [22mshould successfully re-encrypt data with new key using rotateKey()
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mKey Rotation[2m > [22mshould prevent old service from decrypting data encrypted with new key
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mData Format Validation[2m > [22mshould have correct algorithm value in EncryptedData
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mData Format Validation[2m > [22mshould have correct version number in EncryptedData
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mData Format Validation[2m > [22mshould produce base64 encoded ciphertext
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mData Format Validation[2m > [22mshould produce base64 encoded IV
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mData Format Validation[2m > [22mshould produce base64 encoded auth tag
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mLarge Data Handling[2m > [22mshould encrypt and decrypt 1KB of text successfully
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mLarge Data Handling[2m > [22mshould encrypt and decrypt 100KB of text successfully
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mLarge Data Handling[2m > [22mshould encrypt and decrypt 1MB of text successfully (large legal documents)
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mConstructor Key Handling[2m > [22mshould accept Buffer key in constructor
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mConstructor Key Handling[2m > [22mshould accept base64 string key in constructor
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mConstructor Key Handling[2m > [22mshould create equivalent services from Buffer and base64 string
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mSpecial Characters and Unicode[2m > [22mshould handle special characters correctly
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mSpecial Characters and Unicode[2m > [22mshould handle unicode characters correctly
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mSpecial Characters and Unicode[2m > [22mshould handle emojis correctly
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22mSpecial Characters and Unicode[2m > [22mshould handle newlines and tabs
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22misEncrypted() Type Guard[2m > [22mshould return false for null
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22misEncrypted() Type Guard[2m > [22mshould return false for undefined
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22misEncrypted() Type Guard[2m > [22mshould return false for string
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22misEncrypted() Type Guard[2m > [22mshould return false for number
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22misEncrypted() Type Guard[2m > [22mshould return false for array
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22misEncrypted() Type Guard[2m > [22mshould return false for object missing required fields
 [32m✓[39m src/services/EncryptionService.test.ts[2m > [22mEncryptionService[2m > [22misEncrypted() Type Guard[2m > [22mshould return false for object with wrong field types
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mInitial State and Data Loading[2m > [22mshould handle missing data property in response
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mCaseId Changes[2m > [22mshould reload notes when caseId changes
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mcreateUserFact[2m > [22mshould create a user fact with valid input
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mcreateUserFact[2m > [22mshould create a user fact with different fact types
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mcreateUserFact[2m > [22mshould throw error if factContent is empty
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mcreateUserFact[2m > [22mshould throw error if factContent exceeds 5000 characters
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mcreateUserFact[2m > [22mshould accept factContent exactly 5000 characters
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mcreateUserFact[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mgetUserFactById[2m > [22mshould return a user fact by id
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mgetUserFactById[2m > [22mshould return null if user fact not found
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mgetUserFactById[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mgetUserFactsByCaseId[2m > [22mshould return all user facts for a case
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mgetUserFactsByCaseId[2m > [22mshould return empty array if no user facts exist
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mgetUserFactsByCaseId[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mgetUserFactsByType[2m > [22mshould return user facts filtered by type
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mgetUserFactsByType[2m > [22mshould return empty array if no facts match type
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mgetUserFactsByType[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mupdateUserFact[2m > [22mshould update a user fact with valid input
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mupdateUserFact[2m > [22mshould update only factContent
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mupdateUserFact[2m > [22mshould throw error if factContent is empty string
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mupdateUserFact[2m > [22mshould throw error if factContent exceeds 5000 characters
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mupdateUserFact[2m > [22mshould throw error if user fact not found
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mupdateUserFact[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mdeleteUserFact[2m > [22mshould delete a user fact successfully
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mdeleteUserFact[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mEdge Cases[2m > [22mshould handle special characters in factContent
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mEdge Cases[2m > [22mshould handle unicode characters in factContent
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mEdge Cases[2m > [22mshould handle newlines and formatting in factContent
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts[2m > [22mUserFactsService[2m > [22mEdge Cases[2m > [22mshould handle PII data in factContent
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mCreate Operation[2m > [22mshould create a new note successfully
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mCreate Operation[2m > [22mshould handle create failure with error message
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mUpdate Note Workflow[2m > [22mshould handle editing multiple notes independently[33m 573[2mms[22m[39m
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mCreate Operation[2m > [22mshould handle create failure without error message
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mUpdate Case Fact[2m > [22mshould call updateCaseFact when fact is updated[33m 385[2mms[22m[39m
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mCreate Operation[2m > [22mshould handle create exception
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mUpdate Operation[2m > [22mshould update an existing note successfully
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mUpdate Operation[2m > [22mshould handle update failure with error message
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mDelete Note Workflow[2m > [22mshould call deleteNote when Delete button is clicked and confirmed
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mUpdate Operation[2m > [22mshould handle update exception
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mDelete Operation[2m > [22mshould delete a note successfully
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mUpload Modal[2m > [22mshould open upload modal when clicking upload button[33m 1049[2mms[22m[39m
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mDelete Operation[2m > [22mshould handle delete failure with error message
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mDelete Case Fact[2m > [22mshould call deleteCaseFact when delete button is clicked[33m 406[2mms[22m[39m
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mImportance Badges[2m > [22mshould display importance badge for each fact
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mColor Assignment[2m > [22mshould assign correct colors to different fact categories
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mEdge Cases[2m > [22mshould handle very long fact content
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mEdge Cases[2m > [22mshould handle special characters in fact content
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mEdge Cases[2m > [22mshould handle caseId prop changes
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mDelete Operation[2m > [22mshould handle delete exception
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mDelete Note Workflow[2m > [22mshould NOT call deleteNote when delete is cancelled
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mContent Display[2m > [22mshould preserve multiline content with pre-wrap
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mContent Display[2m > [22mshould display full timestamps in locale format
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mEdge Cases[2m > [22mshould handle very long note content
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mEdge Cases[2m > [22mshould handle special characters in note content
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mEdge Cases[2m > [22mshould handle caseId prop changes
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mRefresh Functionality[2m > [22mshould refresh notes list
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mRefresh Functionality[2m > [22mshould set loading state during refresh
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mError Handling[2m > [22mshould handle list failure with error message
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mError Handling[2m > [22mshould handle list failure without error message
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mEdge Cases[2m > [22mshould update count when filtering[33m 443[2mms[22m[39m
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mAccessibility[2m > [22mshould have proper heading hierarchy
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mError Handling[2m > [22mshould handle list exception
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mAccessibility[2m > [22mshould have accessible labels for selects[33m 414[2mms[22m[39m
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx[2m > [22mCaseFactsPanel[2m > [22mAccessibility[2m > [22mshould have descriptive filter labels
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mError Handling[2m > [22mshould handle non-Error exception
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts[2m > [22museNotes[2m > [22mError Handling[2m > [22mshould clear previous error on successful operation
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mEdge Cases[2m > [22mshould handle rapid create and cancel clicks[33m 931[2mms[22m[39m
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mAccessibility[2m > [22mshould have proper heading hierarchy
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mUpload Modal[2m > [22mshould close upload modal when clicking close[33m 1020[2mms[22m[39m
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mcreateLegalIssue[2m > [22mshould create a legal issue with valid input
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mcreateLegalIssue[2m > [22mshould create a legal issue without description
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mcreateLegalIssue[2m > [22mshould throw error if title is empty
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mcreateLegalIssue[2m > [22mshould throw error if title exceeds 200 characters
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mcreateLegalIssue[2m > [22mshould accept title exactly 200 characters
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mcreateLegalIssue[2m > [22mshould throw error if description exceeds 10000 characters
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mcreateLegalIssue[2m > [22mshould accept description exactly 10000 characters
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mcreateLegalIssue[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mgetLegalIssueById[2m > [22mshould return a legal issue by id
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mgetLegalIssueById[2m > [22mshould return null if legal issue not found
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mgetLegalIssueById[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mgetLegalIssuesByCaseId[2m > [22mshould return all legal issues for a case
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mgetLegalIssuesByCaseId[2m > [22mshould return empty array if no legal issues exist
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mgetLegalIssuesByCaseId[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mupdateLegalIssue[2m > [22mshould update a legal issue with valid input
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mupdateLegalIssue[2m > [22mshould update only title
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mupdateLegalIssue[2m > [22mshould throw error if title is empty string
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mupdateLegalIssue[2m > [22mshould throw error if title exceeds 200 characters
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mupdateLegalIssue[2m > [22mshould throw error if description exceeds 10000 characters
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mupdateLegalIssue[2m > [22mshould throw error if legal issue not found
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mupdateLegalIssue[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mdeleteLegalIssue[2m > [22mshould delete a legal issue successfully
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mdeleteLegalIssue[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mEdge Cases[2m > [22mshould handle special characters in title
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mEdge Cases[2m > [22mshould handle unicode characters in title and description
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts[2m > [22mLegalIssuesService[2m > [22mEdge Cases[2m > [22mshould handle newlines in description
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mAccessibility[2m > [22mshould have accessible placeholder for new note textarea
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mUpload Modal[2m > [22mshould refresh evidence when upload completes[33m 1236[2mms[22m[39m
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mAccessibility[2m > [22mshould have accessible loading state
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx[2m > [22mDocumentsView[2m > [22mAccessibility[2m > [22mshould have keyboard-accessible document cards
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mAccessibility[2m > [22mshould autofocus edit textarea when entering edit mode
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mAccessibility[2m > [22mshould have clear button labels[33m 422[2mms[22m[39m
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mAccessibility[2m > [22mshould handle keyboard navigation through buttons
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mEmpty State Behavior[2m > [22mshould show empty state with correct styling
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx[2m > [22mNotesPanel[2m > [22mEmpty State Behavior[2m > [22mshould show count of 0 in header when no notes
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mRendering[2m > [22mshould render with default yellow color
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mRendering[2m > [22mshould render with custom color (blue)
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mRendering[2m > [22mshould render all 5 color variants correctly
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mRendering[2m > [22mshould display placeholder when content is empty
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mRendering[2m > [22mshould render delete button when onDelete is provided and not readOnly
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mRendering[2m > [22mshould NOT render delete button when readOnly
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mRendering[2m > [22mshould NOT render delete button when onDelete is not provided
[90mstdout[2m | src/repositories/UserFactsRepository.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mLoading State[2m > [22mshould show loading message when loading
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mLoading State[2m > [22mshould show loading when case not found
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mHeader[2m > [22mshould display case title
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mHeader[2m > [22mshould display case status with correct color
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mHeader[2m > [22mshould display closed status with gray color
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mHeader[2m > [22mshould display case type
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mHeader[2m > [22mshould render back button
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mcreate[2m > [22mshould create a user fact with encrypted content
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mcreate[2m > [22mshould create user facts with different types
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mcreate[2m > [22mshould audit user fact creation
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mfindById[2m > [22mshould find user fact by ID and decrypt content
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mfindById[2m > [22mshould return null for non-existent ID
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mfindById[2m > [22mshould audit content access when decrypting
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mfindByCaseId[2m > [22mshould find all user facts for a case
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mfindByCaseId[2m > [22mshould return empty array for case with no facts
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mfindByCaseId[2m > [22mshould audit bulk content access
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mfindByType[2m > [22mshould find user facts by type
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mfindByType[2m > [22mshould return empty array for type with no facts
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mfindByType[2m > [22mshould audit filtered content access
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mupdate[2m > [22mshould update fact content with re-encryption
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mupdate[2m > [22mshould update fact type
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mupdate[2m > [22mshould update both content and type
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mupdate[2m > [22mshould audit update operation
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mdelete[2m > [22mshould delete user fact
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mdelete[2m > [22mshould return false for non-existent fact
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mdelete[2m > [22mshould audit delete operation
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mbackward compatibility[2m > [22mshould handle legacy plaintext data
 [32m✓[39m src/repositories/UserFactsRepository.test.ts[2m > [22mUserFactsRepository[2m > [22mCASCADE DELETE[2m > [22mshould delete user facts when case is deleted
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mEdit Mode Interactions[2m > [22mshould enter edit mode when clicked[33m 310[2mms[22m[39m
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mEdit Mode Interactions[2m > [22mshould NOT enter edit mode when readOnly
[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2misAvailable[2m > [22m[2mshould return true when encryption is available
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2misAvailable[2m > [22m[2mshould return false when encryption is not available
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2misAvailable[2m > [22m[2mshould return false when encryption is not available
[22m[39m[2025-10-19T12:43:43.805Z][WARN][SessionPersistence] Encryption not available (missing OS keychain support)

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2misAvailable[2m > [22m[2mshould handle errors gracefully
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2misAvailable[2m > [22m[2mshould handle errors gracefully
[22m[39m[2025-10-19T12:43:43.816Z][ERROR][SessionPersistence] Error checking encryption availability {
  "error": {}
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2misAvailable[2m > [22m[2mshould return false when safeStorage API is not available
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2misAvailable[2m > [22m[2mshould return false when safeStorage API is not available
[22m[39m[2025-10-19T12:43:43.828Z][WARN][SessionPersistence] safeStorage API not available

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mstoreSessionId[2m > [22m[2mshould store a valid session ID
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mstoreSessionId[2m > [22m[2mshould create userData directory if it does not exist
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mstoreSessionId[2m > [22m[2mshould not create directory if it already exists
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mstoreSessionId[2m > [22m[2mshould reject invalid session ID format
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mstoreSessionId[2m > [22m[2mshould reject invalid session ID format
[22m[39m[2025-10-19T12:43:43.878Z][ERROR][SessionPersistence] Failed to store session ID {
  "error": {}
}
[2025-10-19T12:43:43.881Z][ERROR][SessionPersistence] Failed to store session ID {
  "error": {}
}
[2025-10-19T12:43:43.881Z][ERROR][SessionPersistence] Failed to store session ID {
  "error": {}
}
[2025-10-19T12:43:43.882Z][ERROR][SessionPersistence] Failed to store session ID {
  "error": {}
}
[2025-10-19T12:43:43.883Z][ERROR][SessionPersistence] Failed to store session ID {
  "error": {}
}
[2025-10-19T12:43:43.883Z][ERROR][SessionPersistence] Failed to store session ID {
  "error": {}
}
[2025-10-19T12:43:43.884Z][ERROR][SessionPersistence] Failed to store session ID {
  "error": {}
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mstoreSessionId[2m > [22m[2mshould throw error when encryption is not available
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mstoreSessionId[2m > [22m[2mshould throw error when encryption is not available
[22m[39m[2025-10-19T12:43:43.896Z][WARN][SessionPersistence] Encryption not available (missing OS keychain support)
[2025-10-19T12:43:43.896Z][ERROR][SessionPersistence] Failed to store session ID {
  "error": {}
}

 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22misAvailable[2m > [22mshould return true when encryption is available
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22misAvailable[2m > [22mshould return false when encryption is not available
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22misAvailable[2m > [22mshould handle errors gracefully
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22misAvailable[2m > [22mshould return false when safeStorage API is not available
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mstoreSessionId[2m > [22mshould store a valid session ID
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mstoreSessionId[2m > [22mshould create userData directory if it does not exist
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mstoreSessionId[2m > [22mshould not create directory if it already exists
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mstoreSessionId[2m > [22mshould reject invalid session ID format
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mstoreSessionId[2m > [22mshould throw error when encryption is not available
[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mstoreSessionId[2m > [22m[2mshould clean up file on write error
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mstoreSessionId[2m > [22m[2mshould clean up file on write error
[22m[39m[2025-10-19T12:43:43.912Z][ERROR][SessionPersistence] Failed to store session ID {
  "error": {}
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mstoreSessionId[2m > [22m[2mshould handle cleanup errors gracefully
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mstoreSessionId[2m > [22m[2mshould handle cleanup errors gracefully
[22m[39m[2025-10-19T12:43:43.924Z][ERROR][SessionPersistence] Failed to store session ID {
  "error": {}
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mretrieveSessionId[2m > [22m[2mshould retrieve and decrypt stored session ID
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mstoreSessionId[2m > [22mshould clean up file on write error
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mstoreSessionId[2m > [22mshould handle cleanup errors gracefully
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mretrieveSessionId[2m > [22mshould retrieve and decrypt stored session ID
[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mretrieveSessionId[2m > [22m[2mshould return null when file does not exist
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mEdit Mode Interactions[2m > [22mshould select all text when entering edit mode
[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mretrieveSessionId[2m > [22m[2mshould return null when encryption is not available
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mretrieveSessionId[2m > [22m[2mshould return null when encryption is not available
[22m[39m[2025-10-19T12:43:43.958Z][WARN][SessionPersistence] Encryption not available (missing OS keychain support)
[2025-10-19T12:43:43.958Z][WARN][SessionPersistence] Cannot retrieve: encryption not available

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mretrieveSessionId[2m > [22m[2mshould return null and clean up when file is empty
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mretrieveSessionId[2m > [22m[2mshould return null and clean up when file is empty
[22m[39m[2025-10-19T12:43:43.968Z][WARN][SessionPersistence] Stored session file is empty

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mretrieveSessionId[2m > [22m[2mshould return null and clean up when decrypted ID is invalid
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mretrieveSessionId[2m > [22m[2mshould return null and clean up when decrypted ID is invalid
[22m[39m[2025-10-19T12:43:43.978Z][ERROR][SessionPersistence] Stored session ID is invalid

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mretrieveSessionId[2m > [22m[2mshould handle corrupted files gracefully
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mretrieveSessionId[2m > [22m[2mshould handle corrupted files gracefully
[22m[39m[2025-10-19T12:43:43.988Z][ERROR][SessionPersistence] Failed to retrieve session ID {
  "error": {}
}
[2025-10-19T12:43:43.988Z][WARN][SessionPersistence] Corrupted session file detected, cleaning up

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mretrieveSessionId[2m > [22m[2mshould handle read errors gracefully
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mretrieveSessionId[2m > [22m[2mshould handle read errors gracefully
[22m[39m[2025-10-19T12:43:43.998Z][ERROR][SessionPersistence] Failed to retrieve session ID {
  "error": {}
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mclearSession[2m > [22m[2mshould delete the session file if it exists
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mclearSession[2m > [22m[2mshould handle non-existent file gracefully
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mclearSession[2m > [22m[2mshould handle deletion errors gracefully
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mretrieveSessionId[2m > [22mshould return null when file does not exist
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mretrieveSessionId[2m > [22mshould return null when encryption is not available
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mretrieveSessionId[2m > [22mshould return null and clean up when file is empty
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mretrieveSessionId[2m > [22mshould return null and clean up when decrypted ID is invalid
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mretrieveSessionId[2m > [22mshould handle corrupted files gracefully
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mretrieveSessionId[2m > [22mshould handle read errors gracefully
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mclearSession[2m > [22mshould delete the session file if it exists
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mclearSession[2m > [22mshould handle non-existent file gracefully
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mclearSession[2m > [22mshould handle deletion errors gracefully
[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mhasStoredSession[2m > [22m[2mshould return true when session file exists and is not empty
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mhasStoredSession[2m > [22m[2mshould return false when session file does not exist
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mhasStoredSession[2m > [22m[2mshould return false when session file is empty
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mhasStoredSession[2m > [22m[2mshould handle stat errors gracefully
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mgetSessionMetadata[2m > [22m[2mshould return metadata when session file exists
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mgetSessionMetadata[2m > [22m[2mshould return minimal metadata when file does not exist
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mgetSessionMetadata[2m > [22m[2mshould include encryption availability status
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mgetSessionMetadata[2m > [22m[2mshould include encryption availability status
[22m[39m[2025-10-19T12:43:44.115Z][WARN][SessionPersistence] Encryption not available (missing OS keychain support)

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mSingleton pattern[2m > [22m[2mshould return the same instance
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mSecurity tests[2m > [22m[2mshould never log decrypted session IDs
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mSecurity tests[2m > [22m[2mshould validate UUID v4 format strictly
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mSecurity tests[2m > [22m[2mshould validate UUID v4 format strictly
[22m[39m[2025-10-19T12:43:44.145Z][ERROR][SessionPersistence] Failed to store session ID {
  "error": {}
}
[2025-10-19T12:43:44.145Z][ERROR][SessionPersistence] Failed to store session ID {
  "error": {}
}
[2025-10-19T12:43:44.146Z][ERROR][SessionPersistence] Failed to store session ID {
  "error": {}
}
[2025-10-19T12:43:44.146Z][ERROR][SessionPersistence] Failed to store session ID {
  "error": {}
}

 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mhasStoredSession[2m > [22mshould return true when session file exists and is not empty
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mhasStoredSession[2m > [22mshould return false when session file does not exist
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mhasStoredSession[2m > [22mshould return false when session file is empty
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mhasStoredSession[2m > [22mshould handle stat errors gracefully
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mgetSessionMetadata[2m > [22mshould return metadata when session file exists
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mgetSessionMetadata[2m > [22mshould return minimal metadata when file does not exist
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mgetSessionMetadata[2m > [22mshould include encryption availability status
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mSingleton pattern[2m > [22mshould return the same instance
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mSecurity tests[2m > [22mshould never log decrypted session IDs
 [32m✓[39m src/services/SessionPersistenceService.test.ts[2m > [22mSessionPersistenceService[2m > [22mSecurity tests[2m > [22mshould validate UUID v4 format strictly
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mUser Messages[2m > [22mshould render user message with correct styling
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mUser Messages[2m > [22mshould align user message to the right
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mUser Messages[2m > [22mshould render user message as plain text (not markdown)
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mUser Messages[2m > [22mshould display timestamp for user message
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mUser Messages[2m > [22mshould NOT show sources for user message
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mUser Messages[2m > [22mshould NOT show disclaimer for user message
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mUser Messages[2m > [22mshould show streaming indicator for user message
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mUser Messages[2m > [22mshould NOT show timestamp when streaming
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAssistant Messages[2m > [22mshould render assistant message with correct styling
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAssistant Messages[2m > [22mshould align assistant message to the left
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAssistant Messages[2m > [22mshould render assistant message as markdown
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAssistant Messages[2m > [22mshould display timestamp for assistant message
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAssistant Messages[2m > [22mshould show sources when provided
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAssistant Messages[2m > [22mshould NOT show sources when empty array
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAssistant Messages[2m > [22mshould show disclaimer for assistant message
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAssistant Messages[2m > [22mshould NOT show disclaimer when streaming
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAssistant Messages[2m > [22mshould render markdown lists correctly
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAssistant Messages[2m > [22mshould render markdown code blocks correctly
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAI Reasoning Process[2m > [22mshould show reasoning dropdown when thinkingContent is present[33m 337[2mms[22m[39m
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAI Reasoning Process[2m > [22mshould NOT show reasoning dropdown when thinkingContent is null
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAI Reasoning Process[2m > [22mshould NOT show reasoning dropdown when thinkingContent is empty string
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mHeader[2m > [22mshould call onBack when back button clicked[33m 323[2mms[22m[39m
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mTab Navigation[2m > [22mshould render all 6 tabs[33m 347[2mms[22m[39m
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mTab Navigation[2m > [22mshould default to Overview tab
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mEdit Mode Interactions[2m > [22mshould update content and call onUpdate when blur occurs[33m 682[2mms[22m[39m
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAI Reasoning Process[2m > [22mshould expand and collapse reasoning content when clicked[33m 367[2mms[22m[39m
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAI Reasoning Process[2m > [22mshould have proper ARIA attributes for reasoning button
[90mstdout[2m | src/components/ErrorBoundary.test.tsx
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mTab Navigation[2m > [22mshould change tab when clicked
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAI Reasoning Process[2m > [22mshould update aria-expanded when reasoning is expanded
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAI Reasoning Process[2m > [22mshould only show reasoning for assistant messages
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mStreaming State[2m > [22mshould show streaming indicator for assistant message
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mStreaming State[2m > [22mshould NOT show timestamp when streaming
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mStreaming State[2m > [22mshould NOT show disclaimer when streaming
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAccessibility[2m > [22mshould have proper ARIA label for reasoning button
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mTab Navigation[2m > [22mshould activate Evidence tab
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAccessibility[2m > [22mshould update ARIA label when reasoning is expanded
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAccessibility[2m > [22mshould have semantic HTML for message content
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx[2m > [22mMessageBubble[2m > [22mAccessibility[2m > [22mshould preserve whitespace in user messages
[90mstdout[2m | src/hooks/useLocalStorage.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mTab Navigation[2m > [22mshould activate Facts tab
[90mstderr[2m | src/hooks/useLocalStorage.test.ts[2m > [22m[2museLocalStorage[2m > [22m[2mError Handling[2m > [22m[2mshould return default value if localStorage.getItem throws error
[22m[39m[2025-10-19T12:43:45.137Z][WARN][useLocalStorage] Error reading localStorage key "testKey" {
  "error": {}
}

[90mstderr[2m | src/hooks/useLocalStorage.test.ts[2m > [22m[2museLocalStorage[2m > [22m[2mError Handling[2m > [22m[2mshould return default value if stored value is invalid JSON
[22m[39m[2025-10-19T12:43:45.141Z][WARN][useLocalStorage] Error reading localStorage key "testKey" {
  "error": {}
}

[90mstderr[2m | src/hooks/useLocalStorage.test.ts[2m > [22m[2museLocalStorage[2m > [22m[2mError Handling[2m > [22m[2mshould handle localStorage.setItem errors gracefully
[22m[39m[2025-10-19T12:43:45.145Z][WARN][useLocalStorage] Error setting localStorage key "testKey" {
  "error": {}
}

[90mstderr[2m | src/hooks/useLocalStorage.test.ts[2m > [22m[2museLocalStorage[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle undefined as stored value (treats as no value)
[22m[39m[2025-10-19T12:43:45.160Z][WARN][useLocalStorage] Error reading localStorage key "testKey" {
  "error": {}
}

 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mInitial Load - No Saved Value[2m > [22mshould return default value when localStorage is empty (string)
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mInitial Load - No Saved Value[2m > [22mshould return default value when localStorage is empty (boolean)
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mInitial Load - No Saved Value[2m > [22mshould return default value when localStorage is empty (number)
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mInitial Load - No Saved Value[2m > [22mshould return default value when localStorage is empty (object)
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mInitial Load - With Saved Value[2m > [22mshould return saved value from localStorage (string)
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mInitial Load - With Saved Value[2m > [22mshould return saved value from localStorage (boolean)
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mInitial Load - With Saved Value[2m > [22mshould return saved value from localStorage (number)
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mInitial Load - With Saved Value[2m > [22mshould return saved value from localStorage (object)
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mSetting New Values[2m > [22mshould update state and localStorage when setting new value (string)
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mSetting New Values[2m > [22mshould update state and localStorage when setting new value (boolean)
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mSetting New Values[2m > [22mshould update state and localStorage when setting new value (number)
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mSetting New Values[2m > [22mshould update state and localStorage when setting new value (object)
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mSetting New Values[2m > [22mshould support functional updates like useState
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mError Handling[2m > [22mshould return default value if localStorage.getItem throws error
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mError Handling[2m > [22mshould return default value if stored value is invalid JSON
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mError Handling[2m > [22mshould handle localStorage.setItem errors gracefully
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mMultiple Hook Instances[2m > [22mshould synchronize state across multiple hook instances with same key
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mMultiple Hook Instances[2m > [22mshould handle different keys independently
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mEdge Cases[2m > [22mshould handle null as default value
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mEdge Cases[2m > [22mshould handle undefined as stored value (treats as no value)
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mEdge Cases[2m > [22mshould handle empty string as valid value
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mEdge Cases[2m > [22mshould handle array values
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mSecurity - Prototype Pollution Protection[2m > [22mshould prevent prototype pollution via __proto__ injection
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mSecurity - Prototype Pollution Protection[2m > [22mshould prevent constructor injection attacks
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mSecurity - Prototype Pollution Protection[2m > [22mshould sanitize dangerous properties when writing values
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mSecurity - Prototype Pollution Protection[2m > [22mshould sanitize nested objects and arrays
 [32m✓[39m src/hooks/useLocalStorage.test.ts[2m > [22museLocalStorage[2m > [22mSecurity - Prototype Pollution Protection[2m > [22mshould handle large payloads without DoS
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mTab Navigation[2m > [22mshould activate Notes tab
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mEdit Mode Interactions[2m > [22mshould trim whitespace before calling onUpdate[33m 754[2mms[22m[39m
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mEdit Mode Interactions[2m > [22mshould NOT call onUpdate if content is unchanged
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mTab Navigation[2m > [22mshould activate Legal Issues tab
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mOverview Tab[2m > [22mshould display evidence count
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mOverview Tab[2m > [22mshould display case description
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mOverview Tab[2m > [22mshould show "No description available" when description is null
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mOverview Tab[2m > [22mshould display created and updated dates
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mOverview Tab[2m > [22mshould display summary cards
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mRendering States[2m > [22mshould render loading state
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mRendering States[2m > [22mshould render error state
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mRendering States[2m > [22mshould render empty state when no facts exist
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mRendering States[2m > [22mshould render facts list when data is loaded
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mRendering States[2m > [22mshould display correct count in header[33m 353[2mms[22m[39m
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mRendering States[2m > [22mshould render Add User Fact button[33m 413[2mms[22m[39m
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mType Filtering[2m > [22mshould display all filter buttons with counts[33m 635[2mms[22m[39m
[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mError Catching[2m > [22m[2mshould catch errors from child components
[22m[39m[2025-10-19T12:43:44.868Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mError Catching[2m > [22m[2mshould display error message in error UI
[22m[39m[2025-10-19T12:43:44.908Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mError Catching[2m > [22m[2mshould show error details heading
[22m[39m[2025-10-19T12:43:44.945Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mError Catching[2m > [22m[2mshould log error to console
[22m[39m[2025-10-19T12:43:44.985Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mError Catching[2m > [22m[2mshould log component stack to console
[22m[39m[2025-10-19T12:43:45.017Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mError Fallback UI[2m > [22m[2mshould display error icon
[22m[39m[2025-10-19T12:43:45.036Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mError Fallback UI[2m > [22m[2mshould display heading
[22m[39m[2025-10-19T12:43:45.062Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mError Fallback UI[2m > [22m[2mshould display reload button
[22m[39m[2025-10-19T12:43:45.377Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mError Fallback UI[2m > [22m[2mshould display try to continue button
[22m[39m[2025-10-19T12:43:45.495Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mError Fallback UI[2m > [22m[2mshould display help text with log file path
[22m[39m[2025-10-19T12:43:45.602Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mDevelopment-Only Features[2m > [22m[2mshould show component stack in development mode
[22m[39m[2025-10-19T12:43:45.619Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mDevelopment-Only Features[2m > [22m[2mshould show error stack in development mode
[22m[39m[2025-10-19T12:43:45.635Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mDevelopment-Only Features[2m > [22m[2mshould NOT show component stack in production mode
[22m[39m[2025-10-19T12:43:45.648Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mDevelopment-Only Features[2m > [22m[2mshould NOT show error stack in production mode
[22m[39m[2025-10-19T12:43:45.659Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mRecovery Actions[2m > [22m[2mshould reload page when reload button is clicked
[22m[39m[2025-10-19T12:43:45.674Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mNormal Rendering[2m > [22mshould render children when no error occurs
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mNormal Rendering[2m > [22mshould not show error UI when children render successfully
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mError Catching[2m > [22mshould catch errors from child components
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mError Catching[2m > [22mshould display error message in error UI
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mError Catching[2m > [22mshould show error details heading
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mError Catching[2m > [22mshould log error to console
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mError Catching[2m > [22mshould log component stack to console
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mError Fallback UI[2m > [22mshould display error icon
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mError Fallback UI[2m > [22mshould display heading[33m 312[2mms[22m[39m
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mError Fallback UI[2m > [22mshould display reload button
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mError Fallback UI[2m > [22mshould display try to continue button
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mError Fallback UI[2m > [22mshould display help text with log file path
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mDevelopment-Only Features[2m > [22mshould show component stack in development mode
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mDevelopment-Only Features[2m > [22mshould show error stack in development mode
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mDevelopment-Only Features[2m > [22mshould NOT show component stack in production mode
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mDevelopment-Only Features[2m > [22mshould NOT show error stack in production mode
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mEvidence Tab[2m > [22mshould display evidence list
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mType Filtering[2m > [22mshould filter facts by personal type when clicked
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mRecovery Actions[2m > [22mshould reload page when reload button is clicked
[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mRecovery Actions[2m > [22m[2mshould reset error state when continue button is clicked
[22m[39m[2025-10-19T12:43:45.883Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mEvidence Tab[2m > [22mshould display evidence type and date
[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mRecovery Actions[2m > [22m[2mshould reset error state when continue button is clicked
[22m[39m[2025-10-19T12:43:45.995Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mEdit Mode Interactions[2m > [22mshould revert changes when Escape key is pressed[33m 439[2mms[22m[39m
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mEvidence Tab[2m > [22mshould show empty state when no evidence
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mType Filtering[2m > [22mshould filter facts by employment type
 [32m✓[39m src/repositories/EvidenceRepository.test.ts[2m > [22mEvidenceRepository with Encryption[2m > [22mEncryption on Write Operations[2m > [22mshould store encrypted evidence content in database
 [32m✓[39m src/repositories/EvidenceRepository.test.ts[2m > [22mEvidenceRepository with Encryption[2m > [22mEncryption on Write Operations[2m > [22mshould store file path without encryption
 [32m✓[39m src/repositories/EvidenceRepository.test.ts[2m > [22mEvidenceRepository with Encryption[2m > [22mEncryption on Write Operations[2m > [22mshould update and encrypt evidence content
 [32m✓[39m src/repositories/EvidenceRepository.test.ts[2m > [22mEvidenceRepository with Encryption[2m > [22mEncryption on Write Operations[2m > [22mshould handle null content without encryption
 [32m✓[39m src/repositories/EvidenceRepository.test.ts[2m > [22mEvidenceRepository with Encryption[2m > [22mDecryption on Read Operations[2m > [22mshould decrypt evidence content on retrieval
 [32m✓[39m src/repositories/EvidenceRepository.test.ts[2m > [22mEvidenceRepository with Encryption[2m > [22mDecryption on Read Operations[2m > [22mshould decrypt all evidence content in findByCaseId
 [32m✓[39m src/repositories/EvidenceRepository.test.ts[2m > [22mEvidenceRepository with Encryption[2m > [22mDecryption on Read Operations[2m > [22mshould decrypt all evidence content in findAll
 [32m✓[39m src/repositories/EvidenceRepository.test.ts[2m > [22mEvidenceRepository with Encryption[2m > [22mDecryption on Read Operations[2m > [22mshould filter by evidence type and decrypt
 [32m✓[39m src/repositories/EvidenceRepository.test.ts[2m > [22mEvidenceRepository with Encryption[2m > [22mBackward Compatibility[2m > [22mshould handle legacy plaintext content
 [32m✓[39m src/repositories/EvidenceRepository.test.ts[2m > [22mEvidenceRepository with Encryption[2m > [22mEncryption Security Properties[2m > [22mshould use unique IVs for same content encrypted multiple times
 [32m✓[39m src/repositories/EvidenceRepository.test.ts[2m > [22mEvidenceRepository with Encryption[2m > [22mEncryption Security Properties[2m > [22mshould fail decryption with wrong key
 [32m✓[39m src/repositories/EvidenceRepository.test.ts[2m > [22mEvidenceRepository with Encryption[2m > [22mRound-Trip Testing[2m > [22mshould successfully encrypt and decrypt unicode characters
 [32m✓[39m src/repositories/EvidenceRepository.test.ts[2m > [22mEvidenceRepository with Encryption[2m > [22mRound-Trip Testing[2m > [22mshould handle large evidence content (100KB+)
 [32m✓[39m src/repositories/EvidenceRepository.test.ts[2m > [22mEvidenceRepository with Encryption[2m > [22mRound-Trip Testing[2m > [22mshould handle special characters in evidence
 [32m✓[39m src/repositories/EvidenceRepository.test.ts[2m > [22mEvidenceRepository with Encryption[2m > [22mStatistics and Counting[2m > [22mshould count evidence by case correctly
 [32m✓[39m src/repositories/EvidenceRepository.test.ts[2m > [22mEvidenceRepository with Encryption[2m > [22mStatistics and Counting[2m > [22mshould count evidence by type correctly
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mDelete Functionality[2m > [22mshould call onDelete when delete button is clicked and confirmed
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mComponent Integration[2m > [22mshould render TimelineView component in timeline tab
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mDelete Functionality[2m > [22mshould NOT call onDelete when delete is cancelled
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx[2m > [22mCaseDetailView[2m > [22mComponent Integration[2m > [22mshould render fact panels in facts tab
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mDelete Functionality[2m > [22mshould stop propagation when delete button is clicked
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mAccessibility[2m > [22mshould have appropriate cursor style when not readOnly
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mAccessibility[2m > [22mshould have default cursor when readOnly
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mType Filtering[2m > [22mshould show all facts when "All" filter is selected[33m 331[2mms[22m[39m
[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mError Message Handling[2m > [22m[2mshould display custom error message
[22m[39m[2025-10-19T12:43:46.011Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mError Message Handling[2m > [22m[2mshould display default message if error has no message
[22m[39m[2025-10-19T12:43:46.025Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mStyling and UI[2m > [22m[2mshould have red background for error container
[22m[39m[2025-10-19T12:43:46.037Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mStyling and UI[2m > [22m[2mshould have white card background for error content
[22m[39m[2025-10-19T12:43:46.051Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mStyling and UI[2m > [22m[2mshould have proper button styling for reload button
[22m[39m[2025-10-19T12:43:46.066Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mStyling and UI[2m > [22m[2mshould have proper button styling for continue button
[22m[39m[2025-10-19T12:43:46.148Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mAccessibility[2m > [22m[2mshould have proper heading hierarchy
[22m[39m[2025-10-19T12:43:46.222Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mAccessibility[2m > [22m[2mshould have focusable buttons
[22m[39m[2025-10-19T12:43:46.313Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mAccessibility[2m > [22m[2mshould have focus styles on buttons
[22m[39m[2025-10-19T12:43:46.402Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle errors with stack traces
[22m[39m[2025-10-19T12:43:46.463Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle null error gracefully
[22m[39m[2025-10-19T12:43:46.474Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

[90mstderr[2m | src/components/ErrorBoundary.test.tsx[2m > [22m[2mErrorBoundary[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle re-rendering after error is caught
[22m[39m[2025-10-19T12:43:46.483Z][WARN][ErrorBoundary] justiceAPI.logUIError not available

 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mRecovery Actions[2m > [22mshould reset error state when continue button is clicked
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mError Message Handling[2m > [22mshould display custom error message
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mError Message Handling[2m > [22mshould display default message if error has no message
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mStyling and UI[2m > [22mshould have red background for error container
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mStyling and UI[2m > [22mshould have white card background for error content
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mStyling and UI[2m > [22mshould have proper button styling for reload button
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mStyling and UI[2m > [22mshould have proper button styling for continue button
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mAccessibility[2m > [22mshould have proper heading hierarchy
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mAccessibility[2m > [22mshould have focusable buttons
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mAccessibility[2m > [22mshould have focus styles on buttons
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mEdge Cases[2m > [22mshould handle errors with stack traces
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mEdge Cases[2m > [22mshould handle null error gracefully
 [32m✓[39m src/components/ErrorBoundary.test.tsx[2m > [22mErrorBoundary[2m > [22mEdge Cases[2m > [22mshould handle re-rendering after error is caught
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mAccessibility[2m > [22mshould have placeholder in textarea when editing empty note
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mAccessibility[2m > [22mshould preserve whitespace in content display
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mEdge Cases[2m > [22mshould handle very long content
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mType Filtering[2m > [22mshould update count in header when filtering
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mType Filtering[2m > [22mshould show empty state when filtered category has no facts
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mCreate User Fact Workflow[2m > [22mshould show fact creator when Add button is clicked
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mCreate User Fact Workflow[2m > [22mshould default to "personal" type when creating new fact
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mCreate User Fact Workflow[2m > [22mshould allow changing fact type before creating
[90mstdout[2m | src/features/settings/components/DataPrivacySettings.test.tsx
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mEdge Cases[2m > [22mshould handle special characters in content[33m 1086[2mms[22m[39m
 [32m✓[39m src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22mDataPrivacySettings[2m > [22mInitial Load[2m > [22mshould load default privacy settings when localStorage is empty
 [32m✓[39m src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22mDataPrivacySettings[2m > [22mInitial Load[2m > [22mshould load saved privacy settings from localStorage
 [32m✓[39m src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22mDataPrivacySettings[2m > [22mInitial Load[2m > [22mshould display all privacy sections
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mCreate User Fact Workflow[2m > [22mshould render new fact creator UI elements
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mRendering - Welcome Section[2m > [22mshould render welcome heading and description
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mRendering - Welcome Section[2m > [22mshould render legal disclaimer heading (collapsed by default)
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mEdge Cases[2m > [22mshould handle rapid click events without breaking[33m 379[2mms[22m[39m
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mEdge Cases[2m > [22mshould update content when prop changes
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mUpdate User Fact[2m > [22mshould call updateUserFact when fact is updated
 [32m✓[39m src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22mDataPrivacySettings[2m > [22mEncryption Toggle[2m > [22mshould toggle encryption setting on and off[33m 502[2mms[22m[39m
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mDelete User Fact[2m > [22mshould call deleteUserFact when delete button is clicked[33m 300[2mms[22m[39m
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mColor Assignment[2m > [22mshould assign correct colors to different fact types
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mEdge Cases[2m > [22mshould handle very long fact content
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mEdge Cases[2m > [22mshould handle special characters in fact content
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mEdge Cases[2m > [22mshould handle caseId prop changes
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mAccessibility[2m > [22mshould have proper heading hierarchy
[90mstderr[2m | src/features/dashboard/components/DashboardView.test.tsx[2m > [22m[2mDashboardView[2m > [22m[2mRendering - Welcome Section[2m > [22m[2mshould expand and collapse legal disclaimer when clicked
[22m[39mNot implemented: Window's scrollTo() method

 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx[2m > [22mUserFactsPanel[2m > [22mAccessibility[2m > [22mshould have accessible label for type select
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mEdge Cases[2m > [22mshould handle empty onUpdate gracefully[33m 350[2mms[22m[39m
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mHover Effects[2m > [22mshould apply hover styles on mouse enter
 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mHover Effects[2m > [22mshould restore styles on mouse leave
[90mstdout[2m | src/repositories/Phase3Repositories.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/components/PostItNote.test.tsx[2m > [22mPostItNote[2m > [22mHover Effects[2m > [22mshould NOT apply hover effects when in edit mode
 [32m✓[39m src/repositories/Phase3Repositories.test.ts[2m > [22mUserProfileRepository[2m > [22mshould encrypt name and email when updating profile
 [32m✓[39m src/repositories/Phase3Repositories.test.ts[2m > [22mUserProfileRepository[2m > [22mshould decrypt name and email when retrieving profile
 [32m✓[39m src/repositories/Phase3Repositories.test.ts[2m > [22mUserProfileRepository[2m > [22mshould audit PII access
 [32m✓[39m src/repositories/Phase3Repositories.test.ts[2m > [22mUserProfileRepository[2m > [22mshould not log PII in audit details
 [32m✓[39m src/repositories/Phase3Repositories.test.ts[2m > [22mLegalIssuesRepository[2m > [22mshould encrypt description field
 [32m✓[39m src/repositories/Phase3Repositories.test.ts[2m > [22mLegalIssuesRepository[2m > [22mshould decrypt description when retrieving
 [32m✓[39m src/repositories/Phase3Repositories.test.ts[2m > [22mLegalIssuesRepository[2m > [22mshould find all issues for a case with decryption
 [32m✓[39m src/repositories/Phase3Repositories.test.ts[2m > [22mLegalIssuesRepository[2m > [22mshould update encrypted description
 [32m✓[39m src/repositories/Phase3Repositories.test.ts[2m > [22mLegalIssuesRepository[2m > [22mshould audit legal issue operations
 [32m✓[39m src/repositories/Phase3Repositories.test.ts[2m > [22mTimelineRepository[2m > [22mshould encrypt description field
 [32m✓[39m src/repositories/Phase3Repositories.test.ts[2m > [22mTimelineRepository[2m > [22mshould decrypt description when retrieving
 [32m✓[39m src/repositories/Phase3Repositories.test.ts[2m > [22mTimelineRepository[2m > [22mshould find all events for a case sorted by date
 [32m✓[39m src/repositories/Phase3Repositories.test.ts[2m > [22mTimelineRepository[2m > [22mshould update encrypted description
 [32m✓[39m src/repositories/Phase3Repositories.test.ts[2m > [22mTimelineRepository[2m > [22mshould audit timeline event operations
 [32m✓[39m src/repositories/Phase3Repositories.test.ts[2m > [22mPhase 3 GDPR Compliance[2m > [22mshould never log plaintext PII across all repositories
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mRendering - Welcome Section[2m > [22mshould expand and collapse legal disclaimer when clicked[33m 740[2mms[22m[39m
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mEmpty State[2m > [22mshould render DashboardEmptyState when no cases and not loading
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mEmpty State[2m > [22mshould not render main dashboard content in empty state
[90mstdout[2m | src/features/settings/components/SettingsView.test.tsx
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mEmpty State[2m > [22mshould navigate from empty state create case button
 [32m✓[39m src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22mDataPrivacySettings[2m > [22mEncryption Toggle[2m > [22mshould persist encryption setting to localStorage[33m 310[2mms[22m[39m
 [32m✓[39m src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22mDataPrivacySettings[2m > [22mExport & Backup Settings[2m > [22mshould change export location[33m 363[2mms[22m[39m
 [32m✓[39m src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22mDataPrivacySettings[2m > [22mExport & Backup Settings[2m > [22mshould change auto-backup frequency
 [32m✓[39m src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22mDataPrivacySettings[2m > [22mExport & Backup Settings[2m > [22mshould persist backup frequency to localStorage
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mEmpty State[2m > [22mshould navigate from empty state start chat button
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mLoading State[2m > [22mshould render skeleton cards when loading
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mLoading State[2m > [22mshould not render stat cards when loading
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mLoading State[2m > [22mshould still render welcome section when loading
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mError State[2m > [22mshould display error message when error exists
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mError State[2m > [22mshould still render dashboard content when error exists
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mStats Calculation[2m > [22mshould show zero stats when no cases
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mStats Calculation[2m > [22mshould calculate total cases correctly
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mStats Calculation[2m > [22mshould calculate active cases correctly
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mStats Calculation[2m > [22mshould render all 3 stat cards when cases exist
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mQuick Actions[2m > [22mshould render quick actions section
 [32m✓[39m src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22mDataPrivacySettings[2m > [22mClear All Data[2m > [22mshould show confirmation dialog when Clear All Data is clicked
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mQuick Actions[2m > [22mshould navigate to chat when clicking Start New Chat
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mQuick Actions[2m > [22mshould navigate to cases when clicking Create Case
[90mstderr[2m | src/features/cases/components/CasesView.test.tsx[2m > [22m[2mCasesView[2m > [22m[2mCase Selection[2m > [22m[2mshould render case selector dropdown
[22m[39mWarning: Encountered two children with the same key, `branch-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)
Warning: Encountered two children with the same key, `node-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)

[90mstderr[2m | src/features/cases/components/CasesView.test.tsx[2m > [22m[2mCasesView[2m > [22m[2mCase Selection[2m > [22m[2mshould list all cases in dropdown
[22m[39mWarning: Encountered two children with the same key, `branch-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)
Warning: Encountered two children with the same key, `node-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)

[90mstderr[2m | src/features/cases/components/CasesView.test.tsx[2m > [22m[2mCasesView[2m > [22m[2mCase Selection[2m > [22m[2mshould default to first case when no selection
[22m[39mWarning: Encountered two children with the same key, `branch-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)
Warning: Encountered two children with the same key, `node-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)

[90mstderr[2m | src/features/cases/components/CasesView.test.tsx[2m > [22m[2mCasesView[2m > [22m[2mCase Selection[2m > [22m[2mshould change selected case when dropdown changes
[22m[39mWarning: Encountered two children with the same key, `branch-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)
Warning: Encountered two children with the same key, `node-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)

 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mLoading State[2m > [22mshould show skeleton when cases are loading[33m 389[2mms[22m[39m
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mLoading State[2m > [22mshould show skeleton when evidence is loading
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mError State[2m > [22mshould display error message when cases fail to load
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mError State[2m > [22mshould display error message when evidence fails to load
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mError State[2m > [22mshould show retry button in error state
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mEmpty State[2m > [22mshould show empty state when no cases exist
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mCase Selection[2m > [22mshould render case selector dropdown
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mCase Selection[2m > [22mshould list all cases in dropdown
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mCase Selection[2m > [22mshould default to first case when no selection
 [32m✓[39m src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22mDataPrivacySettings[2m > [22mClear All Data[2m > [22mshould close confirmation dialog when Cancel is clicked[33m 395[2mms[22m[39m
[90mstderr[2m | src/features/cases/components/CasesView.test.tsx[2m > [22m[2mCasesView[2m > [22m[2mTimeline Rendering[2m > [22m[2mshould render timeline events for active case
[22m[39mWarning: Encountered two children with the same key, `branch-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)
Warning: Encountered two children with the same key, `node-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)

[90mstderr[2m | src/features/cases/components/CasesView.test.tsx[2m > [22m[2mCasesView[2m > [22m[2mTimeline Rendering[2m > [22m[2mshould show case closed event for closed cases
[22m[39mWarning: Encountered two children with the same key, `branch-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)
Warning: Encountered two children with the same key, `node-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)

 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mCase Selection[2m > [22mshould change selected case when dropdown changes
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mTimeline Rendering[2m > [22mshould render timeline events for active case
 [32m✓[39m src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22mDataPrivacySettings[2m > [22mClear All Data[2m > [22mshould clear all data when confirmed[33m 441[2mms[22m[39m
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mQuick Actions[2m > [22mshould navigate to documents when clicking Upload Document
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mQuick Actions[2m > [22mshould render action descriptions
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mRecent Activity[2m > [22mshould render recent activity section with empty state[33m 364[2mms[22m[39m
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mAccessibility[2m > [22mshould have accessible loading state
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx[2m > [22mDashboardView[2m > [22mAccessibility[2m > [22mshould have accessible quick action buttons
[90mstderr[2m | src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22m[2mDataPrivacySettings[2m > [22m[2mClear All Data[2m > [22m[2mshould handle clear data errors gracefully
[22m[39m[2025-10-19T12:43:50.911Z][ERROR][App] Failed to clear data: {
  "error": {}
}

[90mstderr[2m | src/features/cases/components/CasesView.test.tsx[2m > [22m[2mCasesView[2m > [22m[2mTimeline Rendering[2m > [22m[2mshould display timeline dates
[22m[39mWarning: Encountered two children with the same key, `branch-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)
Warning: Encountered two children with the same key, `node-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)

[90mstderr[2m | src/features/cases/components/CasesView.test.tsx[2m > [22m[2mCasesView[2m > [22m[2mTree Structure[2m > [22m[2mshould render tree visualization (SVG)
[22m[39mWarning: Encountered two children with the same key, `branch-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)
Warning: Encountered two children with the same key, `node-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)

[90mstderr[2m | src/features/cases/components/CasesView.test.tsx[2m > [22m[2mCasesView[2m > [22m[2mTree Structure[2m > [22m[2mshould display case title in tree
[22m[39mWarning: Encountered two children with the same key, `branch-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)
Warning: Encountered two children with the same key, `node-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)
Warning: Encountered two children with the same key, `branch-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)
Warning: Encountered two children with the same key, `node-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)

[90mstderr[2m | src/features/cases/components/CasesView.test.tsx[2m > [22m[2mCasesView[2m > [22m[2mEvidence Grouping[2m > [22m[2mshould group evidence by type
[22m[39mWarning: Encountered two children with the same key, `branch-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)
Warning: Encountered two children with the same key, `node-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)

[90mstderr[2m | src/features/cases/components/CasesView.test.tsx[2m > [22m[2mCasesView[2m > [22m[2mEvidence Grouping[2m > [22m[2mshould show individual evidence items
[22m[39mWarning: Encountered two children with the same key, `branch-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)
Warning: Encountered two children with the same key, `node-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)

[90mstderr[2m | src/features/cases/components/CasesView.test.tsx[2m > [22m[2mCasesView[2m > [22m[2mEvidence Grouping[2m > [22m[2mshould show correct evidence count for each case
[22m[39mWarning: Encountered two children with the same key, `branch-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)
Warning: Encountered two children with the same key, `node-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)

[90mstderr[2m | src/features/cases/components/CasesView.test.tsx[2m > [22m[2mCasesView[2m > [22m[2mAccessibility[2m > [22m[2mshould have keyboard-accessible case selector
[22m[39mWarning: Encountered two children with the same key, `branch-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)
Warning: Encountered two children with the same key, `node-evidence-1`. Keys should be unique so that components maintain their identity across updates. Non-unique keys may cause children to be duplicated and/or omitted — the behavior is unsupported and could change in a future version.
    at svg
    at div
    at div
    at CasesView (F:\Justice Companion take 2\src\features\cases\components\CasesView.tsx:167:22)

 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mTimeline Rendering[2m > [22mshould show case closed event for closed cases
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mTimeline Rendering[2m > [22mshould display timeline dates
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mTree Structure[2m > [22mshould render tree visualization (SVG)
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mTree Structure[2m > [22mshould display case title in tree
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mEvidence Grouping[2m > [22mshould group evidence by type
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mEvidence Grouping[2m > [22mshould show individual evidence items
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mEvidence Grouping[2m > [22mshould show correct evidence count for each case
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mEvidence Grouping[2m > [22mshould show placeholder when no evidence exists
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mAccessibility[2m > [22mshould have accessible loading state
 [32m✓[39m src/features/cases/components/CasesView.test.tsx[2m > [22mCasesView[2m > [22mAccessibility[2m > [22mshould have keyboard-accessible case selector
[90mstdout[2m | src/utils/migrate-to-secure-storage.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/utils/migrate-to-secure-storage.test.ts[2m > [22m[2mmigrate-to-secure-storage[2m > [22m[2mmigrateToSecureStorage[2m > [22m[2mshould handle errors gracefully
[22m[39m[2025-10-19T12:43:51.159Z][ERROR][MigrateToSecureStorage] Failed to migrate key "openai_api_key" {
  "error": "Storage error"
}
[2025-10-19T12:43:51.159Z][ERROR][MigrateToSecureStorage] Migration completed with errors: 1 key(s) failed

[90mstderr[2m | src/utils/migrate-to-secure-storage.test.ts[2m > [22m[2mmigrate-to-secure-storage[2m > [22m[2mmigrateToSecureStorage[2m > [22m[2mshould warn when encryption is not available
[22m[39m[2025-10-19T12:43:51.160Z][ERROR][MigrateToSecureStorage] Failed to migrate key "openai_api_key" {
  "error": "Value verification failed after migration"
}
[2025-10-19T12:43:51.160Z][ERROR][MigrateToSecureStorage] Migration completed with errors: 1 key(s) failed

 [32m✓[39m src/utils/migrate-to-secure-storage.test.ts[2m > [22mmigrate-to-secure-storage[2m > [22mmigrateToSecureStorage[2m > [22mshould migrate API keys from localStorage to secure storage
 [32m✓[39m src/utils/migrate-to-secure-storage.test.ts[2m > [22mmigrate-to-secure-storage[2m > [22mmigrateToSecureStorage[2m > [22mshould not migrate keys that already exist in secure storage
 [32m✓[39m src/utils/migrate-to-secure-storage.test.ts[2m > [22mmigrate-to-secure-storage[2m > [22mmigrateToSecureStorage[2m > [22mshould handle missing keys gracefully
 [32m✓[39m src/utils/migrate-to-secure-storage.test.ts[2m > [22mmigrate-to-secure-storage[2m > [22mmigrateToSecureStorage[2m > [22mshould handle errors gracefully
 [32m✓[39m src/utils/migrate-to-secure-storage.test.ts[2m > [22mmigrate-to-secure-storage[2m > [22mmigrateToSecureStorage[2m > [22mshould warn when encryption is not available
 [32m✓[39m src/utils/migrate-to-secure-storage.test.ts[2m > [22mmigrate-to-secure-storage[2m > [22mmigrateToSecureStorage[2m > [22mshould be idempotent (safe to run multiple times)
 [32m✓[39m src/utils/migrate-to-secure-storage.test.ts[2m > [22mmigrate-to-secure-storage[2m > [22misMigrationNeeded[2m > [22mshould return true when keys exist in localStorage but not in secure storage
 [32m✓[39m src/utils/migrate-to-secure-storage.test.ts[2m > [22mmigrate-to-secure-storage[2m > [22misMigrationNeeded[2m > [22mshould return false when keys already exist in secure storage
 [32m✓[39m src/utils/migrate-to-secure-storage.test.ts[2m > [22mmigrate-to-secure-storage[2m > [22misMigrationNeeded[2m > [22mshould return false when no keys exist
 [32m✓[39m src/utils/migrate-to-secure-storage.test.ts[2m > [22mmigrate-to-secure-storage[2m > [22mcleanupLocalStorage[2m > [22mshould remove all migration keys from localStorage
 [32m✓[39m src/utils/migrate-to-secure-storage.test.ts[2m > [22mmigrate-to-secure-storage[2m > [22mcleanupLocalStorage[2m > [22mshould handle errors gracefully
 [32m✓[39m src/utils/migrate-to-secure-storage.test.ts[2m > [22mmigrate-to-secure-storage[2m > [22mnon-browser environment[2m > [22mshould handle non-browser environment gracefully
 [32m✓[39m src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22mDataPrivacySettings[2m > [22mClear All Data[2m > [22mshould handle clear data errors gracefully[33m 435[2mms[22m[39m
 [32m✓[39m src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22mDataPrivacySettings[2m > [22mGDPR Data Export[2m > [22mshould show Export Data button
[90mstderr[2m | src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22m[2mDataPrivacySettings[2m > [22m[2mGDPR Data Export[2m > [22m[2mshould export user data when Export button is clicked
[22m[39mNot implemented: navigation to another Document

[90mstdout[2m | src/features/settings/components/ProfileSettings.test.tsx
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22mDataPrivacySettings[2m > [22mGDPR Data Export[2m > [22mshould export user data when Export button is clicked
[90mstderr[2m | src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22m[2mDataPrivacySettings[2m > [22m[2mGDPR Data Export[2m > [22m[2mshould handle export errors gracefully
[22m[39m[2025-10-19T12:43:51.393Z][ERROR][App] Failed to export data: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22mDataPrivacySettings[2m > [22mGDPR Data Export[2m > [22mshould handle export errors gracefully
 [32m✓[39m src/features/settings/components/DataPrivacySettings.test.tsx[2m > [22mDataPrivacySettings[2m > [22mGDPR Compliance[2m > [22mshould display GDPR information notice
[90mstderr[2m | src/features/settings/components/ProfileSettings.test.tsx[2m > [22m[2mProfileSettings[2m > [22m[2mProfile Loading[2m > [22m[2mshould display loading state initially
[22m[39mWarning: An update to ProfileSettings inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ProfileSettings (F:\Justice Companion take 2\src\features\settings\components\ProfileSettings.tsx:95:28)
Warning: An update to ProfileSettings inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ProfileSettings (F:\Justice Companion take 2\src\features\settings\components\ProfileSettings.tsx:95:28)
Warning: An update to ProfileSettings inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ProfileSettings (F:\Justice Companion take 2\src\features\settings\components\ProfileSettings.tsx:95:28)
Warning: An update to ProfileSettings inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ProfileSettings (F:\Justice Companion take 2\src\features\settings\components\ProfileSettings.tsx:95:28)

 [32m✓[39m src/features/settings/components/ProfileSettings.test.tsx[2m > [22mProfileSettings[2m > [22mProfile Loading[2m > [22mshould display loading state initially
 [32m✓[39m src/features/settings/components/ProfileSettings.test.tsx[2m > [22mProfileSettings[2m > [22mProfile Loading[2m > [22mshould load and display user profile
[90mstderr[2m | src/features/settings/components/ProfileSettings.test.tsx[2m > [22m[2mProfileSettings[2m > [22m[2mProfile Loading[2m > [22m[2mshould handle profile loading error gracefully
[22m[39m[2025-10-19T12:43:51.683Z][ERROR][App] Failed to load user profile: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/ProfileSettings.test.tsx[2m > [22mProfileSettings[2m > [22mProfile Loading[2m > [22mshould handle profile loading error gracefully
 [32m✓[39m src/features/settings/components/AppearanceSettings.test.tsx[2m > [22mAppearanceSettings[2m > [22mInitial Load[2m > [22mshould load default appearance settings when localStorage is empty
 [32m✓[39m src/features/settings/components/AppearanceSettings.test.tsx[2m > [22mAppearanceSettings[2m > [22mInitial Load[2m > [22mshould load saved appearance settings from localStorage
 [32m✓[39m src/features/settings/components/ProfileSettings.test.tsx[2m > [22mProfileSettings[2m > [22mProfile Editing[2m > [22mshould enable edit mode when edit button clicked[33m 748[2mms[22m[39m
 [32m✓[39m src/features/settings/components/AppearanceSettings.test.tsx[2m > [22mAppearanceSettings[2m > [22mAppearance Settings[2m > [22mshould toggle dark mode on and off[33m 507[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mTab Structure[2m > [22m[2mshould render main heading and description
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
Warning: An update to ProfileSettings inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ProfileSettings (F:\Justice Companion take 2\src\features\settings\components\ProfileSettings.tsx:95:28)
    at div
    at div
    at AccountTab
    at div
    at div
    at div
    at Tabs (F:\Justice Companion take 2\src\components\ui\Tabs.tsx:5:17)
    at div
    at div
    at SettingsView (F:\Justice Companion take 2\src\features\settings\components\SettingsView.tsx:25:61)
    at AuthProvider (F:\Justice Companion take 2\src\contexts\AuthContext.tsx:8:25)
    at Router (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:6066:13)
    at BrowserRouter (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:9209:3)
Warning: An update to ProfileSettings inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ProfileSettings (F:\Justice Companion take 2\src\features\settings\components\ProfileSettings.tsx:95:28)
    at div
    at div
    at AccountTab
    at div
    at div
    at div
    at Tabs (F:\Justice Companion take 2\src\components\ui\Tabs.tsx:5:17)
    at div
    at div
    at SettingsView (F:\Justice Companion take 2\src\features\settings\components\SettingsView.tsx:25:61)
    at AuthProvider (F:\Justice Companion take 2\src\contexts\AuthContext.tsx:8:25)
    at Router (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:6066:13)
    at BrowserRouter (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:9209:3)
Warning: An update to ProfileSettings inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ProfileSettings (F:\Justice Companion take 2\src\features\settings\components\ProfileSettings.tsx:95:28)
    at div
    at div
    at AccountTab
    at div
    at div
    at div
    at Tabs (F:\Justice Companion take 2\src\components\ui\Tabs.tsx:5:17)
    at div
    at div
    at SettingsView (F:\Justice Companion take 2\src\features\settings\components\SettingsView.tsx:25:61)
    at AuthProvider (F:\Justice Companion take 2\src\contexts\AuthContext.tsx:8:25)
    at Router (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:6066:13)
    at BrowserRouter (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:9209:3)
Warning: An update to ProfileSettings inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ProfileSettings (F:\Justice Companion take 2\src\features\settings\components\ProfileSettings.tsx:95:28)
    at div
    at div
    at AccountTab
    at div
    at div
    at div
    at Tabs (F:\Justice Companion take 2\src\components\ui\Tabs.tsx:5:17)
    at div
    at div
    at SettingsView (F:\Justice Companion take 2\src\features\settings\components\SettingsView.tsx:25:61)
    at AuthProvider (F:\Justice Companion take 2\src\contexts\AuthContext.tsx:8:25)
    at Router (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:6066:13)
    at BrowserRouter (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:9209:3)
Warning: An update to ConsentSettings inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ConsentSettings (F:\Justice Companion take 2\src\features\settings\components\ConsentSettings.tsx:62:28)
    at div
    at div
    at AccountTab
    at div
    at div
    at div
    at Tabs (F:\Justice Companion take 2\src\components\ui\Tabs.tsx:5:17)
    at div
    at div
    at SettingsView (F:\Justice Companion take 2\src\features\settings\components\SettingsView.tsx:25:61)
    at AuthProvider (F:\Justice Companion take 2\src\contexts\AuthContext.tsx:8:25)
    at Router (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:6066:13)
    at BrowserRouter (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:9209:3)
Warning: An update to ConsentSettings inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ConsentSettings (F:\Justice Companion take 2\src\features\settings\components\ConsentSettings.tsx:62:28)
    at div
    at div
    at AccountTab
    at div
    at div
    at div
    at Tabs (F:\Justice Companion take 2\src\components\ui\Tabs.tsx:5:17)
    at div
    at div
    at SettingsView (F:\Justice Companion take 2\src\features\settings\components\SettingsView.tsx:25:61)
    at AuthProvider (F:\Justice Companion take 2\src\contexts\AuthContext.tsx:8:25)
    at Router (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:6066:13)
    at BrowserRouter (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:9209:3)
[2025-10-19T12:43:50.769Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}
Warning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (F:\Justice Companion take 2\src\contexts\AuthContext.tsx:8:25)
    at Router (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:6066:13)
    at BrowserRouter (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:9209:3)
Warning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (F:\Justice Companion take 2\src\contexts\AuthContext.tsx:8:25)
    at Router (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:6066:13)
    at BrowserRouter (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:9209:3)

[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mTab Structure[2m > [22m[2mshould render all tab buttons
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
Warning: An update to ProfileSettings inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ProfileSettings (F:\Justice Companion take 2\src\features\settings\components\ProfileSettings.tsx:95:28)
    at div
    at div
    at AccountTab
    at div
    at div
    at div
    at Tabs (F:\Justice Companion take 2\src\components\ui\Tabs.tsx:5:17)
    at div
    at div
    at SettingsView (F:\Justice Companion take 2\src\features\settings\components\SettingsView.tsx:25:61)
    at AuthProvider (F:\Justice Companion take 2\src\contexts\AuthContext.tsx:8:25)
    at Router (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:6066:13)
    at BrowserRouter (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:9209:3)
Warning: An update to ProfileSettings inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ProfileSettings (F:\Justice Companion take 2\src\features\settings\components\ProfileSettings.tsx:95:28)
    at div
    at div
    at AccountTab
    at div
    at div
    at div
    at Tabs (F:\Justice Companion take 2\src\components\ui\Tabs.tsx:5:17)
    at div
    at div
    at SettingsView (F:\Justice Companion take 2\src\features\settings\components\SettingsView.tsx:25:61)
    at AuthProvider (F:\Justice Companion take 2\src\contexts\AuthContext.tsx:8:25)
    at Router (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:6066:13)
    at BrowserRouter (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:9209:3)
Warning: An update to ProfileSettings inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ProfileSettings (F:\Justice Companion take 2\src\features\settings\components\ProfileSettings.tsx:95:28)
    at div
    at div
    at AccountTab
    at div
    at div
    at div
    at Tabs (F:\Justice Companion take 2\src\components\ui\Tabs.tsx:5:17)
    at div
    at div
    at SettingsView (F:\Justice Companion take 2\src\features\settings\components\SettingsView.tsx:25:61)
    at AuthProvider (F:\Justice Companion take 2\src\contexts\AuthContext.tsx:8:25)
    at Router (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:6066:13)
    at BrowserRouter (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:9209:3)
Warning: An update to ProfileSettings inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ProfileSettings (F:\Justice Companion take 2\src\features\settings\components\ProfileSettings.tsx:95:28)
    at div
    at div
    at AccountTab
    at div
    at div
    at div
    at Tabs (F:\Justice Companion take 2\src\components\ui\Tabs.tsx:5:17)
    at div
    at div
    at SettingsView (F:\Justice Companion take 2\src\features\settings\components\SettingsView.tsx:25:61)
    at AuthProvider (F:\Justice Companion take 2\src\contexts\AuthContext.tsx:8:25)
    at Router (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:6066:13)
    at BrowserRouter (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:9209:3)
Warning: An update to ConsentSettings inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ConsentSettings (F:\Justice Companion take 2\src\features\settings\components\ConsentSettings.tsx:62:28)
    at div
    at div
    at AccountTab
    at div
    at div
    at div
    at Tabs (F:\Justice Companion take 2\src\components\ui\Tabs.tsx:5:17)
    at div
    at div
    at SettingsView (F:\Justice Companion take 2\src\features\settings\components\SettingsView.tsx:25:61)
    at AuthProvider (F:\Justice Companion take 2\src\contexts\AuthContext.tsx:8:25)
    at Router (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:6066:13)
    at BrowserRouter (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:9209:3)
Warning: An update to ConsentSettings inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at ConsentSettings (F:\Justice Companion take 2\src\features\settings\components\ConsentSettings.tsx:62:28)
    at div
    at div
    at AccountTab
    at div
    at div
    at div
    at Tabs (F:\Justice Companion take 2\src\components\ui\Tabs.tsx:5:17)
    at div
    at div
    at SettingsView (F:\Justice Companion take 2\src\features\settings\components\SettingsView.tsx:25:61)
    at AuthProvider (F:\Justice Companion take 2\src\contexts\AuthContext.tsx:8:25)
    at Router (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:6066:13)
    at BrowserRouter (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:9209:3)
[2025-10-19T12:43:52.597Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}
Warning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (F:\Justice Companion take 2\src\contexts\AuthContext.tsx:8:25)
    at Router (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:6066:13)
    at BrowserRouter (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:9209:3)
Warning: An update to AuthProvider inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at AuthProvider (F:\Justice Companion take 2\src\contexts\AuthContext.tsx:8:25)
    at Router (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:6066:13)
    at BrowserRouter (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:9209:3)

[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mTab Structure[2m > [22m[2mshould display Account tab by default
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:52.706Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/AppearanceSettings.test.tsx[2m > [22mAppearanceSettings[2m > [22mAppearance Settings[2m > [22mshould change font size[33m 333[2mms[22m[39m
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mRendering[2m > [22mshould render textarea with correct placeholder
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mRendering[2m > [22mshould render textarea with custom placeholder
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mRendering[2m > [22mshould render send button[33m 312[2mms[22m[39m
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mRendering[2m > [22mshould have send button disabled when textarea is empty
 [32m✓[39m src/features/settings/components/AppearanceSettings.test.tsx[2m > [22mAppearanceSettings[2m > [22mAppearance Settings[2m > [22mshould persist dark mode to localStorage[33m 312[2mms[22m[39m
 [32m✓[39m src/repositories/CaseRepository.test.ts[2m > [22mCaseRepository with Encryption[2m > [22mEncryption on Write Operations[2m > [22mshould store encrypted case description in database
 [32m✓[39m src/repositories/CaseRepository.test.ts[2m > [22mCaseRepository with Encryption[2m > [22mEncryption on Write Operations[2m > [22mshould store null for empty description
 [32m✓[39m src/repositories/CaseRepository.test.ts[2m > [22mCaseRepository with Encryption[2m > [22mEncryption on Write Operations[2m > [22mshould update and encrypt case description
 [32m✓[39m src/repositories/CaseRepository.test.ts[2m > [22mCaseRepository with Encryption[2m > [22mDecryption on Read Operations[2m > [22mshould decrypt case description on retrieval
 [32m✓[39m src/repositories/CaseRepository.test.ts[2m > [22mCaseRepository with Encryption[2m > [22mDecryption on Read Operations[2m > [22mshould decrypt all case descriptions in findAll
 [32m✓[39m src/repositories/CaseRepository.test.ts[2m > [22mCaseRepository with Encryption[2m > [22mDecryption on Read Operations[2m > [22mshould handle null descriptions correctly
 [32m✓[39m src/repositories/CaseRepository.test.ts[2m > [22mCaseRepository with Encryption[2m > [22mBackward Compatibility[2m > [22mshould handle legacy plaintext descriptions
 [32m✓[39m src/repositories/CaseRepository.test.ts[2m > [22mCaseRepository with Encryption[2m > [22mBackward Compatibility[2m > [22mshould throw when encryption service is not configured
 [32m✓[39m src/repositories/CaseRepository.test.ts[2m > [22mCaseRepository with Encryption[2m > [22mEncryption Security Properties[2m > [22mshould use unique IVs for same description encrypted multiple times
 [32m✓[39m src/repositories/CaseRepository.test.ts[2m > [22mCaseRepository with Encryption[2m > [22mEncryption Security Properties[2m > [22mshould fail decryption with wrong key
 [32m✓[39m src/repositories/CaseRepository.test.ts[2m > [22mCaseRepository with Encryption[2m > [22mRound-Trip Testing[2m > [22mshould successfully encrypt and decrypt unicode characters
 [32m✓[39m src/repositories/CaseRepository.test.ts[2m > [22mCaseRepository with Encryption[2m > [22mRound-Trip Testing[2m > [22mshould handle large descriptions (10KB+)
 [32m✓[39m src/repositories/CaseRepository.test.ts[2m > [22mCaseRepository with Encryption[2m > [22mRound-Trip Testing[2m > [22mshould handle special legal characters
 [32m✓[39m src/features/settings/components/AppearanceSettings.test.tsx[2m > [22mAppearanceSettings[2m > [22mAppearance Settings[2m > [22mshould persist font size to localStorage[33m 352[2mms[22m[39m
[90mstdout[2m | src/repositories/NotesRepository.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/features/settings/components/ProfileSettings.test.tsx[2m > [22mProfileSettings[2m > [22mProfile Editing[2m > [22mshould allow editing name and email[33m 1167[2mms[22m[39m
 [32m✓[39m src/features/settings/components/AppearanceSettings.test.tsx[2m > [22mAppearanceSettings[2m > [22mVoice Input Settings[2m > [22mshould change microphone selection
[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mTab Structure[2m > [22m[2mshould switch to AI Configuration tab
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:53.624Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/SettingsView.test.tsx[2m > [22mSettingsView Integration[2m > [22mTab Structure[2m > [22mshould render main heading and description[33m 1532[2mms[22m[39m
 [32m✓[39m src/features/settings/components/SettingsView.test.tsx[2m > [22mSettingsView Integration[2m > [22mTab Structure[2m > [22mshould render all tab buttons[33m 1823[2mms[22m[39m
 [32m✓[39m src/features/settings/components/SettingsView.test.tsx[2m > [22mSettingsView Integration[2m > [22mTab Structure[2m > [22mshould display Account tab by default
 [32m✓[39m src/repositories/NotesRepository.test.ts[2m > [22mNotesRepository[2m > [22mcreate[2m > [22mshould create a note with encrypted content
 [32m✓[39m src/repositories/NotesRepository.test.ts[2m > [22mNotesRepository[2m > [22mcreate[2m > [22mshould audit note creation
 [32m✓[39m src/repositories/NotesRepository.test.ts[2m > [22mNotesRepository[2m > [22mcreate[2m > [22mshould not log plaintext content in audit logs
 [32m✓[39m src/repositories/NotesRepository.test.ts[2m > [22mNotesRepository[2m > [22mfindById[2m > [22mshould decrypt content when retrieving note
 [32m✓[39m src/repositories/NotesRepository.test.ts[2m > [22mNotesRepository[2m > [22mfindById[2m > [22mshould audit PII access when decrypting content
 [32m✓[39m src/repositories/NotesRepository.test.ts[2m > [22mNotesRepository[2m > [22mfindById[2m > [22mshould return null for non-existent note
 [32m✓[39m src/repositories/NotesRepository.test.ts[2m > [22mNotesRepository[2m > [22mfindByCaseId[2m > [22mshould decrypt all notes for a case
 [32m✓[39m src/repositories/NotesRepository.test.ts[2m > [22mNotesRepository[2m > [22mfindByCaseId[2m > [22mshould return empty array for case with no notes
 [32m✓[39m src/repositories/NotesRepository.test.ts[2m > [22mNotesRepository[2m > [22mupdate[2m > [22mshould update note content with new encryption
 [32m✓[39m src/repositories/NotesRepository.test.ts[2m > [22mNotesRepository[2m > [22mupdate[2m > [22mshould audit note update
 [32m✓[39m src/repositories/NotesRepository.test.ts[2m > [22mNotesRepository[2m > [22mdelete[2m > [22mshould delete note and return true
 [32m✓[39m src/repositories/NotesRepository.test.ts[2m > [22mNotesRepository[2m > [22mdelete[2m > [22mshould return false when deleting non-existent note
 [32m✓[39m src/repositories/NotesRepository.test.ts[2m > [22mNotesRepository[2m > [22mdelete[2m > [22mshould audit note deletion
 [32m✓[39m src/repositories/NotesRepository.test.ts[2m > [22mNotesRepository[2m > [22mbackward compatibility[2m > [22mshould handle legacy plaintext notes
 [32m✓[39m src/repositories/NotesRepository.test.ts[2m > [22mNotesRepository[2m > [22mbackward compatibility[2m > [22mshould handle empty content
 [32m✓[39m src/repositories/NotesRepository.test.ts[2m > [22mNotesRepository[2m > [22mGDPR compliance[2m > [22mshould never log decrypted content in audit logs
 [32m✓[39m src/features/settings/components/AppearanceSettings.test.tsx[2m > [22mAppearanceSettings[2m > [22mVoice Input Settings[2m > [22mshould change speech language
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mKeyboard Shortcuts[2m > [22mshould send message when Enter key is pressed[33m 674[2mms[22m[39m
[90mstdout[2m | src/features/settings/components/AIConfigurationSettings.test.tsx
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/RateLimitService.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/features/settings/components/AppearanceSettings.test.tsx[2m > [22mAppearanceSettings[2m > [22mVoice Input Settings[2m > [22mshould toggle auto-transcribe on and off
[90mstderr[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mRate Limiting[2m > [22m[2mshould lock account after 5 failed attempts
[22m[39m[2025-10-19T12:43:54.118Z][ERROR][RateLimitService] BRUTE FORCE DETECTED for ${normalizedUsername}. Account locked for ${this.LOCK_DURATION_MS / 1000}s
[2025-10-19T12:43:54.120Z][WARN][RateLimitService] Rate limit exceeded for ${normalizedUsername}. Attempts: ${attempt.count}, Lock time remaining: ${remainingSeconds}s

[90mstderr[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mSliding Window[2m > [22m[2mshould unlock account after lock duration expires
[22m[39m[2025-10-19T12:43:54.130Z][ERROR][RateLimitService] BRUTE FORCE DETECTED for ${normalizedUsername}. Account locked for ${this.LOCK_DURATION_MS / 1000}s
[2025-10-19T12:43:54.130Z][WARN][RateLimitService] Rate limit exceeded for ${normalizedUsername}. Attempts: ${attempt.count}, Lock time remaining: ${remainingSeconds}s

[90mstderr[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mCleanup Mechanism[2m > [22m[2mshould not clean up locked accounts prematurely
[22m[39m[2025-10-19T12:43:54.133Z][ERROR][RateLimitService] BRUTE FORCE DETECTED for ${normalizedUsername}. Account locked for ${this.LOCK_DURATION_MS / 1000}s

[90mstderr[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mHelper Methods[2m > [22m[2mshould correctly check if account is locked
[22m[39m[2025-10-19T12:43:54.167Z][ERROR][RateLimitService] BRUTE FORCE DETECTED for ${normalizedUsername}. Account locked for ${this.LOCK_DURATION_MS / 1000}s

[90mstderr[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mHelper Methods[2m > [22m[2mshould provide accurate statistics
[22m[39m[2025-10-19T12:43:54.167Z][ERROR][RateLimitService] BRUTE FORCE DETECTED for ${normalizedUsername}. Account locked for ${this.LOCK_DURATION_MS / 1000}s

[90mstderr[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle rapid successive attempts
[22m[39m[2025-10-19T12:43:54.169Z][ERROR][RateLimitService] BRUTE FORCE DETECTED for ${normalizedUsername}. Account locked for ${this.LOCK_DURATION_MS / 1000}s

[90mstderr[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mEdge Cases[2m > [22m[2mshould not increment count when already locked
[22m[39m[2025-10-19T12:43:54.170Z][ERROR][RateLimitService] BRUTE FORCE DETECTED for ${normalizedUsername}. Account locked for ${this.LOCK_DURATION_MS / 1000}s

 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSingleton Pattern[2m > [22mshould return the same instance
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSingleton Pattern[2m > [22mshould create new instance after reset
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mRate Limiting[2m > [22mshould allow first login attempt
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mRate Limiting[2m > [22mshould track failed attempts
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mRate Limiting[2m > [22mshould lock account after 5 failed attempts
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mRate Limiting[2m > [22mshould handle case-insensitive usernames
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mRate Limiting[2m > [22mshould clear attempts on successful login
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSliding Window[2m > [22mshould reset attempts after window expires
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSliding Window[2m > [22mshould maintain count within sliding window
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSliding Window[2m > [22mshould unlock account after lock duration expires
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mCleanup Mechanism[2m > [22mshould clean up expired entries automatically
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mCleanup Mechanism[2m > [22mshould not clean up locked accounts prematurely
 [31m×[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSecurity Logging[2m > [22mshould log when account is locked
[31m   → expected "error" to be called with arguments: [ StringContaining{…} ][90m

Received: 

[1m  1st error call:

[22m[2m  Array [[22m
[32m-   StringContaining "BRUTE FORCE DETECTED for testuser",[90m
[31m+   "[2025-10-19T12:43:54.137Z][ERROR][RateLimitService] BRUTE FORCE DETECTED for ${normalizedUsername}. Account locked for ${this.LOCK_DURATION_MS / 1000}s",[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
 [31m×[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSecurity Logging[2m > [22mshould log rate limit violations
[31m   → expected "warn" to be called with arguments: [ StringContaining{…} ][90m

Received: 

[1m  1st warn call:

[22m[2m  Array [[22m
[32m-   StringContaining "Rate limit exceeded for testuser",[90m
[31m+   "[2025-10-19T12:43:54.162Z][WARN][RateLimitService] Rate limit exceeded for ${normalizedUsername}. Attempts: ${attempt.count}, Lock time remaining: ${remainingSeconds}s",[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mHelper Methods[2m > [22mshould correctly report attempt count
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mHelper Methods[2m > [22mshould correctly check if account is locked
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mHelper Methods[2m > [22mshould provide accurate statistics
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mEdge Cases[2m > [22mshould handle empty username gracefully
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mEdge Cases[2m > [22mshould handle whitespace in usernames
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mEdge Cases[2m > [22mshould handle rapid successive attempts
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mEdge Cases[2m > [22mshould not increment count when already locked
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mKeyboard Shortcuts[2m > [22mshould create new line when Shift+Enter is pressed[33m 495[2mms[22m[39m
 [32m✓[39m src/features/settings/components/AppearanceSettings.test.tsx[2m > [22mAppearanceSettings[2m > [22mVoice Input Settings[2m > [22mshould persist voice input settings to localStorage[33m 466[2mms[22m[39m
 [32m✓[39m src/features/settings/components/ProfileSettings.test.tsx[2m > [22mProfileSettings[2m > [22mProfile Editing[2m > [22mshould save profile changes successfully[33m 902[2mms[22m[39m
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mKeyboard Shortcuts[2m > [22mshould NOT send message when only whitespace is entered[33m 303[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mInitial Load[2m > [22m[2mshould load default AI settings when localStorage is empty
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:54.363Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mInitial Load[2m > [22m[2mshould load saved AI settings from localStorage
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:54.464Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mTab Structure[2m > [22m[2mshould switch to Preferences tab
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:54.668Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mInitial Load[2m > [22m[2mshould display all AI configuration sections
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:54.584Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/SettingsView.test.tsx[2m > [22mSettingsView Integration[2m > [22mTab Structure[2m > [22mshould switch to AI Configuration tab[33m 1077[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mInitial Load[2m > [22m[2mshould display read-only legal data information
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:54.686Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22mAIConfigurationSettings[2m > [22mInitial Load[2m > [22mshould load default AI settings when localStorage is empty
 [32m✓[39m src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22mAIConfigurationSettings[2m > [22mInitial Load[2m > [22mshould load saved AI settings from localStorage
 [32m✓[39m src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22mAIConfigurationSettings[2m > [22mInitial Load[2m > [22mshould display all AI configuration sections
 [32m✓[39m src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22mAIConfigurationSettings[2m > [22mInitial Load[2m > [22mshould display read-only legal data information
 [32m✓[39m src/features/settings/components/AppearanceSettings.test.tsx[2m > [22mAppearanceSettings[2m > [22mAccessibility Settings[2m > [22mshould toggle high contrast mode on and off
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mKeyboard Shortcuts[2m > [22mshould trim whitespace before sending[33m 340[2mms[22m[39m
 [32m✓[39m src/features/settings/components/AppearanceSettings.test.tsx[2m > [22mAppearanceSettings[2m > [22mAccessibility Settings[2m > [22mshould toggle screen reader support on and off
[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mRAG Toggle[2m > [22m[2mshould toggle RAG on and off
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:54.749Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mRAG Toggle[2m > [22m[2mshould toggle RAG on and off
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:55.190Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/ProfileSettings.test.tsx[2m > [22mProfileSettings[2m > [22mProfile Editing[2m > [22mshould cancel editing and restore original values[33m 787[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mRAG Toggle[2m > [22m[2mshould toggle RAG on and off
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:55.410Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mSend Button Click[2m > [22mshould send message when send button is clicked[33m 471[2mms[22m[39m
 [32m✓[39m src/features/settings/components/AppearanceSettings.test.tsx[2m > [22mAppearanceSettings[2m > [22mAccessibility Settings[2m > [22mshould persist accessibility settings to localStorage
 [32m✓[39m src/features/settings/components/AppearanceSettings.test.tsx[2m > [22mAppearanceSettings[2m > [22mAccessibility Settings[2m > [22mshould display keyboard shortcuts button
 [32m✓[39m src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22mAIConfigurationSettings[2m > [22mRAG Toggle[2m > [22mshould toggle RAG on and off[33m 771[2mms[22m[39m
 [32m✓[39m src/features/settings/components/ProfileSettings.test.tsx[2m > [22mProfileSettings[2m > [22mPassword Change[2m > [22mshould show password change form when button clicked
[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mTab Structure[2m > [22m[2mshould switch to Data & Privacy tab
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:55.595Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/SettingsView.test.tsx[2m > [22mSettingsView Integration[2m > [22mTab Structure[2m > [22mshould switch to Preferences tab[33m 1004[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mRAG Toggle[2m > [22m[2mshould persist RAG setting to localStorage
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:55.544Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mRAG Toggle[2m > [22m[2mshould persist RAG setting to localStorage
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:55.717Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mRAG Toggle[2m > [22m[2mshould persist RAG setting to localStorage
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:55.895Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mSend Button Click[2m > [22mshould enable send button when textarea has text
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mSend Button Click[2m > [22mshould NOT send empty message when button is clicked
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mDisabled State[2m > [22mshould disable textarea when disabled prop is true
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mDisabled State[2m > [22mshould disable send button when disabled prop is true
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mDisabled State[2m > [22mshould NOT send message when disabled and Enter is pressed
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mDisabled State[2m > [22mshould apply disabled styling to textarea
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mDisabled State[2m > [22mshould apply disabled styling to send button
 [32m✓[39m src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22mAIConfigurationSettings[2m > [22mRAG Toggle[2m > [22mshould persist RAG setting to localStorage[33m 478[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mResponse Length Setting[2m > [22m[2mshould change response length
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:56.157Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mResponse Length Setting[2m > [22m[2mshould change response length
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:56.194Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mResponse Length Setting[2m > [22m[2mshould change response length
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:56.401Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mAuto-resize Behavior[2m > [22mshould resize textarea as content grows[33m 414[2mms[22m[39m
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mAuto-resize Behavior[2m > [22mshould have minimum height set
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mAuto-resize Behavior[2m > [22mshould have maximum height set
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mAccessibility[2m > [22mshould have proper ARIA label for textarea
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mAccessibility[2m > [22mshould have proper ARIA label for send button
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mAccessibility[2m > [22mshould update aria-disabled when disabled prop changes
 [32m✓[39m src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22mAIConfigurationSettings[2m > [22mResponse Length Setting[2m > [22mshould change response length[33m 485[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mResponse Length Setting[2m > [22m[2mshould persist response length to localStorage
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:56.593Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mTab Structure[2m > [22m[2mshould switch to Case Management tab
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:56.548Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/SettingsView.test.tsx[2m > [22mSettingsView Integration[2m > [22mTab Structure[2m > [22mshould switch to Data & Privacy tab[33m 928[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mResponse Length Setting[2m > [22m[2mshould persist response length to localStorage
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:56.631Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/ProfileSettings.test.tsx[2m > [22mProfileSettings[2m > [22mPassword Change[2m > [22mshould validate password requirements[33m 1172[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mResponse Length Setting[2m > [22m[2mshould persist response length to localStorage
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:56.822Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/chat/components/ChatInput.test.tsx[2m > [22mChatInput[2m > [22mAccessibility[2m > [22mshould be keyboard navigable[33m 463[2mms[22m[39m
 [32m✓[39m src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22mAIConfigurationSettings[2m > [22mResponse Length Setting[2m > [22mshould persist response length to localStorage[33m 440[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mCitation Detail Setting[2m > [22m[2mshould change citation detail
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:56.991Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mCitation Detail Setting[2m > [22m[2mshould change citation detail
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:57.037Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

[90mstdout[2m | src/features/settings/components/ConsentSettings.test.tsx
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/StartupMetrics.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mCitation Detail Setting[2m > [22m[2mshould change citation detail
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:57.203Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

[90mstdout[2m | src/services/StartupMetrics.test.ts[2m > [22m[2mStartupMetrics[2m > [22m[2mlogStartupMetrics[2m > [22m[2mshould show N/A for unrecorded phases
[22m[39m[2025-10-19T12:43:57.168Z][INFO][StartupMetrics] 
╔════════════════════════════════════════════════════════════╗
[2025-10-19T12:43:57.168Z][INFO][StartupMetrics] ║              STARTUP PERFORMANCE METRICS                    ║
[2025-10-19T12:43:57.168Z][INFO][StartupMetrics] ╠════════════════════════════════════════════════════════════╣
[2025-10-19T12:43:57.169Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T12:43:57.169Z][INFO][StartupMetrics] ║  Phase Timing (from app ready)                              ║
[2025-10-19T12:43:57.169Z][INFO][StartupMetrics] ║  ─────────────────────────────────                          ║
[2025-10-19T12:43:57.169Z][INFO][StartupMetrics] ║  Loading window shown:         N/A                  ║
[2025-10-19T12:43:57.169Z][INFO][StartupMetrics] ║  Critical services ready:      N/A                  ║
[2025-10-19T12:43:57.169Z][INFO][StartupMetrics] ║  Critical handlers registered: N/A                  ║
[2025-10-19T12:43:57.169Z][INFO][StartupMetrics] ║  Main window created:          N/A                  ║
[2025-10-19T12:43:57.169Z][INFO][StartupMetrics] ║  Main window shown:            N/A                  ║
[2025-10-19T12:43:57.170Z][INFO][StartupMetrics] ║  Non-critical services ready:  N/A                  ║
[2025-10-19T12:43:57.170Z][INFO][StartupMetrics] ║  All handlers registered:      N/A                  ║
[2025-10-19T12:43:57.170Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T12:43:57.170Z][INFO][StartupMetrics] ║  Phase Deltas                                                ║
[2025-10-19T12:43:57.170Z][INFO][StartupMetrics] ║  ─────────────────                                           ║
[2025-10-19T12:43:57.170Z][INFO][StartupMetrics] ║  Loading → Services:           N/A                  ║
[2025-10-19T12:43:57.170Z][INFO][StartupMetrics] ║  Services → Handlers:          N/A                  ║
[2025-10-19T12:43:57.170Z][INFO][StartupMetrics] ║  Handlers → Main Window:       N/A                  ║
[2025-10-19T12:43:57.170Z][INFO][StartupMetrics] ║  Main Window → Non-Critical:   N/A                  ║
[2025-10-19T12:43:57.171Z][INFO][StartupMetrics] ║  Non-Critical → Complete:      N/A                  ║
[2025-10-19T12:43:57.171Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T12:43:57.171Z][INFO][StartupMetrics] ║  Summary                                                     ║
[2025-10-19T12:43:57.171Z][INFO][StartupMetrics] ║  ──────────                                                  ║
[2025-10-19T12:43:57.171Z][INFO][StartupMetrics] ║  Perceived startup time:       N/A                  ║
[2025-10-19T12:43:57.171Z][INFO][StartupMetrics] ║  Total startup time:           N/A                  ║
[2025-10-19T12:43:57.171Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T12:43:57.171Z][INFO][StartupMetrics] ╚════════════════════════════════════════════════════════════╝
[2025-10-19T12:43:57.171Z][INFO][StartupMetrics] 
Excellent startup performance! Target achieved.

[90mstdout[2m | src/services/StartupMetrics.test.ts[2m > [22m[2mStartupMetrics[2m > [22m[2mphase deltas[2m > [22m[2mshould calculate phase deltas correctly
[22m[39m[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] 
╔════════════════════════════════════════════════════════════╗
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║              STARTUP PERFORMANCE METRICS                    ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ╠════════════════════════════════════════════════════════════╣
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║  Phase Timing (from app ready)                              ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║  ─────────────────────────────────                          ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║  Loading window shown:         ✅ 6ms                ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║  Critical services ready:      ✅ 6ms                ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║  Critical handlers registered: N/A                  ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║  Main window created:          N/A                  ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║  Main window shown:            ✅ 6ms                ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║  Non-critical services ready:  N/A                  ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║  All handlers registered:      N/A                  ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║  Phase Deltas                                                ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║  ─────────────────                                           ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║  Loading → Services:           N/A                  ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║  Services → Handlers:          Error                ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║  Handlers → Main Window:       6ms                  ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║  Main Window → Non-Critical:   Error                ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║  Non-Critical → Complete:      N/A                  ║
[2025-10-19T12:43:57.211Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T12:43:57.212Z][INFO][StartupMetrics] ║  Summary                                                     ║
[2025-10-19T12:43:57.212Z][INFO][StartupMetrics] ║  ──────────                                                  ║
[2025-10-19T12:43:57.212Z][INFO][StartupMetrics] ║  Perceived startup time:       ✅ 7ms                ║
[2025-10-19T12:43:57.212Z][INFO][StartupMetrics] ║  Total startup time:           ✅ 7ms                ║
[2025-10-19T12:43:57.212Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T12:43:57.212Z][INFO][StartupMetrics] ╚════════════════════════════════════════════════════════════╝
[2025-10-19T12:43:57.212Z][INFO][StartupMetrics] 
Excellent startup performance! Target achieved.

 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mrecordPhase[2m > [22mshould record timestamps for each phase
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mrecordPhase[2m > [22mshould handle phases recorded out of order
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mgetTimestamps[2m > [22mshould return a copy of timestamps
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mgetTimestamps[2m > [22mshould include moduleLoad timestamp by default
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould log formatted metrics to console
 [31m×[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould show N/A for unrecorded phases
[31m   → expected '' to contain 'N/A'[39m
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould show performance indicators
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould show recommendations for slow startup
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mexportMetrics[2m > [22mshould export metrics as JSON
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mexportMetrics[2m > [22mshould categorize performance correctly
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mformatDuration[2m > [22mshould format durations correctly
[90mstdout[2m | src/services/StartupMetrics.test.ts[2m > [22m[2mStartupMetrics[2m > [22m[2mphase deltas[2m > [22m[2mshould calculate phase deltas correctly
[22m[39m[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] 
╔════════════════════════════════════════════════════════════╗
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║              STARTUP PERFORMANCE METRICS                    ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ╠════════════════════════════════════════════════════════════╣
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║  Phase Timing (from app ready)                              ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║  ─────────────────────────────────                          ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║  Loading window shown:         ✅ 32ms               ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║  Critical services ready:      ✅ 6ms                ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║  Critical handlers registered: N/A                  ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║  Main window created:          N/A                  ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║  Main window shown:            ✅ 48ms               ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║  Non-critical services ready:  N/A                  ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║  All handlers registered:      N/A                  ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║  Phase Deltas                                                ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║  ─────────────────                                           ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║  Loading → Services:           Error                ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║  Services → Handlers:          Error                ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║  Handlers → Main Window:       48ms                 ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║  Main Window → Non-Critical:   Error                ║
[2025-10-19T12:43:57.252Z][INFO][StartupMetrics] ║  Non-Critical → Complete:      N/A                  ║
[2025-10-19T12:43:57.253Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T12:43:57.253Z][INFO][StartupMetrics] ║  Summary                                                     ║
[2025-10-19T12:43:57.253Z][INFO][StartupMetrics] ║  ──────────                                                  ║
[2025-10-19T12:43:57.253Z][INFO][StartupMetrics] ║  Perceived startup time:       ✅ 49ms               ║
[2025-10-19T12:43:57.253Z][INFO][StartupMetrics] ║  Total startup time:           ✅ 49ms               ║
[2025-10-19T12:43:57.253Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T12:43:57.253Z][INFO][StartupMetrics] ╚════════════════════════════════════════════════════════════╝
[2025-10-19T12:43:57.253Z][INFO][StartupMetrics] 
Excellent startup performance! Target achieved.

 [32m✓[39m src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22mAIConfigurationSettings[2m > [22mCitation Detail Setting[2m > [22mshould change citation detail[33m 374[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mCitation Detail Setting[2m > [22m[2mshould persist citation detail to localStorage
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:57.374Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mCitation Detail Setting[2m > [22m[2mshould persist citation detail to localStorage
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:57.414Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mCitation Detail Setting[2m > [22m[2mshould persist citation detail to localStorage
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:57.571Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/ConsentSettings.test.tsx[2m > [22mConsentSettings[2m > [22mConsent Loading[2m > [22mshould load and display consents on mount
 [32m✓[39m src/features/settings/components/ConsentSettings.test.tsx[2m > [22mConsentSettings[2m > [22mConsent Loading[2m > [22mshould display loading skeleton while loading
[90mstderr[2m | src/features/settings/components/ConsentSettings.test.tsx[2m > [22m[2mConsentSettings[2m > [22m[2mConsent Loading[2m > [22m[2mshould handle loading errors
[22m[39m[2025-10-19T12:43:57.711Z][ERROR][App] Failed to load consents: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22mAIConfigurationSettings[2m > [22mCitation Detail Setting[2m > [22mshould persist citation detail to localStorage[33m 374[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mJurisdiction Setting[2m > [22m[2mshould change jurisdiction
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:57.737Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/ConsentSettings.test.tsx[2m > [22mConsentSettings[2m > [22mConsent Loading[2m > [22mshould handle loading errors
[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mJurisdiction Setting[2m > [22m[2mshould change jurisdiction
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:57.772Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/ConsentSettings.test.tsx[2m > [22mConsentSettings[2m > [22mConsent Status Display[2m > [22mshould show granted status for existing consents
 [32m✓[39m src/features/settings/components/ConsentSettings.test.tsx[2m > [22mConsentSettings[2m > [22mConsent Status Display[2m > [22mshould show not granted status for missing consents
 [32m✓[39m src/features/settings/components/ConsentSettings.test.tsx[2m > [22mConsentSettings[2m > [22mConsent Status Display[2m > [22mshould mark data_processing as required
[90mstderr[2m | src/services/StartupMetrics.test.ts[2m > [22m[2mStartupMetrics[2m > [22m[2mphase deltas[2m > [22m[2mshould calculate phase deltas correctly
[22m[39m[2025-10-19T12:43:57.912Z][WARN][StartupMetrics] 
Performance Recommendations:
[2025-10-19T12:43:57.913Z][WARN][StartupMetrics]   • Main window taking too long - check renderer bundle size

[90mstdout[2m | src/services/StartupMetrics.test.ts[2m > [22m[2mStartupMetrics[2m > [22m[2mphase deltas[2m > [22m[2mshould calculate phase deltas correctly
[22m[39m[2025-10-19T12:43:57.910Z][INFO][StartupMetrics] 
╔════════════════════════════════════════════════════════════╗
[2025-10-19T12:43:57.911Z][INFO][StartupMetrics] ║              STARTUP PERFORMANCE METRICS                    ║
[2025-10-19T12:43:57.911Z][INFO][StartupMetrics] ╠════════════════════════════════════════════════════════════╣
[2025-10-19T12:43:57.911Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T12:43:57.911Z][INFO][StartupMetrics] ║  Phase Timing (from app ready)                              ║
[2025-10-19T12:43:57.911Z][INFO][StartupMetrics] ║  ─────────────────────────────────                          ║
[2025-10-19T12:43:57.911Z][INFO][StartupMetrics] ║  Loading window shown:         ⚠️  52ms             ║
[2025-10-19T12:43:57.911Z][INFO][StartupMetrics] ║  Critical services ready:      ✅ 111ms              ║
[2025-10-19T12:43:57.911Z][INFO][StartupMetrics] ║  Critical handlers registered: ✅ 111ms              ║
[2025-10-19T12:43:57.911Z][INFO][StartupMetrics] ║  Main window created:          N/A                  ║
[2025-10-19T12:43:57.911Z][INFO][StartupMetrics] ║  Main window shown:            ❌ 706ms              ║
[2025-10-19T12:43:57.911Z][INFO][StartupMetrics] ║  Non-critical services ready:  252ms                ║
[2025-10-19T12:43:57.912Z][INFO][StartupMetrics] ║  All handlers registered:      315ms                ║
[2025-10-19T12:43:57.912Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T12:43:57.912Z][INFO][StartupMetrics] ║  Phase Deltas                                                ║
[2025-10-19T12:43:57.912Z][INFO][StartupMetrics] ║  ─────────────────                                           ║
[2025-10-19T12:43:57.912Z][INFO][StartupMetrics] ║  Loading → Services:           59ms                 ║
[2025-10-19T12:43:57.912Z][INFO][StartupMetrics] ║  Services → Handlers:          N/A                  ║
[2025-10-19T12:43:57.912Z][INFO][StartupMetrics] ║  Handlers → Main Window:       595ms                ║
[2025-10-19T12:43:57.912Z][INFO][StartupMetrics] ║  Main Window → Non-Critical:   Error                ║
[2025-10-19T12:43:57.912Z][INFO][StartupMetrics] ║  Non-Critical → Complete:      63ms                 ║
[2025-10-19T12:43:57.912Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T12:43:57.912Z][INFO][StartupMetrics] ║  Summary                                                     ║
[2025-10-19T12:43:57.912Z][INFO][StartupMetrics] ║  ──────────                                                  ║
[2025-10-19T12:43:57.912Z][INFO][StartupMetrics] ║  Perceived startup time:       ❌ 707ms              ║
[2025-10-19T12:43:57.912Z][INFO][StartupMetrics] ║  Total startup time:           ⚠️  707ms            ║
[2025-10-19T12:43:57.912Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T12:43:57.912Z][INFO][StartupMetrics] ╚════════════════════════════════════════════════════════════╝

[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mJurisdiction Setting[2m > [22m[2mshould change jurisdiction
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:57.925Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22mAIConfigurationSettings[2m > [22mJurisdiction Setting[2m > [22mshould change jurisdiction[33m 361[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mJurisdiction Setting[2m > [22m[2mshould persist jurisdiction to localStorage
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:58.058Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mJurisdiction Setting[2m > [22m[2mshould persist jurisdiction to localStorage
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:58.088Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

[90mstderr[2m | src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22m[2mAIConfigurationSettings[2m > [22m[2mJurisdiction Setting[2m > [22m[2mshould persist jurisdiction to localStorage
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'secureStorage')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:58[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:58.253Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mTab Structure[2m > [22m[2mshould switch to About tab
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:58.192Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/SettingsView.test.tsx[2m > [22mSettingsView Integration[2m > [22mTab Structure[2m > [22mshould switch to Case Management tab[33m 1785[2mms[22m[39m
 [32m✓[39m src/features/settings/components/ProfileSettings.test.tsx[2m > [22mProfileSettings[2m > [22mPassword Change[2m > [22mshould validate password confirmation match[33m 1536[2mms[22m[39m
 [32m✓[39m src/features/settings/components/AIConfigurationSettings.test.tsx[2m > [22mAIConfigurationSettings[2m > [22mJurisdiction Setting[2m > [22mshould persist jurisdiction to localStorage[33m 315[2mms[22m[39m
 [32m✓[39m src/features/notes/services/NotesService.test.ts[2m > [22mNotesService[2m > [22mcreateNote[2m > [22mshould create a note with valid input
 [32m✓[39m src/features/notes/services/NotesService.test.ts[2m > [22mNotesService[2m > [22mcreateNote[2m > [22mshould throw error if content is empty
 [32m✓[39m src/features/notes/services/NotesService.test.ts[2m > [22mNotesService[2m > [22mcreateNote[2m > [22mshould throw error if content exceeds 10000 characters
 [32m✓[39m src/features/notes/services/NotesService.test.ts[2m > [22mNotesService[2m > [22mcreateNote[2m > [22mshould accept content exactly 10000 characters
 [32m✓[39m src/features/notes/services/NotesService.test.ts[2m > [22mNotesService[2m > [22mcreateNote[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/notes/services/NotesService.test.ts[2m > [22mNotesService[2m > [22mgetNotesByCaseId[2m > [22mshould return all notes for a case
 [32m✓[39m src/features/notes/services/NotesService.test.ts[2m > [22mNotesService[2m > [22mgetNotesByCaseId[2m > [22mshould return empty array if no notes exist
 [32m✓[39m src/features/notes/services/NotesService.test.ts[2m > [22mNotesService[2m > [22mgetNotesByCaseId[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/notes/services/NotesService.test.ts[2m > [22mNotesService[2m > [22mupdateNote[2m > [22mshould update a note with valid input
 [32m✓[39m src/features/notes/services/NotesService.test.ts[2m > [22mNotesService[2m > [22mupdateNote[2m > [22mshould throw error if content is empty
 [32m✓[39m src/features/notes/services/NotesService.test.ts[2m > [22mNotesService[2m > [22mupdateNote[2m > [22mshould throw error if content exceeds 10000 characters
 [32m✓[39m src/features/notes/services/NotesService.test.ts[2m > [22mNotesService[2m > [22mupdateNote[2m > [22mshould throw error if note not found
 [32m✓[39m src/features/notes/services/NotesService.test.ts[2m > [22mNotesService[2m > [22mupdateNote[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/notes/services/NotesService.test.ts[2m > [22mNotesService[2m > [22mdeleteNote[2m > [22mshould delete a note successfully
 [32m✓[39m src/features/notes/services/NotesService.test.ts[2m > [22mNotesService[2m > [22mdeleteNote[2m > [22mshould log and rethrow repository errors
 [32m✓[39m src/features/notes/services/NotesService.test.ts[2m > [22mNotesService[2m > [22mEdge Cases[2m > [22mshould handle special characters in content
 [32m✓[39m src/features/notes/services/NotesService.test.ts[2m > [22mNotesService[2m > [22mEdge Cases[2m > [22mshould handle unicode characters in content
 [32m✓[39m src/features/settings/components/ConsentSettings.test.tsx[2m > [22mConsentSettings[2m > [22mGranting Consent[2m > [22mshould grant consent successfully[33m 568[2mms[22m[39m
 [32m✓[39m src/features/settings/components/ConsentSettings.test.tsx[2m > [22mConsentSettings[2m > [22mGranting Consent[2m > [22mshould handle grant consent error[33m 313[2mms[22m[39m
 [32m✓[39m src/features/settings/components/ConsentSettings.test.tsx[2m > [22mConsentSettings[2m > [22mRevoking Consent[2m > [22mshould revoke consent successfully[33m 313[2mms[22m[39m
 [32m✓[39m src/features/settings/components/ConsentSettings.test.tsx[2m > [22mConsentSettings[2m > [22mRevoking Consent[2m > [22mshould prevent revoking required consent
 [32m✓[39m src/features/settings/components/ConsentSettings.test.tsx[2m > [22mConsentSettings[2m > [22mRevoking Consent[2m > [22mshould handle revoke consent error
 [32m✓[39m src/features/settings/components/ConsentSettings.test.tsx[2m > [22mConsentSettings[2m > [22mGDPR Compliance[2m > [22mshould display GDPR rights notice
[90mstdout[2m | src/services/AuthenticationService.integration.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/features/settings/components/ProfileSettings.test.tsx[2m > [22mProfileSettings[2m > [22mPassword Change[2m > [22mshould successfully change password[33m 1314[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mAI Configuration Settings[2m > [22m[2mshould toggle RAG enabled setting
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:59.631Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/SettingsView.test.tsx[2m > [22mSettingsView Integration[2m > [22mTab Structure[2m > [22mshould switch to About tab[33m 1595[2mms[22m[39m
 [32m✓[39m src/services/AuthenticationService.integration.test.ts[2m > [22mAuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting on Login[2m > [22mshould allow first login attempt
[90mstderr[2m | src/features/settings/components/ProfileSettings.test.tsx[2m > [22m[2mProfileSettings[2m > [22m[2mError Handling[2m > [22m[2mshould handle profile save error
[22m[39m[2025-10-19T12:43:59.812Z][ERROR][App] Failed to update profile: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/ProfileSettings.test.tsx[2m > [22mProfileSettings[2m > [22mError Handling[2m > [22mshould handle profile save error
[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mAI Configuration Settings[2m > [22m[2mshould toggle RAG enabled setting
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:43:59.896Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/services/AuthenticationService.integration.test.ts[2m > [22mAuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting on Login[2m > [22mshould block login after 5 failed attempts[33m 388[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mAI Configuration Settings[2m > [22m[2mshould toggle RAG enabled setting
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:44:00.147Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mBasic Cache Operations[2m > [22mshould set and get cached values
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mBasic Cache Operations[2m > [22mshould return undefined for cache miss
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mBasic Cache Operations[2m > [22mshould log cache hit events
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mBasic Cache Operations[2m > [22mshould log cache miss events
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mBasic Cache Operations[2m > [22mshould log cache set events
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mCache Invalidation[2m > [22mshould invalidate specific entity entries
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mCache Invalidation[2m > [22mshould invalidate all entries for an entity type
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mCache Invalidation[2m > [22mshould log entity invalidation
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mCache Invalidation[2m > [22mshould clear entire cache
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mLRU Eviction[2m > [22mshould evict least recently used entries when max size reached
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mCache Statistics[2m > [22mshould return correct cache statistics
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mCache Statistics[2m > [22mshould update size when entries are added/removed
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mGDPR Compliance[2m > [22mArticle 17: Right to Erasure[2m > [22mshould clear all user data on erasure request
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mGDPR Compliance[2m > [22mArticle 17: Right to Erasure[2m > [22mshould log erasure events
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mGDPR Compliance[2m > [22mArticle 15: Right of Access[2m > [22mshould generate user cache report
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mGDPR Compliance[2m > [22mArticle 15: Right of Access[2m > [22mshould log access request events
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mGDPR Compliance[2m > [22mArticle 15: Right of Access[2m > [22mshould return empty report for user with no cached data
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mSecurity[2m > [22mshould initialize cache and log event
 [32m✓[39m src/services/DecryptionCache.test.ts[2m > [22mDecryptionCache[2m > [22mSecurity[2m > [22mshould work without audit logger
 [32m✓[39m src/services/AuthenticationService.integration.test.ts[2m > [22mAuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting on Login[2m > [22mshould provide specific lock time in error message[33m 456[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mAI Configuration Settings[2m > [22m[2mshould change response length setting
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:44:00.988Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/SettingsView.test.tsx[2m > [22mSettingsView Integration[2m > [22mAI Configuration Settings[2m > [22mshould toggle RAG enabled setting[33m 1050[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/ProfileSettings.test.tsx[2m > [22m[2mProfileSettings[2m > [22m[2mError Handling[2m > [22m[2mshould handle password change error
[22m[39m[2025-10-19T12:44:01.068Z][ERROR][App] Password change error: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/ProfileSettings.test.tsx[2m > [22mProfileSettings[2m > [22mError Handling[2m > [22mshould handle password change error[33m 1256[2mms[22m[39m
 [32m✓[39m src/services/AuthenticationService.integration.test.ts[2m > [22mAuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting on Login[2m > [22mshould clear rate limit after successful login[33m 569[2mms[22m[39m
[90mstdout[2m | src/features/settings/components/CaseManagementSettings.test.tsx
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mAI Configuration Settings[2m > [22m[2mshould change response length setting
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:44:01.256Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/services/AuthenticationService.integration.test.ts[2m > [22mAuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting on Login[2m > [22mshould handle case-insensitive usernames for rate limiting
 [32m✓[39m src/services/AuthenticationService.integration.test.ts[2m > [22mAuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting on Login[2m > [22mshould rate limit even for non-existent users
 [32m✓[39m src/services/AuthenticationService.integration.test.ts[2m > [22mAuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting on Login[2m > [22mshould rate limit inactive accounts
[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mAI Configuration Settings[2m > [22m[2mshould change response length setting
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:44:01.461Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/CaseManagementSettings.test.tsx[2m > [22mCaseManagementSettings[2m > [22mInitial Load[2m > [22mshould load default case management settings when localStorage is empty
 [32m✓[39m src/features/settings/components/CaseManagementSettings.test.tsx[2m > [22mCaseManagementSettings[2m > [22mInitial Load[2m > [22mshould load saved case management settings from localStorage
 [32m✓[39m src/features/settings/components/CaseManagementSettings.test.tsx[2m > [22mCaseManagementSettings[2m > [22mInitial Load[2m > [22mshould display case management section
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginationParamsSchema Validation[2m > [22mshould validate correct pagination parameters
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginationParamsSchema Validation[2m > [22mshould apply default limit of 20
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginationParamsSchema Validation[2m > [22mshould apply default direction of desc
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginationParamsSchema Validation[2m > [22mshould accept asc direction
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginationParamsSchema Validation[2m > [22mshould accept desc direction
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginationParamsSchema Validation[2m > [22mshould make cursor optional
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginationParamsSchema Validation[2m > [22mshould accept minimum limit of 1
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginationParamsSchema Validation[2m > [22mshould accept maximum limit of 100
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginationParamsSchema - OWASP Validation[2m > [22mshould reject limit below minimum (OWASP: Input Validation)
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginationParamsSchema - OWASP Validation[2m > [22mshould reject negative limit
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginationParamsSchema - OWASP Validation[2m > [22mshould reject limit above maximum (OWASP: DoS Prevention)
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginationParamsSchema - OWASP Validation[2m > [22mshould reject limit above maximum (extreme value)
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginationParamsSchema - OWASP Validation[2m > [22mshould reject non-integer limit
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginationParamsSchema - OWASP Validation[2m > [22mshould reject invalid direction
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginationParamsSchema - OWASP Validation[2m > [22mshould reject null direction
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginatedResult Structure[2m > [22mshould have required fields
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginatedResult Structure[2m > [22mshould allow totalCount to be optional
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginatedResult Structure[2m > [22mshould include totalCount when provided
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginatedResult Structure[2m > [22mshould indicate hasMore=true when more pages available
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mPaginatedResult Structure[2m > [22mshould indicate hasMore=false on last page
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mCursor Encoding/Decoding[2m > [22mshould encode cursor as base64
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mCursor Encoding/Decoding[2m > [22mshould decode cursor from base64
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mCursor Encoding/Decoding[2m > [22mshould handle cursor with special characters after encoding
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mEdge Cases[2m > [22mshould handle empty items array
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mEdge Cases[2m > [22mshould handle single item
 [32m✓[39m src/types/pagination.test.ts[2m > [22mPagination Types[2m > [22mEdge Cases[2m > [22mshould handle full page of items
 [32m✓[39m src/services/AuthenticationService.integration.test.ts[2m > [22mAuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting Time Window[2m > [22mshould unlock account after 15 minutes[33m 494[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mAI Configuration Settings[2m > [22m[2mshould change jurisdiction setting
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:44:02.059Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/SettingsView.test.tsx[2m > [22mSettingsView Integration[2m > [22mAI Configuration Settings[2m > [22mshould change response length setting[33m 1334[2mms[22m[39m
 [31m×[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mphase deltas[2m > [22mshould calculate phase deltas correctly[33m 5003[2mms[22m[39m
[31m   → Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
 [32m✓[39m src/features/settings/components/CaseManagementSettings.test.tsx[2m > [22mCaseManagementSettings[2m > [22mDefault Case Type Setting[2m > [22mshould change default case type[33m 885[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mAI Configuration Settings[2m > [22m[2mshould change jurisdiction setting
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:44:02.352Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/services/AuthenticationService.integration.test.ts[2m > [22mAuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting Time Window[2m > [22mshould reset attempt counter after 15 minute window[33m 565[2mms[22m[39m
 [32m✓[39m src/features/settings/components/CaseManagementSettings.test.tsx[2m > [22mCaseManagementSettings[2m > [22mDefault Case Type Setting[2m > [22mshould persist default case type to localStorage
 [32m✓[39m src/features/settings/components/CaseManagementSettings.test.tsx[2m > [22mCaseManagementSettings[2m > [22mAuto-Archive Setting[2m > [22mshould change auto-archive days[33m 423[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mCase Management Settings[2m > [22m[2mshould change default case type
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:44:02.980Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/SettingsView.test.tsx[2m > [22mSettingsView Integration[2m > [22mAI Configuration Settings[2m > [22mshould change jurisdiction setting[33m 877[2mms[22m[39m
 [32m✓[39m src/features/settings/components/CaseManagementSettings.test.tsx[2m > [22mCaseManagementSettings[2m > [22mAuto-Archive Setting[2m > [22mshould persist auto-archive days to localStorage[33m 346[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mCase Management Settings[2m > [22m[2mshould change default case type
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:44:03.381Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/CaseManagementSettings.test.tsx[2m > [22mCaseManagementSettings[2m > [22mCase Numbering Setting[2m > [22mshould change case numbering format[33m 329[2mms[22m[39m
 [32m✓[39m src/features/settings/components/CaseManagementSettings.test.tsx[2m > [22mCaseManagementSettings[2m > [22mCase Numbering Setting[2m > [22mshould persist case numbering format to localStorage[33m 301[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mCase Management Settings[2m > [22m[2mshould change auto-archive setting
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:44:04.222Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/SettingsView.test.tsx[2m > [22mSettingsView Integration[2m > [22mCase Management Settings[2m > [22mshould change default case type[33m 1035[2mms[22m[39m
[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mCase Management Settings[2m > [22m[2mshould change auto-archive setting
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
[2025-10-19T12:44:04.656Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mgenerateCacheKey[2m > [22mshould generate consistent cache keys for same inputs
 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mgenerateCacheKey[2m > [22mshould generate different keys for different encrypted values
 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mgenerateCacheKey[2m > [22mshould include entity type and ID in key
 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mgenerateCacheKey[2m > [22mshould include version hash in key
 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mgenerateCacheKey[2m > [22mshould generate different version hashes for different encrypted values
 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mgenerateCacheKey[2m > [22mshould handle string IDs
 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mgenerateCacheKey[2m > [22mshould detect stale cache when encrypted value changes
 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mgeneratePageCacheKey[2m > [22mshould generate cache keys for paginated queries
 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mgeneratePageCacheKey[2m > [22mshould use "start" for first page (no cursor)
 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mgeneratePageCacheKey[2m > [22mshould hash cursor for subsequent pages
 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mgeneratePageCacheKey[2m > [22mshould generate different keys for different cursors
 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mgeneratePageCacheKey[2m > [22mshould generate different keys for different page sizes
 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mgeneratePageCacheKey[2m > [22mshould generate different keys for different directions
 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mgeneratePageCacheKey[2m > [22mshould default to desc direction when not specified
 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mgeneratePageCacheKey[2m > [22mshould be deterministic for same parameters
 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mCache Key Security[2m > [22mshould use SHA-256 for version hashing
 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mCache Key Security[2m > [22mshould prevent cache key collisions
 [32m✓[39m src/types/cache.test.ts[2m > [22mCache Key Generation[2m > [22mCache Key Security[2m > [22mshould handle special characters in encrypted values
[90mstdout[2m | src/features/settings/components/NotificationSettings.test.tsx
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

 [32m✓[39m src/hooks/useAI.test.ts[2m > [22museAI types[2m > [22mAILoadingState has correct values
 [32m✓[39m src/hooks/useAI.test.ts[2m > [22museAI types[2m > [22mUseAIReturn has correct shape
 [32m✓[39m src/hooks/useAI.test.ts[2m > [22museAI types[2m > [22mChatMessage has correct structure
 [32m✓[39m src/hooks/useAI.test.ts[2m > [22museAI types[2m > [22mLoading states transition correctly
 [32m✓[39m src/hooks/useAI.test.ts[2m > [22museAI hook contract[2m > [22msendMessage validates empty content
 [32m✓[39m src/hooks/useAI.test.ts[2m > [22museAI hook contract[2m > [22misStreaming prevents concurrent sends
 [32m✓[39m src/hooks/useAI.test.ts[2m > [22museAI hook contract[2m > [22mmessages array maintains order
 [32m✓[39m src/hooks/useAI.test.ts[2m > [22museAI hook contract[2m > [22mclearMessages resets all state
 [32m✓[39m src/hooks/useAI.test.ts[2m > [22museAI error handling[2m > [22mAI initialization error message is user-friendly
 [32m✓[39m src/hooks/useAI.test.ts[2m > [22museAI error handling[2m > [22mStream error is prefixed with "AI Error:"
 [32m✓[39m src/hooks/useAI.test.ts[2m > [22museAI error handling[2m > [22mEmpty message error is clear
 [32m✓[39m src/hooks/useAI.test.ts[2m > [22museAI error handling[2m > [22mConcurrent send error is clear
 [32m✓[39m src/hooks/useAI.test.ts[2m > [22museAI streaming behavior[2m > [22mStreaming content accumulates tokens
 [32m✓[39m src/hooks/useAI.test.ts[2m > [22museAI streaming behavior[2m > [22mStreaming content resets on completion
 [32m✓[39m src/hooks/useAI.test.ts[2m > [22museAI streaming behavior[2m > [22mAssistant message created from streaming content
 [32m✓[39m src/features/settings/components/NotificationSettings.test.tsx[2m > [22mNotificationSettings[2m > [22mInitial Load[2m > [22mshould load default notification settings when localStorage is empty
 [32m✓[39m src/features/settings/components/NotificationSettings.test.tsx[2m > [22mNotificationSettings[2m > [22mInitial Load[2m > [22mshould load saved notification settings from localStorage
 [32m✓[39m src/features/settings/components/NotificationSettings.test.tsx[2m > [22mNotificationSettings[2m > [22mInitial Load[2m > [22mshould display all notification options
[90mstderr[2m | src/features/settings/components/SettingsView.test.tsx[2m > [22m[2mSettingsView Integration[2m > [22m[2mLocalStorage Persistence[2m > [22m[2mshould load AI settings from localStorage on mount
[22m[39m[SecureStorage] Failed to initialize: TypeError: Cannot read properties of undefined (reading 'isEncryptionAvailable')
    at SecureStorageService.init [90m(F:\Justice Companion take 2\[39msrc\services\SecureStorageService.ts:40:72[90m)[39m
    at loadSavedConfig [90m(F:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:43:29[90m)[39m
    at [90mF:\Justice Companion take 2\[39msrc\features\settings\components\OpenAISettings.tsx:64:10
    at commitHookEffectListMount [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:23189:26[90m)[39m
    at commitPassiveMountOnFiber [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24970:11[90m)[39m
    at commitPassiveMountEffects_complete [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24930:9[90m)[39m
    at commitPassiveMountEffects_begin [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24917:7[90m)[39m
    at commitPassiveMountEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:24905:3[90m)[39m
    at flushPassiveEffectsImpl [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27078:3[90m)[39m
    at flushPassiveEffects [90m(F:\Justice Companion take 2\[39mnode_modules\[4m.pnpm[24m\react-dom@18.3.1_react@18.3.1\node_modules\[4mreact-dom[24m\cjs\react-dom.development.js:27023:14[90m)[39m
Warning: An update to Tabs inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act
    at Tabs (F:\Justice Companion take 2\src\components\ui\Tabs.tsx:5:17)
    at div
    at div
    at SettingsView (F:\Justice Companion take 2\src\features\settings\components\SettingsView.tsx:25:61)
    at AuthProvider (F:\Justice Companion take 2\src\contexts\AuthContext.tsx:8:25)
    at Router (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:6066:13)
    at BrowserRouter (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/react-router@7.9.4_react-do_693ab9d21bad96f410b66107d18775d1/node_modules/react-router/dist/development/chunk-OIYGIGL5.mjs:9209:3)
[2025-10-19T12:44:05.586Z][ERROR][OpenAISettings] Failed to load saved configuration: {
  "error": {}
}

 [32m✓[39m src/features/settings/components/SettingsView.test.tsx[2m > [22mSettingsView Integration[2m > [22mCase Management Settings[2m > [22mshould change auto-archive setting[33m 1280[2mms[22m[39m
 [32m✓[39m src/features/settings/components/SettingsView.test.tsx[2m > [22mSettingsView Integration[2m > [22mLocalStorage Persistence[2m > [22mshould load AI settings from localStorage on mount[33m 881[2mms[22m[39m
 [32m✓[39m src/features/settings/components/NotificationSettings.test.tsx[2m > [22mNotificationSettings[2m > [22mToggling Notifications[2m > [22mshould toggle chat notifications on and off[33m 597[2mms[22m[39m
 [32m✓[39m src/features/settings/components/NotificationSettings.test.tsx[2m > [22mNotificationSettings[2m > [22mToggling Notifications[2m > [22mshould toggle case updates on and off
 [32m✓[39m src/features/settings/components/NotificationSettings.test.tsx[2m > [22mNotificationSettings[2m > [22mToggling Notifications[2m > [22mshould toggle document analysis notifications on and off
 [32m✓[39m src/features/settings/components/NotificationSettings.test.tsx[2m > [22mNotificationSettings[2m > [22mLocalStorage Persistence[2m > [22mshould persist chat notifications to localStorage
 [32m✓[39m src/services/LegalAPIService.test.ts[2m > [22mLegalAPIService[2m > [22mextractKeywords[2m > [22mshould extract keywords from "Can I be fired for being pregnant?"
 [32m✓[39m src/services/LegalAPIService.test.ts[2m > [22mLegalAPIService[2m > [22mextractKeywords[2m > [22mshould handle housing-related questions
 [32m✓[39m src/services/LegalAPIService.test.ts[2m > [22mLegalAPIService[2m > [22mextractKeywords[2m > [22mshould return general keywords when no legal terms found
 [32m✓[39m src/services/LegalAPIService.test.ts[2m > [22mLegalAPIService[2m > [22mclassifyQuestion[2m > [22mshould classify pregnancy discrimination as employment
 [32m✓[39m src/services/LegalAPIService.test.ts[2m > [22mLegalAPIService[2m > [22mclassifyQuestion[2m > [22mshould classify eviction as housing
 [32m✓[39m src/services/LegalAPIService.test.ts[2m > [22mLegalAPIService[2m > [22mclassifyQuestion[2m > [22mshould classify consumer refund as consumer
 [32m✓[39m src/services/LegalAPIService.test.ts[2m > [22mLegalAPIService[2m > [22mclassifyQuestion[2m > [22mshould default to general for unknown questions
 [32m✓[39m src/features/settings/components/NotificationSettings.test.tsx[2m > [22mNotificationSettings[2m > [22mLocalStorage Persistence[2m > [22mshould persist case updates to localStorage
 [32m✓[39m src/utils/error-logger.test.ts[2m > [22mErrorLogger[2m > [22mshould create log directory if it does not exist
 [32m✓[39m src/services/LegalAPIService.test.ts[2m > [22mLegalAPIService[2m > [22msearchLegalInfo[2m > [22mshould return LegalSearchResults structure
 [32m✓[39m src/services/LegalAPIService.test.ts[2m > [22mLegalAPIService[2m > [22msearchLegalInfo[2m > [22mshould cache results on subsequent calls
 [32m✓[39m src/utils/error-logger.test.ts[2m > [22mErrorLogger[2m > [22mshould log error to file
 [32m✓[39m src/utils/error-logger.test.ts[2m > [22mErrorLogger[2m > [22mshould log string error
 [32m✓[39m src/utils/error-logger.test.ts[2m > [22mErrorLogger[2m > [22mshould include context in log
 [32m✓[39m src/services/LegalAPIService.test.ts[2m > [22mLegalAPIService[2m > [22mcache management[2m > [22mshould clear cache
 [32m✓[39m src/features/settings/components/NotificationSettings.test.tsx[2m > [22mNotificationSettings[2m > [22mLocalStorage Persistence[2m > [22mshould persist document analysis notifications to localStorage
 [32m✓[39m src/utils/error-logger.test.ts[2m > [22mErrorLogger[2m > [22mshould rotate log file when exceeding max size
 [32m✓[39m src/utils/error-logger.test.ts[2m > [22mErrorLogger[2m > [22mshould read recent errors
 [32m✓[39m src/utils/error-logger.test.ts[2m > [22mErrorLogger[2m > [22mshould clear all logs
 [32m✓[39m src/utils/error-logger.test.ts[2m > [22mErrorLogger[2m > [22mshould maintain max number of backups[33m 363[2mms[22m[39m
 [32m✓[39m src/utils/passwordValidation.test.ts[2m > [22mvalidatePasswordChange[2m > [22mshould return error when old password is empty
 [32m✓[39m src/utils/passwordValidation.test.ts[2m > [22mvalidatePasswordChange[2m > [22mshould return error when new password is too short
 [32m✓[39m src/utils/passwordValidation.test.ts[2m > [22mvalidatePasswordChange[2m > [22mshould return error when new password lacks uppercase letter
 [32m✓[39m src/utils/passwordValidation.test.ts[2m > [22mvalidatePasswordChange[2m > [22mshould return error when new password lacks lowercase letter
 [32m✓[39m src/utils/passwordValidation.test.ts[2m > [22mvalidatePasswordChange[2m > [22mshould return error when new password lacks number
 [32m✓[39m src/utils/passwordValidation.test.ts[2m > [22mvalidatePasswordChange[2m > [22mshould return error when passwords do not match
 [32m✓[39m src/utils/passwordValidation.test.ts[2m > [22mvalidatePasswordChange[2m > [22mshould return valid for password meeting all requirements
 [32m✓[39m src/utils/passwordValidation.test.ts[2m > [22mvalidatePasswordChange[2m > [22mshould validate password with exactly 12 characters
 [32m✓[39m src/utils/passwordValidation.test.ts[2m > [22mvalidatePasswordChange[2m > [22mshould validate password with special characters
 [32m✓[39m src/utils/passwordValidation.test.ts[2m > [22mvalidatePasswordChange[2m > [22mshould validate very long password
 [32m✓[39m src/hooks/useReducedMotion.test.ts[2m > [22museReducedMotion[2m > [22mshould return false by default (no reduced motion)
 [32m✓[39m src/hooks/useReducedMotion.test.ts[2m > [22museReducedMotion[2m > [22mshould return true when prefers-reduced-motion is enabled
 [32m✓[39m src/hooks/useReducedMotion.test.ts[2m > [22museReducedMotion[2m > [22mshould not crash when window.matchMedia is called
 [32m✓[39m src/hooks/useReducedMotion.test.ts[2m > [22museReducedMotion[2m > [22mshould handle addEventListener being called

[31m⎯⎯⎯⎯⎯⎯[1m[7m Failed Suites 15 [27m[22m⎯⎯⎯⎯⎯⎯[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/AIServiceFactory.test.ts[2m [ src/services/AIServiceFactory.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m src/services/ChatConversationService.test.ts[2m [ src/services/ChatConversationService.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m src/services/ConsentService.test.ts[2m [ src/services/ConsentService.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m src/services/RAGService.test.ts[2m [ src/services/RAGService.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m src/services/UserProfileService.test.ts[2m [ src/services/UserProfileService.test.ts ][22m
[31m[1mReferenceError[22m: window is not defined[39m
[36m [2m❯[22m src/test/setup.ts:[2m13:23[22m[39m
    [90m 11| [39m
    [90m 12| [39m[90m// Mock window.matchMedia (not implemented in JSDOM)[39m
    [90m 13| [39m[33mObject[39m[33m.[39m[34mdefineProperty[39m(window[33m,[39m [32m'matchMedia'[39m[33m,[39m {
    [90m   | [39m                      [31m^[39m
    [90m 14| [39m  writable[33m:[39m [35mtrue[39m[33m,[39m
    [90m 15| [39m  value[33m:[39m vi[33m.[39m[34mfn[39m()[33m.[39m[34mmockImplementation[39m((query) [33m=>[39m ({

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/59]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/e2e/specs/ai-chat.e2e.test.ts[2m [ tests/e2e/specs/ai-chat.e2e.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m tests/e2e/specs/authentication.e2e.test.ts[2m [ tests/e2e/specs/authentication.e2e.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m tests/e2e/specs/case-management.e2e.test.ts[2m [ tests/e2e/specs/case-management.e2e.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m tests/e2e/specs/evidence-upload.e2e.test.ts[2m [ tests/e2e/specs/evidence-upload.e2e.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m tests/e2e/specs/facts-tracking.e2e.test.ts[2m [ tests/e2e/specs/facts-tracking.e2e.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m tests/e2e/specs/remember-me.e2e.test.ts[2m [ tests/e2e/specs/remember-me.e2e.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m tests/e2e/specs/user-journey.e2e.test.ts[2m [ tests/e2e/specs/user-journey.e2e.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "playwright" from "tests/e2e/setup/electron-setup.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36mF:/Justice Companion take 2/tests/e2e/setup/electron-setup.ts[39m:4:65
[33m  2  |  import fs from "fs";
  3  |  import path from "path";
  4  |  import { _electron as electron } from "playwright";
     |                                         ^
  5  |  import { cleanupTestDatabase, setupTestDatabase } from "./test-database.js";
  6  |  export async function launchElectronApp(options) {[39m
[90m [2m❯[22m TransformPluginContext._formatError ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.20_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49258:41[22m[39m
[90m [2m❯[22m TransformPluginContext.error ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.20_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49253:16[22m[39m
[90m [2m❯[22m normalizeUrl ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.20_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64306:23[22m[39m
[90m [2m❯[22m ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.20_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64438:39[22m[39m
[90m [2m❯[22m TransformPluginContext.transform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.20_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64365:7[22m[39m
[90m [2m❯[22m PluginContainer.transform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.20_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49099:18[22m[39m
[90m [2m❯[22m loadAndTransform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.20_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m51977:27[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ __vitest_rollup_error__: { plugin: 'vite:import-analysis', id: 'F:/Justice Companion take 2/tests/e2e/setup/electron-setup.ts', loc: { file: 'F:/Justice Companion take 2/tests/e2e/setup/electron-setup.ts', line: 4, column: 65 }, frame: '2  |  import fs from "fs";\n3  |  import path from "path";\n4  |  import { _electron as electron } from "playwright";\n   |                                         ^\n5  |  import { cleanupTestDatabase, setupTestDatabase } from "./test-database.js";\n6  |  export async function launchElectronApp(options) {' } }[39m
[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/59]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/e2e/specs/authorization.e2e.test.ts[2m [ tests/e2e/specs/authorization.e2e.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "playwright" from "tests/e2e/setup/electron-setup.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36mF:/Justice Companion take 2/tests/e2e/setup/electron-setup.ts[39m:4:65
[33m  2  |  import fs from "fs";
  3  |  import path from "path";
  4  |  import { _electron as electron } from "playwright";
     |                                         ^
  5  |  import { cleanupTestDatabase, setupTestDatabase } from "./test-database.js";
  6  |  export async function launchElectronApp(options) {[39m
[90m [2m❯[22m TransformPluginContext._formatError ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.20_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49258:41[22m[39m
[90m [2m❯[22m TransformPluginContext.error ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.20_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49253:16[22m[39m
[90m [2m❯[22m normalizeUrl ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.20_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64306:23[22m[39m
[90m [2m❯[22m ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.20_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64438:39[22m[39m
[90m [2m❯[22m TransformPluginContext.transform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.20_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m64365:7[22m[39m
[90m [2m❯[22m PluginContainer.transform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.20_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m49099:18[22m[39m
[90m [2m❯[22m loadAndTransform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.20_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-D_zLpgQd.js:[2m51977:27[22m[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22m[39m
[31m[1mSerialized Error:[22m[39m [90m{ __vitest_rollup_error__: { plugin: 'vite:import-analysis', id: 'F:/Justice Companion take 2/tests/e2e/setup/electron-setup.ts', loc: { file: 'F:/Justice Companion take 2/tests/e2e/setup/electron-setup.ts', line: 4, column: 65 }, frame: '2  |  import fs from "fs";\n3  |  import path from "path";\n4  |  import { _electron as electron } from "playwright";\n   |                                         ^\n5  |  import { cleanupTestDatabase, setupTestDatabase } from "./test-database.js";\n6  |  export async function launchElectronApp(options) {' } }[39m
[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/59]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/e2e/specs/test-1.spec.ts[2m [ tests/e2e/specs/test-1.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test() to be called here.
Most common reasons include:
- You are calling test() in a configuration file.
- You are calling test() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2m❯[22m TestTypeImpl._currentSuite node_modules/.pnpm/playwright@1.56.0/node_modules/playwright/lib/common/testType.js:[2m74:13[22m[39m
[90m [2m❯[22m TestTypeImpl._createTest node_modules/.pnpm/playwright@1.56.0/node_modules/playwright/lib/common/testType.js:[2m87:24[22m[39m
[90m [2m❯[22m Module.<anonymous> node_modules/.pnpm/playwright@1.56.0/node_modules/playwright/lib/transform/transform.js:[2m275:12[22m[39m
[36m [2m❯[22m tests/e2e/specs/test-1.spec.ts:[2m3:1[22m[39m
    [90m  1| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m  2| [39m
    [90m  3| [39m[34mtest[39m([32m'test'[39m[33m,[39m [35masync[39m ({ page }) [33m=>[39m {
    [90m   | [39m[31m^[39m
    [90m  4| [39m  [90m// Recording...[39m
    [90m  5| [39m})[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/59]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/e2e/specs/test-2.spec.ts[2m [ tests/e2e/specs/test-2.spec.ts ][22m
[31m[1mError[22m: Playwright Test did not expect test() to be called here.
Most common reasons include:
- You are calling test() in a configuration file.
- You are calling test() in a file that is imported by the configuration file.
- You have two different versions of @playwright/test. This usually happens
  when one of the dependencies in your package.json depends on @playwright/test.[39m
[90m [2m❯[22m TestTypeImpl._currentSuite node_modules/.pnpm/playwright@1.56.0/node_modules/playwright/lib/common/testType.js:[2m74:13[22m[39m
[90m [2m❯[22m TestTypeImpl._createTest node_modules/.pnpm/playwright@1.56.0/node_modules/playwright/lib/common/testType.js:[2m87:24[22m[39m
[90m [2m❯[22m Module.<anonymous> node_modules/.pnpm/playwright@1.56.0/node_modules/playwright/lib/transform/transform.js:[2m275:12[22m[39m
[36m [2m❯[22m tests/e2e/specs/test-2.spec.ts:[2m3:1[22m[39m
    [90m  1| [39m[35mimport[39m { test[33m,[39m expect } [35mfrom[39m [32m'@playwright/test'[39m[33m;[39m
    [90m  2| [39m
    [90m  3| [39m[34mtest[39m([32m'test'[39m[33m,[39m [35masync[39m ({ page }) [33m=>[39m {
    [90m   | [39m[31m^[39m
    [90m  4| [39m  [90m// Recording...[39m
    [90m  5| [39m})[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/59]⎯[22m[39m

[31m⎯⎯⎯⎯⎯⎯[1m[7m Failed Tests 44 [27m[22m⎯⎯⎯⎯⎯⎯⎯[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mError Handling[2m > [22mdoes not throw on logging failure
[31m[1mAssertionError[22m: expected "error" to be called with arguments: [ '❌ Audit logging failed:', …(1) ][90m

Received: 

[1m  1st error call:

[22m[2m  Array [[22m
[32m-   "❌ Audit logging failed:",[90m
[32m-   Any<Error>,[90m
[31m+   "[2025-10-19T12:43:27.751Z][ERROR][App] ❌ Audit logging failed: {[90m
[31m+   \"error\": {}[90m
[31m+ }",[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2m❯[22m src/services/AuditLogger.test.ts:[2m619:31[22m[39m
    [90m617| [39m
    [90m618| [39m      [90m// Verify error was logged (but suppressed from output)[39m
    [90m619| [39m      [34mexpect[39m(consoleErrorSpy)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                              [31m^[39m
    [90m620| [39m        [32m'❌ Audit logging failed:'[39m[33m,[39m
    [90m621| [39m        expect[33m.[39m[34many[39m([33mError[39m)[33m,[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/59]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mEdge Cases[2m > [22mhandles null/undefined optional fields
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mEdge Cases[2m > [22mserializes complex details objects
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mEdge Cases[2m > [22mhandles details with null value
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mEdge Cases[2m > [22mhandles empty details object
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mEdge Cases[2m > [22mhandles very long detail strings
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mEdge Cases[2m > [22mhandles special characters in fields
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mEdge Cases[2m > [22mhandles Unicode characters in details
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mAction Types[2m > [22msupports create action
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mAction Types[2m > [22msupports read action
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mAction Types[2m > [22msupports update action
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mAction Types[2m > [22msupports delete action
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mAction Types[2m > [22msupports export action
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mAction Types[2m > [22msupports decrypt action
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mSuccess and Error Tracking[2m > [22mlogs successful operations with success=true
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mSuccess and Error Tracking[2m > [22mlogs failed operations with success=false and error message
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mSuccess and Error Tracking[2m > [22mfilters successful operations only
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mSuccess and Error Tracking[2m > [22mfilters failed operations only
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mImmutability[2m > [22mcreates new log entries without modifying existing ones
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mLarge Chain Verification[2m > [22mverifies chain with 100 entries
[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mLarge Chain Verification[2m > [22mdetects tampering in middle of large chain
[31m[1mTypeError[22m: The database connection is not open[39m
[90m [2m❯[22m Database.exec node_modules/.pnpm/better-sqlite3@11.10.0/node_modules/better-sqlite3/lib/methods/wrappers.js:[2m9:14[22m[39m
[36m [2m❯[22m src/services/AuditLogger.test.ts:[2m46:8[22m[39m
    [90m 44| [39m  [34mbeforeEach[39m(() [33m=>[39m {
    [90m 45| [39m    [90m// Drop and recreate table to ensure clean state[39m
    [90m 46| [39m    db[33m.[39m[34mexec[39m([32m'DROP TABLE IF EXISTS audit_logs'[39m)[33m;[39m
    [90m   | [39m       [31m^[39m
    [90m 47| [39m    db[33m.[39m[34mexec[39m([32m`
    [90m 48| [39m      CREATE TABLE audit_logs (

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/59]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSecurity Logging[2m > [22mshould log when account is locked
[31m[1mAssertionError[22m: expected "error" to be called with arguments: [ StringContaining{…} ][90m

Received: 

[1m  1st error call:

[22m[2m  Array [[22m
[32m-   StringContaining "BRUTE FORCE DETECTED for testuser",[90m
[31m+   "[2025-10-19T12:43:54.137Z][ERROR][RateLimitService] BRUTE FORCE DETECTED for ${normalizedUsername}. Account locked for ${this.LOCK_DURATION_MS / 1000}s",[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2m❯[22m src/services/RateLimitService.test.ts:[2m229:31[22m[39m
    [90m227| [39m      }
    [90m228| [39m
    [90m229| [39m      [34mexpect[39m(consoleErrorSpy)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                              [31m^[39m
    [90m230| [39m        expect[33m.[39m[34mstringContaining[39m([32m'BRUTE FORCE DETECTED for testuser'[39m)
    [90m231| [39m      )[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/59]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSecurity Logging[2m > [22mshould log rate limit violations
[31m[1mAssertionError[22m: expected "warn" to be called with arguments: [ StringContaining{…} ][90m

Received: 

[1m  1st warn call:

[22m[2m  Array [[22m
[32m-   StringContaining "Rate limit exceeded for testuser",[90m
[31m+   "[2025-10-19T12:43:54.162Z][WARN][RateLimitService] Rate limit exceeded for ${normalizedUsername}. Attempts: ${attempt.count}, Lock time remaining: ${remainingSeconds}s",[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2m❯[22m src/services/RateLimitService.test.ts:[2m245:30[22m[39m
    [90m243| [39m      service[33m.[39m[34mcheckRateLimit[39m(username)[33m;[39m
    [90m244| [39m
    [90m245| [39m      [34mexpect[39m(consoleWarnSpy)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                             [31m^[39m
    [90m246| [39m        expect[33m.[39m[34mstringContaining[39m([32m'Rate limit exceeded for testuser'[39m)
    [90m247| [39m      )[33m;[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/59]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould show N/A for unrecorded phases
[31m[1mAssertionError[22m: expected '' to contain 'N/A'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- N/A[39m

[36m [2m❯[22m src/services/StartupMetrics.test.ts:[2m97:22[22m[39m
    [90m 95| [39m
    [90m 96| [39m      [35mconst[39m output [33m=[39m consoleSpy[33m.[39mmock[33m.[39mcalls[33m.[39m[34mmap[39m((call[33m:[39m any[]) [33m=>[39m call[[34m0[39m…
    [90m 97| [39m      [34mexpect[39m(output)[33m.[39m[34mtoContain[39m([32m'N/A'[39m)[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m 98| [39m    })[33m;[39m
    [90m 99| [39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/59]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mphase deltas[2m > [22mshould calculate phase deltas correctly
[31m[1mError[22m: Test timed out in 5000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/59]⎯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mPUBLIC Handlers[2m > [22mshould allow access without authentication
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mPUBLIC Handlers[2m > [22mshould work even with an active session
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mAUTHENTICATED Handlers[2m > [22mshould deny access without session
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mAUTHENTICATED Handlers[2m > [22mshould deny access with invalid session
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mAUTHENTICATED Handlers[2m > [22mshould allow access with valid session
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mAUTHENTICATED Handlers[2m > [22mshould deny access for inactive users
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mAUTHORIZED Handlers[2m > [22mshould check resource ownership
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mAUTHORIZED Handlers[2m > [22mshould deny access to non-owned resources
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mADMIN Handlers[2m > [22mshould deny access for non-admin users
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mADMIN Handlers[2m > [22mshould allow access for admin users
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mADMIN Handlers[2m > [22mshould apply rate limiting to admin endpoints
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mRate Limiting[2m > [22mshould enforce rate limits when enabled
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mCustom Validation[2m > [22mshould execute additional checks
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mCustom Validation[2m > [22mshould deny access if additional check fails
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mError Handling[2m > [22mshould handle handler errors gracefully
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mError Handling[2m > [22mshould not leak sensitive information in errors
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mAudit Logging[2m > [22mshould log successful authorization for sensitive operations
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mAudit Logging[2m > [22mshould log authorization failures
[31m[1m[7m FAIL [27m[22m[39m src/tests/authorization-security.test.ts[2m > [22mAuthorization Security Tests[2m > [22mBatch Operations[2m > [22mshould wrap multiple handlers at once
[31m[1mTypeError[22m: AuthorizationWrapper is not a constructor[39m
[36m [2m❯[22m src/tests/authorization-security.test.ts:[2m75:19[22m[39m
    [90m 73| [39m
    [90m 74| [39m    [90m// Initialize wrapper[39m
    [90m 75| [39m    authWrapper [33m=[39m [35mnew[39m [33mAuthorizationWrapper[39m(
    [90m   | [39m                  [31m^[39m
    [90m 76| [39m      authService[33m,[39m
    [90m 77| [39m      authMiddleware[33m,[39m

[31m[2m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/59]⎯[22m[39m

[31m⎯⎯⎯⎯⎯⎯[1m[7m Unhandled Errors [27m[22m⎯⎯⎯⎯⎯⎯[39m
[31m[1m
Vitest caught 4 unhandled errors during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.[22m[39m

[31m⎯⎯⎯⎯⎯[1m[7m Uncaught Exception [27m[22m⎯⎯⎯⎯⎯[39m
[31m[1mAssertionError[22m: expected "log" to be called at least once[39m
[90m [2m❯[22m Proxy.<anonymous> ../Justice%20Companion%20take%202/node_modules/.pnpm/@vitest+expect@2.1.9/node_modules/@vitest/expect/dist/index.js:[2m1448:13[22m[39m
[90m [2m❯[22m Proxy.<anonymous> ../Justice%20Companion%20take%202/node_modules/.pnpm/@vitest+expect@2.1.9/node_modules/@vitest/expect/dist/index.js:[2m972:17[22m[39m
[90m [2m❯[22m Proxy.methodWrapper ../Justice%20Companion%20take%202/node_modules/.pnpm/chai@5.3.3/node_modules/chai/index.js:[2m1686:25[22m[39m
[36m [2m❯[22m Timeout._onTimeout src/services/StartupMetrics.test.ts:[2m78:28[22m[39m
    [90m 76| [39m        metrics[33m.[39m[34mlogStartupMetrics[39m()[33m;[39m
    [90m 77| [39m
    [90m 78| [39m        [34mexpect[39m(consoleSpy)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m 79| [39m
    [90m 80| [39m        [90m// Check for key output strings[39m
[90m [2m❯[22m listOnTimeout node:internal/timers:[2m581:17[22m[39m
[90m [2m❯[22m processTimers node:internal/timers:[2m519:7[22m[39m

[31mThis error originated in "[1msrc/services/StartupMetrics.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
[31mThe latest test that might've caused the error is "[1mshould calculate phase deltas correctly[22m". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m

[31m⎯⎯⎯⎯⎯[1m[7m Uncaught Exception [27m[22m⎯⎯⎯⎯⎯[39m
[31m[1mAssertionError[22m: expected '' to match /\u2705|\u26A0|\u274C/[39m

[32m- Expected:[39m 
/\u2705|\u26A0|\u274C/

[31m+ Received:[39m 
""

[36m [2m❯[22m Timeout._onTimeout src/services/StartupMetrics.test.ts:[2m115:24[22m[39m
    [90m113| [39m
    [90m114| [39m        [90m// Should contain indicator symbols (checkmark, warning, or cr[39m…
    [90m115| [39m        [34mexpect[39m(output)[33m.[39m[34mtoMatch[39m([36m/\u2705|\u26A0|\u274C/[39m)[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m116| [39m      }[33m,[39m [34m50[39m)[33m;[39m
    [90m117| [39m    })[33m;[39m
[90m [2m❯[22m listOnTimeout node:internal/timers:[2m581:17[22m[39m
[90m [2m❯[22m processTimers node:internal/timers:[2m519:7[22m[39m

[31mThis error originated in "[1msrc/services/StartupMetrics.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
[31mThe latest test that might've caused the error is "[1mshould calculate phase deltas correctly[22m". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m

[31m⎯⎯⎯⎯⎯[1m[7m Uncaught Exception [27m[22m⎯⎯⎯⎯⎯[39m
[31m[1mAssertionError[22m: expected 0 to be greater than or equal to 5[39m
[36m [2m❯[22m Timeout._onTimeout src/services/StartupMetrics.test.ts:[2m253:40[22m[39m
    [90m251| [39m          [90m// Check phase deltas[39m
    [90m252| [39m          [34mexpect[39m(m[33m.[39mloadingToServices)[33m.[39m[34mtoBeGreaterThanOrEqual[39m([34m40[39m)[33m;[39m [90m// ~[39m…
    [90m253| [39m          [34mexpect[39m(m[33m.[39mservicesToHandlers)[33m.[39m[34mtoBeGreaterThanOrEqual[39m([34m5[39m)[33m;[39m [90m// ~[39m…
    [90m   | [39m                                       [31m^[39m
    [90m254| [39m          [34mexpect[39m(m[33m.[39mhandlersToMainWindow)[33m.[39m[34mtoBeGreaterThanOrEqual[39m([34m80[39m)[33m;[39m [90m/[39m…
    [90m255| [39m          [34mexpect[39m(m[33m.[39mmainWindowToNonCritical)[33m.[39m[34mtoBeGreaterThanOrEqual[39m([34m40[39m)…
[90m [2m❯[22m listOnTimeout node:internal/timers:[2m581:17[22m[39m
[90m [2m❯[22m processTimers node:internal/timers:[2m519:7[22m[39m

[31mThis error originated in "[1msrc/services/StartupMetrics.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
[31mThe latest test that might've caused the error is "[1mshould calculate phase deltas correctly[22m". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m

[31m⎯⎯⎯⎯⎯[1m[7m Uncaught Exception [27m[22m⎯⎯⎯⎯⎯[39m
[31m[1mAssertionError[22m: expected '' to contain 'Performance Recommendations'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Performance Recommendations[39m

[36m [2m❯[22m Timeout._onTimeout src/services/StartupMetrics.test.ts:[2m131:24[22m[39m
    [90m129| [39m
    [90m130| [39m        [90m// Should show recommendations[39m
    [90m131| [39m        [34mexpect[39m(output)[33m.[39m[34mtoContain[39m([32m'Performance Recommendations'[39m)[33m;[39m
    [90m   | [39m                       [31m^[39m
    [90m132| [39m      }[33m,[39m slowTime)[33m;[39m
    [90m133| [39m    })[33m;[39m
[90m [2m❯[22m listOnTimeout node:internal/timers:[2m581:17[22m[39m
[90m [2m❯[22m processTimers node:internal/timers:[2m519:7[22m[39m

[31mThis error originated in "[1msrc/services/StartupMetrics.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
[31mThe latest test that might've caused the error is "[1mshould calculate phase deltas correctly[22m". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m
[31m⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[39m

[2m Test Files [22m [1m[31m19 failed[39m[22m[2m | [22m[1m[32m55 passed[39m[22m[90m (74)[39m
[2m      Tests [22m [1m[31m44 failed[39m[22m[2m | [22m[1m[32m1423 passed[39m[22m[2m | [22m[33m1 skipped[39m[90m (1468)[39m
[2m     Errors [22m [1m[31m4 errors[39m[22m
[2m   Start at [22m 13:43:12
[2m   Duration [22m 58.36s[2m (transform 4.08s, setup 16.49s, collect 23.16s, tests 132.92s, environment 102.63s, prepare 17.71s)[22m

[1m[7m[31m FAIL [39m[27m[22m [31mTests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
c[3J[1m[7m[34m RERUN [39m[27m[22m [34m[2mtests/e2e/setup/electron-setup.ts [22m[39m

 [31m❯[39m tests/e2e/specs/test-1.spec.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m❯[39m tests/e2e/specs/test-2.spec.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m❯[39m src/services/ChatConversationService.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m❯[39m src/services/ConsentService.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m❯[39m src/services/RAGService.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m❯[39m src/services/UserProfileService.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m❯[39m src/services/AIServiceFactory.test.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstderr[2m | src/services/AuditLogger.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/services/StartupMetrics.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/services/RateLimitService.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstderr[2m | src/tests/authorization-security.test.ts
[22m[39m[LOGGER INIT] {
  [32m'import.meta.env.PROD'[39m: [33mfalse[39m,
  [32m'import.meta.env.DEV'[39m: [33mtrue[39m,
  [32m'import.meta.env.MODE'[39m: [32m'test'[39m,
  isProduction: [33mfalse[39m
}

[90mstdout[2m | src/services/StartupMetrics.test.ts[2m > [22m[2mStartupMetrics[2m > [22m[2mlogStartupMetrics[2m > [22m[2mshould show N/A for unrecorded phases
[22m[39m[2025-10-19T17:17:21.235Z][INFO][StartupMetrics] 
╔════════════════════════════════════════════════════════════╗
[2025-10-19T17:17:21.235Z][INFO][StartupMetrics] ║              STARTUP PERFORMANCE METRICS                    ║
[2025-10-19T17:17:21.235Z][INFO][StartupMetrics] ╠════════════════════════════════════════════════════════════╣
[2025-10-19T17:17:21.236Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T17:17:21.236Z][INFO][StartupMetrics] ║  Phase Timing (from app ready)                              ║
[2025-10-19T17:17:21.236Z][INFO][StartupMetrics] ║  ─────────────────────────────────                          ║
[2025-10-19T17:17:21.236Z][INFO][StartupMetrics] ║  Loading window shown:         N/A                  ║
[2025-10-19T17:17:21.236Z][INFO][StartupMetrics] ║  Critical services ready:      N/A                  ║
[2025-10-19T17:17:21.236Z][INFO][StartupMetrics] ║  Critical handlers registered: N/A                  ║
[2025-10-19T17:17:21.236Z][INFO][StartupMetrics] ║  Main window created:          N/A                  ║
[2025-10-19T17:17:21.236Z][INFO][StartupMetrics] ║  Main window shown:            N/A                  ║
[2025-10-19T17:17:21.237Z][INFO][StartupMetrics] ║  Non-critical services ready:  N/A                  ║
[2025-10-19T17:17:21.237Z][INFO][StartupMetrics] ║  All handlers registered:      N/A                  ║
[2025-10-19T17:17:21.237Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T17:17:21.237Z][INFO][StartupMetrics] ║  Phase Deltas                                                ║
[2025-10-19T17:17:21.237Z][INFO][StartupMetrics] ║  ─────────────────                                           ║
[2025-10-19T17:17:21.237Z][INFO][StartupMetrics] ║  Loading → Services:           N/A                  ║
[2025-10-19T17:17:21.237Z][INFO][StartupMetrics] ║  Services → Handlers:          N/A                  ║
[2025-10-19T17:17:21.237Z][INFO][StartupMetrics] ║  Handlers → Main Window:       N/A                  ║
[2025-10-19T17:17:21.237Z][INFO][StartupMetrics] ║  Main Window → Non-Critical:   N/A                  ║
[2025-10-19T17:17:21.237Z][INFO][StartupMetrics] ║  Non-Critical → Complete:      N/A                  ║
[2025-10-19T17:17:21.237Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T17:17:21.237Z][INFO][StartupMetrics] ║  Summary                                                     ║
[2025-10-19T17:17:21.237Z][INFO][StartupMetrics] ║  ──────────                                                  ║
[2025-10-19T17:17:21.237Z][INFO][StartupMetrics] ║  Perceived startup time:       N/A                  ║
[2025-10-19T17:17:21.237Z][INFO][StartupMetrics] ║  Total startup time:           N/A                  ║
[2025-10-19T17:17:21.238Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T17:17:21.238Z][INFO][StartupMetrics] ╚════════════════════════════════════════════════════════════╝
[2025-10-19T17:17:21.238Z][INFO][StartupMetrics] 
Excellent startup performance! Target achieved.

[90mstderr[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mRate Limiting[2m > [22m[2mshould lock account after 5 failed attempts
[22m[39m[2025-10-19T17:17:21.234Z][ERROR][RateLimitService] BRUTE FORCE DETECTED for ${normalizedUsername}. Account locked for ${this.LOCK_DURATION_MS / 1000}s
[2025-10-19T17:17:21.234Z][WARN][RateLimitService] Rate limit exceeded for ${normalizedUsername}. Attempts: ${attempt.count}, Lock time remaining: ${remainingSeconds}s

[90mstderr[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mSliding Window[2m > [22m[2mshould unlock account after lock duration expires
[22m[39m[2025-10-19T17:17:21.241Z][ERROR][RateLimitService] BRUTE FORCE DETECTED for ${normalizedUsername}. Account locked for ${this.LOCK_DURATION_MS / 1000}s
[2025-10-19T17:17:21.241Z][WARN][RateLimitService] Rate limit exceeded for ${normalizedUsername}. Attempts: ${attempt.count}, Lock time remaining: ${remainingSeconds}s

[90mstderr[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mCleanup Mechanism[2m > [22m[2mshould not clean up locked accounts prematurely
[22m[39m[2025-10-19T17:17:21.243Z][ERROR][RateLimitService] BRUTE FORCE DETECTED for ${normalizedUsername}. Account locked for ${this.LOCK_DURATION_MS / 1000}s

[90mstderr[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mHelper Methods[2m > [22m[2mshould correctly check if account is locked
[22m[39m[2025-10-19T17:17:21.263Z][ERROR][RateLimitService] BRUTE FORCE DETECTED for ${normalizedUsername}. Account locked for ${this.LOCK_DURATION_MS / 1000}s

[90mstderr[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mHelper Methods[2m > [22m[2mshould provide accurate statistics
[22m[39m[2025-10-19T17:17:21.264Z][ERROR][RateLimitService] BRUTE FORCE DETECTED for ${normalizedUsername}. Account locked for ${this.LOCK_DURATION_MS / 1000}s

[90mstderr[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle rapid successive attempts
[22m[39m[2025-10-19T17:17:21.266Z][ERROR][RateLimitService] BRUTE FORCE DETECTED for ${normalizedUsername}. Account locked for ${this.LOCK_DURATION_MS / 1000}s

[90mstderr[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mEdge Cases[2m > [22m[2mshould not increment count when already locked
[22m[39m[2025-10-19T17:17:21.267Z][ERROR][RateLimitService] BRUTE FORCE DETECTED for ${normalizedUsername}. Account locked for ${this.LOCK_DURATION_MS / 1000}s

 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mrecordPhase[2m > [22mshould record timestamps for each phase
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mrecordPhase[2m > [22mshould handle phases recorded out of order
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mgetTimestamps[2m > [22mshould return a copy of timestamps
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mgetTimestamps[2m > [22mshould include moduleLoad timestamp by default
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould log formatted metrics to console
 [31m×[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould show N/A for unrecorded phases
[31m   → expected '' to contain 'N/A'[39m
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould show performance indicators
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould show recommendations for slow startup
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mexportMetrics[2m > [22mshould export metrics as JSON
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mexportMetrics[2m > [22mshould categorize performance correctly
 [32m✓[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mformatDuration[2m > [22mshould format durations correctly
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSingleton Pattern[2m > [22mshould return the same instance
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSingleton Pattern[2m > [22mshould create new instance after reset
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mRate Limiting[2m > [22mshould allow first login attempt
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mRate Limiting[2m > [22mshould track failed attempts
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mRate Limiting[2m > [22mshould lock account after 5 failed attempts
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mRate Limiting[2m > [22mshould handle case-insensitive usernames
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mRate Limiting[2m > [22mshould clear attempts on successful login
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSliding Window[2m > [22mshould reset attempts after window expires
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSliding Window[2m > [22mshould maintain count within sliding window
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSliding Window[2m > [22mshould unlock account after lock duration expires
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mCleanup Mechanism[2m > [22mshould clean up expired entries automatically
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mCleanup Mechanism[2m > [22mshould not clean up locked accounts prematurely
 [31m×[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSecurity Logging[2m > [22mshould log when account is locked
[31m   → expected "error" to be called with arguments: [ StringContaining{…} ][90m

Received: 

[1m  1st error call:

[22m[2m  Array [[22m
[32m-   StringContaining "BRUTE FORCE DETECTED for testuser",[90m
[31m+   "[2025-10-19T17:17:21.245Z][ERROR][RateLimitService] BRUTE FORCE DETECTED for ${normalizedUsername}. Account locked for ${this.LOCK_DURATION_MS / 1000}s",[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
 [31m×[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSecurity Logging[2m > [22mshould log rate limit violations
[31m   → expected "warn" to be called with arguments: [ StringContaining{…} ][90m

Received: 

[1m  1st warn call:

[22m[2m  Array [[22m
[32m-   StringContaining "Rate limit exceeded for testuser",[90m
[31m+   "[2025-10-19T17:17:21.260Z][WARN][RateLimitService] Rate limit exceeded for ${normalizedUsername}. Attempts: ${attempt.count}, Lock time remaining: ${remainingSeconds}s",[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mHelper Methods[2m > [22mshould correctly report attempt count
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mHelper Methods[2m > [22mshould correctly check if account is locked
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mHelper Methods[2m > [22mshould provide accurate statistics
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mEdge Cases[2m > [22mshould handle empty username gracefully
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mEdge Cases[2m > [22mshould handle whitespace in usernames
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mEdge Cases[2m > [22mshould handle rapid successive attempts
 [32m✓[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mEdge Cases[2m > [22mshould not increment count when already locked
[90mstdout[2m | src/services/StartupMetrics.test.ts[2m > [22m[2mStartupMetrics[2m > [22m[2mphase deltas[2m > [22m[2mshould calculate phase deltas correctly
[22m[39m[2025-10-19T17:17:21.275Z][INFO][StartupMetrics] 
╔════════════════════════════════════════════════════════════╗
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║              STARTUP PERFORMANCE METRICS                    ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ╠════════════════════════════════════════════════════════════╣
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║  Phase Timing (from app ready)                              ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║  ─────────────────────────────────                          ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║  Loading window shown:         ✅ 2ms                ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║  Critical services ready:      ✅ 6ms                ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║  Critical handlers registered: N/A                  ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║  Main window created:          N/A                  ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║  Main window shown:            ✅ 22ms               ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║  Non-critical services ready:  N/A                  ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║  All handlers registered:      N/A                  ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║  Phase Deltas                                                ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║  ─────────────────                                           ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║  Loading → Services:           4ms                  ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║  Services → Handlers:          Error                ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║  Handlers → Main Window:       22ms                 ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║  Main Window → Non-Critical:   Error                ║
[2025-10-19T17:17:21.276Z][INFO][StartupMetrics] ║  Non-Critical → Complete:      N/A                  ║
[2025-10-19T17:17:21.277Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T17:17:21.277Z][INFO][StartupMetrics] ║  Summary                                                     ║
[2025-10-19T17:17:21.277Z][INFO][StartupMetrics] ║  ──────────                                                  ║
[2025-10-19T17:17:21.277Z][INFO][StartupMetrics] ║  Perceived startup time:       ✅ 22ms               ║
[2025-10-19T17:17:21.277Z][INFO][StartupMetrics] ║  Total startup time:           ✅ 24ms               ║
[2025-10-19T17:17:21.277Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T17:17:21.277Z][INFO][StartupMetrics] ╚════════════════════════════════════════════════════════════╝
[2025-10-19T17:17:21.277Z][INFO][StartupMetrics] 
Excellent startup performance! Target achieved.

[90mstdout[2m | src/services/StartupMetrics.test.ts[2m > [22m[2mStartupMetrics[2m > [22m[2mphase deltas[2m > [22m[2mshould calculate phase deltas correctly
[22m[39m[2025-10-19T17:17:21.303Z][INFO][StartupMetrics] 
╔════════════════════════════════════════════════════════════╗
[2025-10-19T17:17:21.303Z][INFO][StartupMetrics] ║              STARTUP PERFORMANCE METRICS                    ║
[2025-10-19T17:17:21.303Z][INFO][StartupMetrics] ╠════════════════════════════════════════════════════════════╣
[2025-10-19T17:17:21.303Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T17:17:21.303Z][INFO][StartupMetrics] ║  Phase Timing (from app ready)                              ║
[2025-10-19T17:17:21.303Z][INFO][StartupMetrics] ║  ─────────────────────────────────                          ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║  Loading window shown:         ✅ 30ms               ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║  Critical services ready:      ✅ 6ms                ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║  Critical handlers registered: N/A                  ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║  Main window created:          N/A                  ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║  Main window shown:            ✅ 52ms               ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║  Non-critical services ready:  N/A                  ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║  All handlers registered:      N/A                  ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║  Phase Deltas                                                ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║  ─────────────────                                           ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║  Loading → Services:           Error                ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║  Services → Handlers:          Error                ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║  Handlers → Main Window:       52ms                 ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║  Main Window → Non-Critical:   Error                ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║  Non-Critical → Complete:      N/A                  ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║  Summary                                                     ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║  ──────────                                                  ║
[2025-10-19T17:17:21.304Z][INFO][StartupMetrics] ║  Perceived startup time:       ✅ 52ms               ║
[2025-10-19T17:17:21.305Z][INFO][StartupMetrics] ║  Total startup time:           ✅ 52ms               ║
[2025-10-19T17:17:21.305Z][INFO][StartupMetrics] ║                                                              ║
[2025-10-19T17:17:21.305Z][INFO][StartupMetrics] ╚════════════════════════════════════════════════════════════╝
[2025-10-19T17:17:21.305Z][INFO][StartupMetrics] 
Excellent startup performance! Target achieved.

node:events:502
      throw er; // Unhandled 'error' event
      ^

Error: Worker exited unexpectedly
    at ChildProcess.onUnexpectedExit (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/tinypool@1.1.1/node_modules/tinypool/dist/index.js:118:30)
    at ChildProcess.emit (node:events:536:35)
    at ChildProcess._handle.onexit (node:internal/child_process:293:12)
Emitted 'error' event on Tinypool instance at:
    at EventEmitterReferencingAsyncResource.runInAsyncScope (node:async_hooks:206:9)
    at Tinypool.emit (node:events:170:18)
    at file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/tinypool@1.1.1/node_modules/tinypool/dist/index.js:594:30
    at ChildProcess.<anonymous> (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/tinypool@1.1.1/node_modules/tinypool/dist/index.js:162:34)
    at ChildProcess.emit (node:events:524:28)
    at ChildProcess.onUnexpectedExit (file:///F:/Justice%20Companion%20take%202/node_modules/.pnpm/tinypool@1.1.1/node_modules/tinypool/dist/index.js:118:16)
    at ChildProcess.emit (node:events:536:35)
    at ChildProcess._handle.onexit (node:internal/child_process:293:12)

Node.js v20.19.1
 ELIFECYCLE  Test failed. See above for more details.
