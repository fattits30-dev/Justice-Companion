
> justice-companion@1.0.0 pretest F:\Justice Companion take 2
> pnpm rebuild:node


> justice-companion@1.0.0 rebuild:node F:\Justice Companion take 2
> node scripts/rebuild-for-node.js

ðŸ”¨ Rebuilding better-sqlite3-multiple-ciphers for Node.js...
   Node.js version: v20.18.0
   Rebuilding for Node.js runtime...
gyp info it worked if it ends with ok
gyp info using node-gyp@8.4.1
gyp info using node@20.18.0 | win32 | x64
gyp info find Python using Python version 3.11.9 found at "C:\Python311\python.exe"
gyp info find VS using VS2019 (16.11.36422.26) found at:
gyp info find VS "C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools"
gyp info find VS run with --verbose for detailed information
gyp info spawn C:\Python311\python.exe
gyp info spawn args [
gyp info spawn args   'F:\\Justice Companion take 2\\node_modules\\.pnpm\\node-gyp@8.4.1\\node_modules\\node-gyp\\gyp\\gyp_main.py',
gyp info spawn args   'binding.gyp',
gyp info spawn args   '-f',
gyp info spawn args   'msvs',
gyp info spawn args   '-I',
gyp info spawn args   'F:\\Justice Companion take 2\\node_modules\\better-sqlite3-multiple-ciphers\\build\\config.gypi',
gyp info spawn args   '-I',
gyp info spawn args   'F:\\Justice Companion take 2\\node_modules\\.pnpm\\node-gyp@8.4.1\\node_modules\\node-gyp\\addon.gypi',
gyp info spawn args   '-I',
gyp info spawn args   'C:\\Users\\sava6\\AppData\\Local\\node-gyp\\Cache\\20.18.0\\include\\node\\common.gypi',
gyp info spawn args   '-Dlibrary=shared_library',
gyp info spawn args   '-Dvisibility=default',
gyp info spawn args   '-Dnode_root_dir=C:\\Users\\sava6\\AppData\\Local\\node-gyp\\Cache\\20.18.0',
gyp info spawn args   '-Dnode_gyp_dir=F:\\Justice Companion take 2\\node_modules\\.pnpm\\node-gyp@8.4.1\\node_modules\\node-gyp',
gyp info spawn args   '-Dnode_lib_file=C:\\\\Users\\\\sava6\\\\AppData\\\\Local\\\\node-gyp\\\\Cache\\\\20.18.0\\\\<(target_arch)\\\\node.lib',
gyp info spawn args   '-Dmodule_root_dir=F:\\Justice Companion take 2\\node_modules\\better-sqlite3-multiple-ciphers',
gyp info spawn args   '-Dnode_engine=v8',
gyp info spawn args   '--depth=.',
gyp info spawn args   '--no-parallel',
gyp info spawn args   '--generator-output',
gyp info spawn args   'F:\\Justice Companion take 2\\node_modules\\better-sqlite3-multiple-ciphers\\build',
gyp info spawn args   '-Goutput_dir=.'
gyp info spawn args ]
gyp info spawn C:\Program Files (x86)\Microsoft Visual Studio\2019\BuildTools\MSBuild\Current\Bin\MSBuild.exe
gyp info spawn args [
gyp info spawn args   'build/binding.sln',
gyp info spawn args   '/clp:Verbosity=minimal',
gyp info spawn args   '/nologo',
gyp info spawn args   '/p:Configuration=Release;Platform=x64'
gyp info spawn args ]
Building the projects in this solution one at a time. To enable parallel build, please add the "-m" switch.
  copy_builtin_sqlite3
  sqlite3.c
F:\Justice Companion take 2\node_modules\better-sqlite3-multiple-ciphers\build\Release\obj\global_intermediate\sqlite3\sqlite3.c(285834,79): warning C4197: 'volatile const uint8_t *volatile ': top-level volatile in cast is ignored [F:\Justice Companion take 2\node_modules\better-sqlite3-multiple-ciphers\build\deps\sqlite3.vcxproj]
F:\Justice Companion take 2\node_modules\better-sqlite3-multiple-ciphers\build\Release\obj\global_intermediate\sqlite3\sqlite3.c(285835,79): warning C4197: 'volatile const uint8_t *volatile ': top-level volatile in cast is ignored [F:\Justice Companion take 2\node_modules\better-sqlite3-multiple-ciphers\build\deps\sqlite3.vcxproj]
  win_delay_load_hook.cc
  sqlite3.vcxproj -> F:\Justice Companion take 2\node_modules\better-sqlite3-multiple-ciphers\build\Release\\sqlite3.lib
cl : command line warning D9025: overriding '/std:c++17' with '/std:c++20' [F:\Justice Companion take 2\node_modules\better-sqlite3-multiple-ciphers\build\better_sqlite3.vcxproj]
  better_sqlite3.cpp
cl : command line warning D9025: overriding '/std:c++17' with '/std:c++20' [F:\Justice Companion take 2\node_modules\better-sqlite3-multiple-ciphers\build\better_sqlite3.vcxproj]
  win_delay_load_hook.cc
     Creating library F:\Justice Companion take 2\node_modules\better-sqlite3-multiple-ciphers\build\Release\better_sqlite3.lib and object F:\Justice Companion take 2\node_modules\better-sqlite3-multiple-ciphers\build\Release\better_sqlite3.exp
  Generating code
  Previous IPDB not found, fall back to full compilation.
  All 5610 functions were compiled because no usable IPDB/IOBJ from previous compilation was found.
  Finished generating code
  better_sqlite3.vcxproj -> F:\Justice Companion take 2\node_modules\better-sqlite3-multiple-ciphers\build\Release\\better_sqlite3.node
  test_extension.c
  win_delay_load_hook.cc
     Creating library F:\Justice Companion take 2\node_modules\better-sqlite3-multiple-ciphers\build\Release\test_extension.lib and object F:\Justice Companion take 2\node_modules\better-sqlite3-multiple-ciphers\build\Release\test_extension.exp
  Generating code
  Previous IPDB not found, fall back to full compilation.
  All 3 functions were compiled because no usable IPDB/IOBJ from previous compilation was found.
  Finished generating code
  test_extension.vcxproj -> F:\Justice Companion take 2\node_modules\better-sqlite3-multiple-ciphers\build\Release\\test_extension.node
gyp info ok 
âœ… Successfully rebuilt better-sqlite3-multiple-ciphers for Node.js
   Tests can now run with: pnpm test

> justice-companion@1.0.0 test F:\Justice Companion take 2
> vitest "--run"

[33mThe CJS build of Vite's Node API is deprecated. See https://vite.dev/guide/troubleshooting.html#vite-cjs-node-api-deprecated for more details.[39m

[1m[7m[36m RUN [39m[27m[22m [36mv2.1.9 [39m[90mF:/Justice Companion take 2[39m

 [32mâœ“[39m src/electron-ipc-authorization.test.ts [2m([22m[2m30 tests[22m[2m)[22m[90m 164[2mms[22m[39m
 [31mâ¯[39m src/services/AuditLogger.e2e.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [32mâœ“[39m src/services/SecureStorageService.test.ts [2m([22m[2m75 tests[22m[2m)[22m[33m 804[2mms[22m[39m
 [32mâœ“[39m src/services/export/ExportService.test.ts [2m([22m[2m15 tests[22m[2m)[22m[33m 333[2mms[22m[39m
 [32mâœ“[39m src/electron-ipc-handlers.test.ts [2m([22m[2m90 tests[22m[2m)[22m[33m 1357[2mms[22m[39m
 [32mâœ“[39m src/middleware/AuthorizationMiddleware.test.ts [2m([22m[2m39 tests[22m[2m)[22m[33m 321[2mms[22m[39m
 [32mâœ“[39m src/services/EncryptionService.test.ts [2m([22m[2m48 tests[22m[2m)[22m[33m 380[2mms[22m[39m
 [2m[90mâ†“[39m[22m src/services/BulkOperationService.test.ts [2m([22m[2m13 tests[22m[2m | [22m[33m13 skipped[39m[2m)[22m
 [32mâœ“[39m src/repositories/FactsRepositories.test.ts [2m([22m[2m14 tests[22m[2m)[22m[33m 306[2mms[22m[39m
[90mstderr[2m | src/services/KeyManager.test.ts[2m > [22m[2mKeyManager - Encryption Key Security[2m > [22m[2mmigrateFromEnv() - Migrate from .env[2m > [22m[2mshould migrate valid key from .env to safeStorage
[22m[39m[KeyManager] Key migrated from .env to safeStorage
[KeyManager] IMPORTANT: Remove ENCRYPTION_KEY_BASE64 from .env file

[90mstderr[2m | src/services/KeyManager.test.ts[2m > [22m[2mKeyManager - Encryption Key Security[2m > [22m[2mmigrateFromEnv() - Migrate from .env[2m > [22m[2mshould set file permissions to 0o600 (read/write owner only)
[22m[39m[KeyManager] Key migrated from .env to safeStorage
[KeyManager] IMPORTANT: Remove ENCRYPTION_KEY_BASE64 from .env file

[90mstderr[2m | src/services/KeyManager.test.ts[2m > [22m[2mKeyManager - Encryption Key Security[2m > [22m[2mgenerateNewKey() - Generate Encryption Key[2m > [22m[2mshould generate 32-byte key
[22m[39m[KeyManager] New encryption key generated and stored

[90mstderr[2m | src/services/KeyManager.test.ts[2m > [22m[2mKeyManager - Encryption Key Security[2m > [22m[2mgenerateNewKey() - Generate Encryption Key[2m > [22m[2mshould encrypt and store generated key
[22m[39m[KeyManager] New encryption key generated and stored

[90mstderr[2m | src/services/KeyManager.test.ts[2m > [22m[2mKeyManager - Encryption Key Security[2m > [22m[2mgenerateNewKey() - Generate Encryption Key[2m > [22m[2mshould cache generated key
[22m[39m[KeyManager] New encryption key generated and stored

[90mstderr[2m | src/services/KeyManager.test.ts[2m > [22m[2mKeyManager - Encryption Key Security[2m > [22m[2mgenerateNewKey() - Generate Encryption Key[2m > [22m[2mshould generate cryptographically random keys
[22m[39m[KeyManager] New encryption key generated and stored
[KeyManager] New encryption key generated and stored

[90mstderr[2m | src/services/KeyManager.test.ts[2m > [22m[2mKeyManager - Encryption Key Security[2m > [22m[2mrotateKey() - Key Rotation[2m > [22m[2mshould backup old key before rotation
[22m[39m[KeyManager] Old key backed up to: C:\Users\sava6\AppData\Local\Temp\keymanager-test-HhqoKL\.encryption-key.backup.1762724151559
[KeyManager] New encryption key generated and stored

[90mstderr[2m | src/services/KeyManager.test.ts[2m > [22m[2mKeyManager - Encryption Key Security[2m > [22m[2mrotateKey() - Key Rotation[2m > [22m[2mshould generate new key after backup
[22m[39m[KeyManager] Old key backed up to: C:\Users\sava6\AppData\Local\Temp\keymanager-test-Ro5d5a\.encryption-key.backup.1762724151572
[KeyManager] New encryption key generated and stored

[90mstderr[2m | src/services/KeyManager.test.ts[2m > [22m[2mKeyManager - Encryption Key Security[2m > [22m[2mrotateKey() - Key Rotation[2m > [22m[2mshould handle missing old key gracefully
[22m[39m[KeyManager] New encryption key generated and stored

[90mstderr[2m | src/services/KeyManager.test.ts[2m > [22m[2mKeyManager - Encryption Key Security[2m > [22m[2mrotateKey() - Key Rotation[2m > [22m[2mshould include timestamp in backup filename
[22m[39m[KeyManager] Old key backed up to: C:\Users\sava6\AppData\Local\Temp\keymanager-test-a6G7aQ\.encryption-key.backup.1762724151615
[KeyManager] New encryption key generated and stored

[90mstderr[2m | src/services/KeyManager.test.ts[2m > [22m[2mKeyManager - Encryption Key Security[2m > [22m[2mSecurity Properties[2m > [22m[2mshould never store key in plaintext on disk
[22m[39m[KeyManager] New encryption key generated and stored

[90mstderr[2m | src/services/KeyManager.test.ts[2m > [22m[2mKeyManager - Encryption Key Security[2m > [22m[2mSecurity Properties[2m > [22m[2mshould use OS-level encryption for all key operations
[22m[39m[KeyManager] New encryption key generated and stored

[90mstderr[2m | src/services/KeyManager.test.ts[2m > [22m[2mKeyManager - Encryption Key Security[2m > [22m[2mSecurity Properties[2m > [22m[2mshould enforce 32-byte key length consistently
[22m[39m[KeyManager] Key migrated from .env to safeStorage
[KeyManager] IMPORTANT: Remove ENCRYPTION_KEY_BASE64 from .env file

[90mstderr[2m | src/services/KeyManager.test.ts[2m > [22m[2mKeyManager - Encryption Key Security[2m > [22m[2mSecurity Properties[2m > [22m[2mshould protect key file with restrictive permissions
[22m[39m[KeyManager] New encryption key generated and stored

[90mstderr[2m | src/services/KeyManager.test.ts[2m > [22m[2mKeyManager - Encryption Key Security[2m > [22m[2mIntegration Scenarios[2m > [22m[2mshould handle complete migration workflow
[22m[39m[KeyManager] Key migrated from .env to safeStorage
[KeyManager] IMPORTANT: Remove ENCRYPTION_KEY_BASE64 from .env file

[90mstderr[2m | src/services/KeyManager.test.ts[2m > [22m[2mKeyManager - Encryption Key Security[2m > [22m[2mIntegration Scenarios[2m > [22m[2mshould handle key rotation workflow
[22m[39m[KeyManager] Old key backed up to: C:\Users\sava6\AppData\Local\Temp\keymanager-test-iiQsg9\.encryption-key.backup.1762724151826
[KeyManager] New encryption key generated and stored

 [32mâœ“[39m src/services/KeyManager.test.ts [2m([22m[2m36 tests[22m[2m)[22m[33m 579[2mms[22m[39m
 [32mâœ“[39m src/utils/cursor-pagination.test.ts [2m([22m[2m87 tests[22m[2m)[22m[33m 631[2mms[22m[39m
[90mstdout[2m | src/services/AuthenticationService.test.ts
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/AuditLogger.test.ts[2m > [22m[2mAuditLogger
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuditLogger.test.ts[2m > [22m[2mAuditLogger[2m > [22m[2mError Handling[2m > [22m[2mdoes not throw on logging failure
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.
[31merror[39m App

 [31mâ¯[39m src/services/AuditLogger.test.ts [2m([22m[2m52 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 834[2mms[22m[39m
[31m   [31mÃ—[31m AuditLogger[2m > [22mError Handling[2m > [22mdoes not throw on logging failure[90m 82[2mms[22m[31m[39m
[31m     â†’ expected "error" to be called at least once[39m
[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mregister()[2m > [22m[2mshould register a new user with valid credentials
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mregister()[2m > [22m[2mshould enforce minimum password length (12 chars)
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mregister()[2m > [22m[2mshould require at least one uppercase letter
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mregister()[2m > [22m[2mshould require at least one lowercase letter
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mregister()[2m > [22m[2mshould require at least one number
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mregister()[2m > [22m[2mshould reject duplicate username
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mregister()[2m > [22m[2mshould reject duplicate email
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mregister()[2m > [22m[2mshould generate unique salt for each user
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mregister()[2m > [22m[2mshould log registration event
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mcreate[2m > [22m[2mshould create a case fact with encrypted content
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mcreate[2m > [22m[2mshould create case facts with different categories
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mcreate[2m > [22m[2mshould create case facts with different importance levels
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mcreate[2m > [22m[2mshould audit case fact creation
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mfindById[2m > [22m[2mshould find case fact by ID and decrypt content
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mfindById[2m > [22m[2mshould return null for non-existent ID
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mfindById[2m > [22m[2mshould audit content access
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mfindByCaseId[2m > [22m[2mshould find all case facts for a case ordered by importance
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mfindByCaseId[2m > [22m[2mshould return empty array for case with no facts
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mfindByCaseId[2m > [22m[2mshould audit bulk content access
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mfindByCategory[2m > [22m[2mshould find case facts by category
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mfindByCategory[2m > [22m[2mshould return empty array for category with no facts
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mfindByCategory[2m > [22m[2mshould audit filtered content access
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mfindByImportance[2m > [22m[2mshould find case facts by importance level
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mfindByImportance[2m > [22m[2mshould return empty array for importance level with no facts
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mupdate[2m > [22m[2mshould update fact content with re-encryption
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mupdate[2m > [22m[2mshould update fact category and importance
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mupdate[2m > [22m[2mshould return null for non-existent ID
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mupdate[2m > [22m[2mshould audit fact updates
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mdelete[2m > [22m[2mshould delete case fact
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mdelete[2m > [22m[2mshould return false for non-existent ID
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mdelete[2m > [22m[2mshould audit fact deletion
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mbackward compatibility[2m > [22m[2mshould handle legacy plaintext data
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseFactsRepository.test.ts[2m > [22m[2mCaseFactsRepository[2m > [22m[2mCASCADE DELETE[2m > [22m[2mshould delete case facts when case is deleted
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [32mâœ“[39m src/repositories/CaseFactsRepository.test.ts [2m([22m[2m24 tests[22m[2m)[22m[33m 1052[2mms[22m[39m
[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mlogin()[2m > [22m[2mshould login with valid credentials
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mlogin()[2m > [22m[2mshould create session with 24-hour expiration
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mlogin()[2m > [22m[2mshould reject login with invalid username
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mlogin()[2m > [22m[2mshould reject login with invalid password
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mlogin()[2m > [22m[2mshould reject login for inactive user
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mlogin()[2m > [22m[2mshould update last login timestamp
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [31mâ¯[39m src/services/TagService.test.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mlogin()[2m > [22m[2mshould include IP address in session if provided
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mlogin()[2m > [22m[2mshould log successful login
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [31mâ¯[39m src/shared/infrastructure/events/EventBus.test.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mlogin()[2m > [22m[2mshould log failed login attempts
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mlogin()[2m > [22m[2mshould use timing-safe password comparison
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mlogout()[2m > [22m[2mshould delete session on logout
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mBasic Operations[2m > [22m[2mshould cache and retrieve values
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mBasic Operations[2m > [22m[2mshould handle cache misses correctly
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mBasic Operations[2m > [22m[2mshould invalidate specific cache entries
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mBasic Operations[2m > [22m[2mshould clear all caches
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mNamed Caches[2m > [22m[2mshould use different caches for different names
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mNamed Caches[2m > [22m[2mshould apply different TTLs to different caches
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mPattern Invalidation[2m > [22m[2mshould invalidate keys matching pattern with wildcard
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mPattern Invalidation[2m > [22m[2mshould handle complex patterns
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mTTL and Eviction[2m > [22m[2mshould respect custom TTL for entries
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mlogout()[2m > [22m[2mshould log logout event
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mTTL and Eviction[2m > [22m[2mshould evict LRU entries when cache is full
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default
[CacheService] Initialized with caches: tiny

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mFeature Flag[2m > [22m[2mshould bypass cache when disabled via environment variable
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default
[CacheService] Cache disabled via feature flag

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mFeature Flag[2m > [22m[2mshould toggle cache at runtime
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mStatistics and Monitoring[2m > [22m[2mshould track hit rate accurately
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mStatistics and Monitoring[2m > [22m[2mshould reset statistics
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mStatistics and Monitoring[2m > [22m[2mshould provide inspection capabilities
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mError Handling[2m > [22m[2mshould fall back to fetch on cache errors
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mError Handling[2m > [22m[2mshould handle fetch function errors
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mPreloading[2m > [22m[2mshould preload multiple entries efficiently
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mSingleton Pattern[2m > [22m[2mshould return the same instance from getCacheService
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default
[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mSingleton Pattern[2m > [22m[2mshould reset singleton with resetCacheService
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default
[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default
[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mMemory Management[2m > [22m[2mshould track memory utilization
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default
[CacheService] Initialized with caches: memory-test

[90mstdout[2m | src/services/CacheService.test.ts[2m > [22m[2mCacheService[2m > [22m[2mMemory Management[2m > [22m[2mshould not leak memory when entries expire
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default
[CacheService] Initialized with caches: leak-test

 [32mâœ“[39m src/services/CacheService.test.ts [2m([22m[2m22 tests[22m[2m)[22m[33m 545[2mms[22m[39m
[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mlogout()[2m > [22m[2mshould handle logout of non-existent session gracefully
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mcreate[2m > [22m[2mshould create a user fact with encrypted content
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mcreate[2m > [22m[2mshould create user facts with different types
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mcreate[2m > [22m[2mshould audit user fact creation
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mfindById[2m > [22m[2mshould find user fact by ID and decrypt content
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mfindById[2m > [22m[2mshould return null for non-existent ID
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mfindById[2m > [22m[2mshould audit content access when decrypting
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mfindByCaseId[2m > [22m[2mshould find all user facts for a case
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mfindByCaseId[2m > [22m[2mshould return empty array for case with no facts
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mfindByCaseId[2m > [22m[2mshould audit bulk content access
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mfindByType[2m > [22m[2mshould find user facts by type
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mfindByType[2m > [22m[2mshould return empty array for type with no facts
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mfindByType[2m > [22m[2mshould audit filtered content access
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mupdate[2m > [22m[2mshould update fact content with re-encryption
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mupdate[2m > [22m[2mshould update fact type
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mupdate[2m > [22m[2mshould update both content and type
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mupdate[2m > [22m[2mshould audit update operation
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mdelete[2m > [22m[2mshould delete user fact
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mdelete[2m > [22m[2mshould return false for non-existent fact
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mdelete[2m > [22m[2mshould audit delete operation
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mbackward compatibility[2m > [22m[2mshould handle legacy plaintext data
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/UserFactsRepository.test.ts[2m > [22m[2mUserFactsRepository[2m > [22m[2mCASCADE DELETE[2m > [22m[2mshould delete user facts when case is deleted
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [32mâœ“[39m src/repositories/UserFactsRepository.test.ts [2m([22m[2m21 tests[22m[2m)[22m[33m 918[2mms[22m[39m
[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mvalidateSession()[2m > [22m[2mshould return user for valid session
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.test.ts
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mvalidateSession()[2m > [22m[2mshould return null for null session ID
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2misAvailable[2m > [22m[2mshould return false when encryption is not available
[22m[39m[33mwarn[39m SessionPersistence

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2misAvailable[2m > [22m[2mshould handle errors gracefully
[22m[39m[31merror[39m SessionPersistence

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2misAvailable[2m > [22m[2mshould return false when safeStorage API is not available
[22m[39m[33mwarn[39m SessionPersistence

[90mstdout[2m | src/repositories/ChatConversationRepository.paginated.test.ts[2m > [22m[2mChatConversationRepository - Cursor Pagination
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/ChatConversationRepository.paginated.test.ts[2m > [22m[2mChatConversationRepository - Cursor Pagination[2m > [22m[2mPerformance comparison[2m > [22m[2mshould be more memory efficient than findWithMessages
[22m[39mPaginated: 10 messages
Non-paginated: 100 messages
Memory reduction: 90.0%

[90mstdout[2m | src/repositories/ChatConversationRepository.paginated.test.ts[2m > [22m[2mChatConversationRepository - Cursor Pagination[2m > [22m[2mPerformance comparison[2m > [22m[2mshould handle very large conversations gracefully
[22m[39mQuery with 1000 total messages completed in 2ms

 [32mâœ“[39m src/repositories/ChatConversationRepository.paginated.test.ts [2m([22m[2m10 tests[22m[2m)[22m[33m 1123[2mms[22m[39m
   [33m[2mâœ“[22m[39m ChatConversationRepository - Cursor Pagination[2m > [22mPerformance comparison[2m > [22mshould handle very large conversations gracefully [33m802[2mms[22m[39m
[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mvalidateSession()[2m > [22m[2mshould return null for non-existent session
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mstoreSessionId[2m > [22m[2mshould reject invalid session ID format
[22m[39m[31merror[39m SessionPersistence
[31merror[39m SessionPersistence
[31merror[39m SessionPersistence
[31merror[39m SessionPersistence
[31merror[39m SessionPersistence
[31merror[39m SessionPersistence
[31merror[39m SessionPersistence

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mstoreSessionId[2m > [22m[2mshould throw error when encryption is not available
[22m[39m[33mwarn[39m SessionPersistence
[31merror[39m SessionPersistence

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mstoreSessionId[2m > [22m[2mshould clean up file on write error
[22m[39m[31merror[39m SessionPersistence

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mstoreSessionId[2m > [22m[2mshould handle cleanup errors gracefully
[22m[39m[31merror[39m SessionPersistence

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mretrieveSessionId[2m > [22m[2mshould return null when encryption is not available
[22m[39m[33mwarn[39m SessionPersistence
[33mwarn[39m SessionPersistence

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mretrieveSessionId[2m > [22m[2mshould return null and clean up when file is empty
[22m[39m[33mwarn[39m SessionPersistence

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mretrieveSessionId[2m > [22m[2mshould return null and clean up when decrypted ID is invalid
[22m[39m[31merror[39m SessionPersistence

[90mstdout[2m | src/services/gdpr/Gdpr.integration.test.ts[2m > [22m[2mGDPR Integration Tests[2m > [22m[2mArticle 20: Data Portability (Export)[2m > [22m[2mshould export all user data from empty database
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/gdpr/Gdpr.integration.test.ts[2m > [22m[2mGDPR Integration Tests[2m > [22m[2mArticle 20: Data Portability (Export)[2m > [22m[2mshould export user data with decryption of encrypted fields
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/gdpr/Gdpr.integration.test.ts[2m > [22m[2mGDPR Integration Tests[2m > [22m[2mArticle 20: Data Portability (Export)[2m > [22m[2mshould export all 15 tables with correct counts
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/gdpr/Gdpr.integration.test.ts[2m > [22m[2mGDPR Integration Tests[2m > [22m[2mArticle 20: Data Portability (Export)[2m > [22m[2mshould save export to disk
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mretrieveSessionId[2m > [22m[2mshould handle corrupted files gracefully
[22m[39m[31merror[39m SessionPersistence
[33mwarn[39m SessionPersistence

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mretrieveSessionId[2m > [22m[2mshould handle read errors gracefully
[22m[39m[31merror[39m SessionPersistence

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mvalidateSession()[2m > [22m[2mshould return null and delete expired session
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mgetSessionMetadata[2m > [22m[2mshould include encryption availability status
[22m[39m[33mwarn[39m SessionPersistence

[90mstdout[2m | src/services/SessionPersistenceService.test.ts[2m > [22m[2mSessionPersistenceService[2m > [22m[2mSecurity tests[2m > [22m[2mshould validate UUID v4 format strictly
[22m[39m[31merror[39m SessionPersistence
[31merror[39m SessionPersistence
[31merror[39m SessionPersistence
[31merror[39m SessionPersistence

 [32mâœ“[39m src/services/SessionPersistenceService.test.ts [2m([22m[2m31 tests[22m[2m)[22m[33m 1321[2mms[22m[39m
   [33m[2mâœ“[22m[39m SessionPersistenceService[2m > [22misAvailable[2m > [22mshould return true when encryption is available [33m686[2mms[22m[39m
[90mstdout[2m | src/services/gdpr/Gdpr.integration.test.ts[2m > [22m[2mGDPR Integration Tests[2m > [22m[2mArticle 20: Data Portability (Export)[2m > [22m[2mshould create audit log for export
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/gdpr/Gdpr.integration.test.ts[2m > [22m[2mGDPR Integration Tests[2m > [22m[2mArticle 17: Right to Erasure (Delete)[2m > [22m[2mshould delete all user data except audit logs and consents
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/gdpr/Gdpr.integration.test.ts[2m > [22m[2mGDPR Integration Tests[2m > [22m[2mArticle 17: Right to Erasure (Delete)[2m > [22m[2mshould require explicit confirmation
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/gdpr/Gdpr.integration.test.ts[2m > [22m[2mGDPR Integration Tests[2m > [22m[2mArticle 17: Right to Erasure (Delete)[2m > [22m[2mshould export before delete when requested
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mchangePassword()[2m > [22m[2mshould change password successfully
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.test.ts[2m > [22m[2mEvidenceRepository with Encryption[2m > [22m[2mEncryption on Write Operations[2m > [22m[2mshould store encrypted evidence content in database
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.test.ts[2m > [22m[2mEvidenceRepository with Encryption[2m > [22m[2mEncryption on Write Operations[2m > [22m[2mshould store file path without encryption
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.test.ts[2m > [22m[2mEvidenceRepository with Encryption[2m > [22m[2mEncryption on Write Operations[2m > [22m[2mshould update and encrypt evidence content
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.test.ts[2m > [22m[2mEvidenceRepository with Encryption[2m > [22m[2mEncryption on Write Operations[2m > [22m[2mshould handle null content without encryption
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.test.ts[2m > [22m[2mEvidenceRepository with Encryption[2m > [22m[2mDecryption on Read Operations[2m > [22m[2mshould decrypt evidence content on retrieval
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.test.ts[2m > [22m[2mEvidenceRepository with Encryption[2m > [22m[2mDecryption on Read Operations[2m > [22m[2mshould decrypt all evidence content in findByCaseId
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.test.ts[2m > [22m[2mEvidenceRepository with Encryption[2m > [22m[2mDecryption on Read Operations[2m > [22m[2mshould decrypt all evidence content in findAll
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.test.ts[2m > [22m[2mEvidenceRepository with Encryption[2m > [22m[2mDecryption on Read Operations[2m > [22m[2mshould filter by evidence type and decrypt
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.test.ts[2m > [22m[2mEvidenceRepository with Encryption[2m > [22m[2mBackward Compatibility[2m > [22m[2mshould handle legacy plaintext content
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.test.ts[2m > [22m[2mEvidenceRepository with Encryption[2m > [22m[2mEncryption Security Properties[2m > [22m[2mshould use unique IVs for same content encrypted multiple times
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.test.ts[2m > [22m[2mEvidenceRepository with Encryption[2m > [22m[2mEncryption Security Properties[2m > [22m[2mshould fail decryption with wrong key
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.test.ts[2m > [22m[2mEvidenceRepository with Encryption[2m > [22m[2mRound-Trip Testing[2m > [22m[2mshould successfully encrypt and decrypt unicode characters
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.test.ts[2m > [22m[2mEvidenceRepository with Encryption[2m > [22m[2mRound-Trip Testing[2m > [22m[2mshould handle large evidence content (100KB+)
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.test.ts[2m > [22m[2mEvidenceRepository with Encryption[2m > [22m[2mRound-Trip Testing[2m > [22m[2mshould handle special characters in evidence
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.test.ts[2m > [22m[2mEvidenceRepository with Encryption[2m > [22m[2mStatistics and Counting[2m > [22m[2mshould count evidence by case correctly
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.test.ts[2m > [22m[2mEvidenceRepository with Encryption[2m > [22m[2mStatistics and Counting[2m > [22m[2mshould count evidence by type correctly
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [32mâœ“[39m src/repositories/EvidenceRepository.test.ts [2m([22m[2m16 tests[22m[2m)[22m[33m 1076[2mms[22m[39m
[90mstdout[2m | src/services/gdpr/Gdpr.integration.test.ts[2m > [22m[2mGDPR Integration Tests[2m > [22m[2mArticle 17: Right to Erasure (Delete)[2m > [22m[2mshould respect foreign key constraints
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/gdpr/Gdpr.integration.test.ts[2m > [22m[2mGDPR Integration Tests[2m > [22m[2mArticle 17: Right to Erasure (Delete)[2m > [22m[2mshould create audit log for deletion
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/gdpr/Gdpr.integration.test.ts[2m > [22m[2mGDPR Integration Tests[2m > [22m[2mRate Limiting[2m > [22m[2mshould allow 5 exports per 24 hours
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/gdpr/Gdpr.integration.test.ts[2m > [22m[2mGDPR Integration Tests[2m > [22m[2mRate Limiting[2m > [22m[2mshould allow 1 deletion per 30 days
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/gdpr/Gdpr.integration.test.ts[2m > [22m[2mGDPR Integration Tests[2m > [22m[2mRate Limiting[2m > [22m[2mshould have separate rate limits for export and delete
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/gdpr/Gdpr.integration.test.ts[2m > [22m[2mGDPR Integration Tests[2m > [22m[2mConsent Management[2m > [22m[2mshould require data_processing consent for export
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/gdpr/Gdpr.integration.test.ts[2m > [22m[2mGDPR Integration Tests[2m > [22m[2mConsent Management[2m > [22m[2mshould require data_processing consent for delete
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [31mâ¯[39m src/services/gdpr/Gdpr.integration.test.ts [2m([22m[2m15 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 1122[2mms[22m[39m
[31m   [31mÃ—[31m GDPR Integration Tests[2m > [22mArticle 17: Right to Erasure (Delete)[2m > [22mshould delete all user data except audit logs and consents[90m 151[2mms[22m[31m[39m
[31m     â†’ expected +0 to be 2 // Object.is equality[39m
[31m   [31mÃ—[31m GDPR Integration Tests[2m > [22mArticle 17: Right to Erasure (Delete)[2m > [22mshould require explicit confirmation[90m 93[2mms[22m[31m[39m
[31m     â†’ promise resolved "{ success: true, â€¦(5) }" instead of rejecting[39m
[90mstdout[2m | src/services/EncryptionService.batch.test.ts[2m > [22m[2mEncryptionService - Batch Operations[2m > [22m[2mPerformance Comparison[2m > [22m[2mshould demonstrate performance improvement of batch operations
[22m[39m
=== Performance Results ===
Items processed: 100

Encryption:
  Individual: 4.41ms
  Batch:      3.97ms
  Speedup:    1.11x

Decryption:
  Individual: 3.09ms
  Batch:      2.64ms
  Speedup:    1.17x

Note: Performance improvement is modest but still beneficial.
Actual speedup depends on system load and Node.js JIT optimization.
Benefits increase with larger datasets and production workloads.

 [32mâœ“[39m src/services/EncryptionService.batch.test.ts [2m([22m[2m16 tests[22m[2m)[22m[33m 373[2mms[22m[39m
 [31mâ¯[39m src/services/ProfileService.test.ts [2m([22m[2m20 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[33m 1626[2mms[22m[39m
[31m   [31mÃ—[31m ProfileService[2m > [22mget()[2m > [22mshould handle localStorage errors gracefully[90m 71[2mms[22m[31m[39m
[31m     â†’ expected "spy" to be called with arguments: [ â€¦(2) ][90m

Received: 

[1m  1st spy call:

[22m[2m  Array [[22m
[2m    "[ProfileService] Error retrieving profile:",[22m
[32m-   Any<Error>,[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[31m   [31mÃ—[31m ProfileService[2m > [22mupdate()[2m > [22mshould successfully update profile data[33m 694[2mms[22m[31m[39m
[31m     â†’ expected false to be true // Object.is equality[39m
   [33m[2mâœ“[22m[39m ProfileService[2m > [22mcaching behavior[2m > [22mshould invalidate cache when profile is updated [33m651[2mms[22m[39m
[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mchangePassword()[2m > [22m[2mshould reject old password after change
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mchangePassword()[2m > [22m[2mshould reject change with incorrect old password
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mchangePassword()[2m > [22m[2mshould validate new password strength
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [31mâ¯[39m tests/components/RegistrationScreen.test.tsx [2m([22m[2m17 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[33m 4544[2mms[22m[39m
   [33m[2mâœ“[22m[39m RegistrationScreen[2m > [22mrenders registration form with all required fields [33m605[2mms[22m[39m
[31m   [31mÃ—[31m RegistrationScreen[2m > [22mshows error message when registration fails[33m 1164[2mms[22m[31m[39m
[31m     â†’ Unable to find an element with the text: /username already exists/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[31m
  [36m<div>[31m
    [36m<div[31m
      [33mclass[31m=[32m"min-h-screen flex items-center justify-center bg-primary-900"[31m
    [36m>[31m
      [36m<div[31m
        [33mclass[31m=[32m"w-full max-w-md p-8 space-y-6 bg-primary-800 rounded-lg shadow-xl"[31m
      [36m>[31m
        [36m<div>[31m
          [36m<h2[31m
            [33mclass[31m=[32m"text-3xl font-bold text-center text-white"[31m
          [36m>[31m
            [0mCreate Account[0m
          [36m</h2>[31m
          [36m<p[31m
            [33mclass[31m=[32m"mt-2 text-center text-white/90"[31m
          [36m>[31m
            [0mJoin Justice Companion[0m
          [36m</p>[31m
        [36m</div>[31m
        [36m<form[31m
          [33mclass[31m=[32m"space-y-4"[31m
          [33mnovalidate[31m=[32m""[31m
        [36m>[31m
          [36m<div[31m
            [33mclass[31m=[32m"p-3 text-sm text-red-300 bg-red-900/50 rounded-md border border-red-700"[31m
          [36m>[31m
            [0mRegistration failed[0m
          [36m</div>[31m
          [36m<div>[31m
            [36m<label[31m
              [33mclass[31m=[32m"block text-sm font-medium text-white mb-1"[31m
              [33mfor[31m=[32m"username"[31m
            [36m>[31m
              [0mUsername[0m
            [36m</label>[31m
            [36m<input[31m
              [33mclass[31m=[32m"w-full px-3 py-2 bg-primary-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed"[31m
              [33mid[31m=[32m"username"[31m
              [33mplaceholder[31m=[32m"Enter your username"[31m
              [33mtype[31m=[32m"text"[31m
              [33mvalue[31m=[32m"existinguser"[31m
            [36m/>[31m
          [36m</div>[31m
          [36m<div>[31m
            [36m<label[31m
              [33mclass[31m=[32m"block text-sm font-medium text-white mb-1"[31m
              [33mfor[31m=[32m"email"[31m
            [36m>[31m
              [0mEmail[0m
            [36m</label>[31m
            [36m<input[31m
              [33mclass[31m=[32m"w-full px-3 py-2 bg-primary-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed"[31m
              [33mid[31m=[32m"email"[31m
              [33mplaceholder[31m=[32m"Enter your email"[31m
              [33mtype[31m=[32m"email"[31m
              [33mvalue[31m=[32m"test@example.com"[31m
            [36m/>[31m
          [36m</div>[31m
          [36m<div>[31m
            [36m<label[31m
              [33mclass[31m=[32m"block text-sm font-medium text-white mb-1"[31m
              [33mfor[31m=[32m"password"[31m
            [36m>[31m
              [0mPassword[0m
            [36m</label>[31m
            [36m<div[31m
              [33mclass[31m=[32m"relative"[31m
            [36m>[31m
              [36m<input[31m
                [33mclass[31m=[32m"w-full px-3 py-2 bg-primary-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed pr-10"[31m
                [33mid[31m=[32m"password"[31m
                [33mplaceholder[31m=[32m"Enter your password"[31m
                [33mtype[31m=[32m"password"[31m
                [33mvalue[31m=[32m"StrongPass123!"[31m
              [36m/>[31m
              [36m<button[31m
                [33maria-label[31m=[32m"Show password"[31m
                [33mclass[31m=[32m"absolute right-2 top-1/2 -translate-y-1/2 text-white/90 hover:text-white"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [36m<svg[31m
                  [33mclass[31m=[32m"w-5 h-5"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                [36m>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M15 12a3 3 0 11-6 0 3 3 0 016 0z"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                  [36m/>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                  [36m/>[31m
                [36m</svg>[31m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
          [36m<div>[31m
            [36m<label[31m
              [33mclass[31m=[32m"block text-sm font-medium text-white mb-1"[31m
              [33mfor[31m=[32m"confirm-password"[31m
            [36m>[31m
              [0mConfirm Password[0m
            [36m</label>[31m
            [36m<div[31m
              [33mclass[31m=[32m"relative"[31m
            [36m>[31m
              [36m<input[31m
                [33mclass[31m=[32m"w-full px-3 py-2 bg-primary-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed pr-10"[31m
                [33mid[31m=[32m"confirm-password"[31m
                [33mplaceholder[31m=[32m"Confirm your password"[31m
                [33mtype[31m=[32m"password"[31m
                [33mvalue[31m=[32m"StrongPass123!"[31m
              [36m/>[31m
              [36m<button[31m
                [33maria-label[31m=[32m"Show password"[31m
                [33mclass[31m=[32m"absolute right-2 top-1/2 -translate-y-1/2 text-white/90 hover:text-white"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [36m<svg[31m
                  [33mclass[31m=[32m"w-5 h-5"[31m
                  [33mfill[31m=[32m"none"[31m
                  [33mstroke[31m=[32m"currentColor"[31m
                  [33mviewBox[31m=[32m"0 0 24 24"[31m
                [36m>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M15 12a3 3 0 11-6 0 3 3 0 016 0z"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                  [36m/>[31m
                  [36m<path[31m
                    [33md[31m=[32m"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"[31m
                    [33mstroke-linecap[31m=[32m"round"[31m
                    [33mstroke-linejoin[31m=[32m"round"[31m
                    [33mstroke-width[31m=[32m"2"[31m
                  [36m/>[31m
                [36m</svg>[31m
              [36m</button>[31m
            [36m</div>[31m
          [36m</div>[31m
          [36m<div[31m
            [33mclass[31m=[32m"flex items-start"[31m
          [36m>[31m
            [36m<input[31m
              [33mclass[31m=[32m"w-4 h-4 mt-1 text-primary-600 bg-primary-700 border-gray-600 rounded focus:ring-primary-500 focus:ring-2 disabled:opacity-50 disabled:cursor-not-allowed"[31m
              [33mid[31m=[32m"terms"[31m
              [33mtype[31m=[32m"checkbox"[31m
            [36m/>[31m
            [36m<label[31m
              [33mclass[31m=[32m"ml-2 text-sm text-white"[31m
              [33mfor[31m=[32m"terms"[31m
            [36m>[31m
              [0mI agree to the Terms and Conditions[0m
            [36m</label>[31m
          [36m</div>[31m
          [36m<button[31m
            [33mclass[31m=[32m"w-full px-4 py-2 text-sm font-medium text-white bg-secondary-600 rounded-md hover:bg-secondary-700 focus:outline-none focus:ring-2 focus:ring-secondary-500 focus:ring-offset-2 focus:ring-offset-primary-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"[31m
            [33mtype[31m=[32m"submit"[31m
          [36m>[31m
            [0mSign Up[0m
          [36m</button>[31m
        [36m</form>[31m
        [36m<div[31m
          [33mclass[31m=[32m"text-center"[31m
        [36m>[31m
          [36m<p[31m
            [33mclass[31m=[32m"text-sm text-white/90"[31m
          [36m>[31m
            [0mAlready have an account?[0m
            [0m [0m
            [36m<button[31m
              [33mclass[31m=[32m"text-cyan-400 hover:text-cyan-300 font-medium"[31m
              [33mtype[31m=[32m"button"[31m
            [36m>[31m
              [0mSign in[0m
            [36m</button>[31m
          [36m</p>[31m
        [36m</div>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</div>[31m
[36m</body>[31m

Ignored nodes: comments, script, style
[36m<html>[31m
  [36m<head />[31m
  [36m<body>[31m
    [36m<div>[31m
      [36m<div[31m
        [33mclass[31m=[32m"min-h-screen flex items-center justify-center bg-primary-900"[31m
      [36m>[31m
        [36m<div[31m
          [33mclass[31m=[32m"w-full max-w-md p-8 space-y-6 bg-primary-800 rounded-lg shadow-xl"[31m
        [36m>[31m
          [36m<div>[31m
            [36m<h2[31m
              [33mclass[31m=[32m"text-3xl font-bold text-center text-white"[31m
            [36m>[31m
              [0mCreate Account[0m
            [36m</h2>[31m
            [36m<p[31m
              [33mclass[31m=[32m"mt-2 text-center text-white/90"[31m
            [36m>[31m
              [0mJoin Justice Companion[0m
            [36m</p>[31m
          [36m</div>[31m
          [36m<form[31m
            [33mclass[31m=[32m"space-y-4"[31m
            [33mnovalidate[31m=[32m""[31m
          [36m>[31m
            [36m<div[31m
              [33mclass[31m=[32m"p-3 text-sm text-red-300 bg-red-900/50 rounded-md border border-red-700"[31m
            [36m>[31m
              [0mRegistration failed[0m
            [36m</div>[31m
            [36m<div>[31m
              [36m<label[31m
                [33mclass[31m=[32m"block text-sm font-medium text-white mb-1"[31m
                [33mfor[31m=[32m"username"[31m
              [36m>[31m
                [0mUsername[0m
              [36m</label>[31m
              [36m<input[31m
                [33mclass[31m=[32m"w-full px-3 py-2 bg-primary-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed"[31m
                [33mid[31m=[32m"username"[31m
                [33mplaceholder[31m=[32m"Enter your username"[31m
                [33mtype[31m=[32m"text"[31m
                [33mvalue[31m=[32m"existinguser"[31m
              [36m/>[31m
            [36m</div>[31m
            [36m<div>[31m
              [36m<label[31m
                [33mclass[31m=[32m"block text-sm font-medium text-white mb-1"[31m
                [33mfor[31m=[32m"email"[31m
              [36m>[31m
                [0mEmail[0m
              [36m</label>[31m
              [36m<input[31m
                [33mclass[31m=[32m"w-full px-3 py-2 bg-primary-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed"[31m
                [33mid[31m=[32m"email"[31m
                [33mplaceholder[31m=[32m"Enter your email"[31m
                [33mtype[31m=[32m"email"[31m
                [33mvalue[31m=[32m"test@example.com"[31m
              [36m/>[31m
            [36m</div>[31m
            [36m<div>[31m
              [36m<label[31m
                [33mclass[31m=[32m"block text-sm font-medium text-white mb-1"[31m
                [33mfor[31m=[32m"password"[31m
              [36m>[31m
                [0mPassword[0m
              [36m</label>[31m
              [36m<div[31m
                [33mclass[31m=[32m"relative"[31m
              [36m>[31m
                [36m<input[31m
                  [33mclass[31m=[32m"w-full px-3 py-2 bg-primary-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed pr-10"[31m
                  [33mid[31m=[32m"password"[31m
                  [33mplaceholder[31m=[32m"Enter your password"[31m
                  [33mtype[31m=[32m"password"[31m
                  [33mvalue[31m=[32m"StrongPass123!"[31m
                [36m/>[31m
                [36m<button[31m
                  [33maria-label[31m=[32m"Show password"[31m
                  [33mclass[31m=[32m"absolute right-2 top-1/2 -translate-y-1/2 text-white/90 hover:text-white"[31m
                  [33mtype[31m=[32m"button"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33mclass[31m=[32m"w-5 h-5"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M15 12a3 3 0 11-6 0 3 3 0 016 0z"[31m
                      [33mstroke-linecap[31m=[32m"round"[31m
                      [33mstroke-linejoin[31m=[32m"round"[31m
                      [33mstroke-width[31m=[32m"2"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"[31m
                      [33mstroke-linecap[31m=[32m"round"[31m
                      [33mstroke-linejoin[31m=[32m"round"[31m
                      [33mstroke-width[31m=[32m"2"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</button>[31m
              [36m</div>[31m
            [36m</div>[31m
            [36m<div>[31m
              [36m<label[31m
                [33mclass[31m=[32m"block text-sm font-medium text-white mb-1"[31m
                [33mfor[31m=[32m"confirm-password"[31m
              [36m>[31m
                [0mConfirm Password[0m
              [36m</label>[31m
              [36m<div[31m
                [33mclass[31m=[32m"relative"[31m
              [36m>[31m
                [36m<input[31m
                  [33mclass[31m=[32m"w-full px-3 py-2 bg-primary-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed pr-10"[31m
                  [33mid[31m=[32m"confirm-password"[31m
                  [33mplaceholder[31m=[32m"Confirm your password"[31m
                  [33mtype[31m=[32m"password"[31m
                  [33mvalue[31m=[32m"StrongPass123!"[31m
                [36m/>[31m
                [36m<button[31m
                  [33maria-label[31m=[32m"Show password"[31m
                  [33mclass[31m=[32m"absolute right-2 top-1/2 -translate-y-1/2 text-white/90 hover:text-white"[31m
                  [33mtype[31m=[32m"button"[31m
                [36m>[31m
                  [36m<svg[31m
                    [33mclass[31m=[32m"w-5 h-5"[31m
                    [33mfill[31m=[32m"none"[31m
                    [33mstroke[31m=[32m"currentColor"[31m
                    [33mviewBox[31m=[32m"0 0 24 24"[31m
                  [36m>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M15 12a3 3 0 11-6 0 3 3 0 016 0z"[31m
                      [33mstroke-linecap[31m=[32m"round"[31m
                      [33mstroke-linejoin[31m=[32m"round"[31m
                      [33mstroke-width[31m=[32m"2"[31m
                    [36m/>[31m
                    [36m<path[31m
                      [33md[31m=[32m"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"[31m
                      [33mstroke-linecap[31m=[32m"round"[31m
                      [33mstroke-linejoin[31m=[32m"round"[31m
                      [33mstroke-width[31m=[32m"2"[31m
                    [36m/>[31m
                  [36m</svg>[31m
                [36m</button>[31m
              [36m</div>[31m
            [36m</div>[31m
            [36m<div[31m
              [33mclass[31m=[32m"flex items-start"[31m
            [36m>[31m
              [36m<input[31m
                [33mclass[31m=[32m"w-4 h-4 mt-1 text-primary-600 bg-primary-700 border-gray-600 rounded focus:ring-primary-500 focus:ring-2 disabled:opacity-50 disabled:cursor-not-allowed"[31m
                [33mid[31m=[32m"terms"[31m
                [33mtype[31m=[32m"checkbox"[31m
              [36m/>[31m
              [36m<label[31m
                [33mclass[31m=[32m"ml-2 text-sm text-white"[31m
                [33mfor[31m=[32m"terms"[31m
              [36m>[31m
                [0mI agree to the Terms and Conditions[0m
              [36m</label>[31m
            [36m</div>[31m
            [36m<button[31m
              [33mclass[31m=[32m"w-full px-4 py-2 text-sm font-medium text-white bg-secondary-600 rounded-md hover:bg-secondary-700 focus:outline-none focus:ring-2 focus:ring-secondary-500 focus:ring-offset-2 focus:ring-offset-primary-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"[31m
              [33mtype[31m=[32m"submit"[31m
            [36m>[31m
              [0mSign Up[0m
            [36m</button>[31m
          [36m</form>[31m
          [36m<div[31m
            [33mclass[31m=[32m"text-center"[31m
          [36m>[31m
            [36m<p[31m
              [33mclass[31m=[32m"text-sm text-white/90"[31m
            [36m>[31m
              [0mAlready have an account?[0m
              [0m [0m
              [36m<button[31m
                [33mclass[31m=[32m"text-cyan-400 hover:text-cyan-300 font-medium"[31m
                [33mtype[31m=[32m"button"[31m
              [36m>[31m
                [0mSign in[0m
              [36m</button>[31m
            [36m</p>[31m
          [36m</div>[31m
        [36m</div>[31m
      [36m</div>[31m
    [36m</div>[31m
  [36m</body>[31m
[36m</html>[31m[39m
[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mchangePassword()[2m > [22m[2mshould invalidate all sessions after password change
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstderr[2m | src/utils/migrate-to-secure-storage.test.ts[2m > [22m[2mmigrate-to-secure-storage[2m > [22m[2mmigrateToSecureStorage[2m > [22m[2mshould handle errors gracefully
[22m[39mMigrateToSecureStorage

 [32mâœ“[39m src/utils/migrate-to-secure-storage.test.ts [2m([22m[2m12 tests[22m[2m)[22m[90m 144[2mms[22m[39m
[90mstderr[2m | src/views/settings/BackupSettings.test.tsx[2m > [22m[2mBackupSettingsTab[2m > [22m[2mrenders backup settings UI
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | src/views/settings/BackupSettings.test.tsx[2m > [22m[2mBackupSettingsTab[2m > [22m[2mdisplays backup status overview
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | src/views/settings/BackupSettings.test.tsx[2m > [22m[2mBackupSettingsTab[2m > [22m[2mshows create backup button
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | src/views/settings/BackupSettings.test.tsx[2m > [22m[2mBackupSettingsTab[2m > [22m[2mdisplays automatic backup toggle
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mchangePassword()[2m > [22m[2mshould log password change event
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [32mâœ“[39m src/views/timeline/components/TimelineItem.test.tsx [2m([22m[2m25 tests[22m[2m)[22m[33m 3714[2mms[22m[39m
   [33m[2mâœ“[22m[39m TimelineItem[2m > [22mActions[2m > [22mshould call onEdit when Edit button clicked [33m794[2mms[22m[39m
   [33m[2mâœ“[22m[39m TimelineItem[2m > [22mActions[2m > [22mshould call onComplete when Complete button clicked [33m411[2mms[22m[39m
   [33m[2mâœ“[22m[39m TimelineItem[2m > [22mActions[2m > [22mshould show "Mark Incomplete" for completed deadlines [33m315[2mms[22m[39m
   [33m[2mâœ“[22m[39m TimelineItem[2m > [22mActions[2m > [22mshould call onDelete when Delete button clicked [33m415[2mms[22m[39m
   [33m[2mâœ“[22m[39m TimelineItem[2m > [22mAccessibility[2m > [22mshould have keyboard-accessible action buttons [33m611[2mms[22m[39m
[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mchangePassword()[2m > [22m[2mshould log failed password change attempts
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [32mâœ“[39m src/repositories/Phase3Repositories.test.ts [2m([22m[2m15 tests[22m[2m)[22m[90m 226[2mms[22m[39m
[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mcleanupExpiredSessions()[2m > [22m[2mshould delete expired sessions
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [31mâ¯[39m src/services/AuthorizationService.test.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mcleanupExpiredSessions()[2m > [22m[2mshould return 0 if no expired sessions
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mcleanupExpiredSessions()[2m > [22m[2mshould log cleanup event if sessions deleted
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mSecurity - Password Hashing[2m > [22m[2mshould never store passwords in plaintext
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mSecurity - Password Hashing[2m > [22m[2mshould use random salt for each user
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [32mâœ“[39m tests/contexts/AuthContext.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[33m 577[2mms[22m[39m
[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mSecurity - Password Hashing[2m > [22m[2mshould produce consistent hash for same password+salt
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/StartupMetrics.test.ts[2m > [22m[2mStartupMetrics[2m > [22m[2mlogStartupMetrics[2m > [22m[2mshould log formatted metrics to console
[22m[39m[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics

[90mstdout[2m | src/services/StartupMetrics.test.ts[2m > [22m[2mStartupMetrics[2m > [22m[2mlogStartupMetrics[2m > [22m[2mshould show N/A for unrecorded phases
[22m[39m[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics

[90mstdout[2m | src/services/StartupMetrics.test.ts[2m > [22m[2mStartupMetrics[2m > [22m[2mlogStartupMetrics[2m > [22m[2mshould show performance indicators
[22m[39m[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mSecurity - Session Management[2m > [22m[2mshould generate UUID session IDs
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/CaseRepository.test.ts[2m > [22m[2mCaseRepository with Encryption
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [32mâœ“[39m src/repositories/CaseRepository.test.ts [2m([22m[2m13 tests[22m[2m)[22m[90m 183[2mms[22m[39m
[90mstdout[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mRate Limiting[2m > [22m[2mshould lock account after 5 failed attempts
[22m[39m[31merror[39m RateLimitService
[33mwarn[39m RateLimitService

[90mstdout[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mSliding Window[2m > [22m[2mshould unlock account after lock duration expires
[22m[39m[31merror[39m RateLimitService
[33mwarn[39m RateLimitService

[90mstdout[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mCleanup Mechanism[2m > [22m[2mshould not clean up locked accounts prematurely
[22m[39m[31merror[39m RateLimitService

[90mstdout[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mSecurity Logging[2m > [22m[2mshould log when account is locked
[22m[39m[31merror[39m RateLimitService

[90mstdout[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mSecurity Logging[2m > [22m[2mshould log rate limit violations
[22m[39m[31merror[39m RateLimitService
[33mwarn[39m RateLimitService

[90mstdout[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mHelper Methods[2m > [22m[2mshould correctly check if account is locked
[22m[39m[31merror[39m RateLimitService

[90mstdout[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mHelper Methods[2m > [22m[2mshould provide accurate statistics
[22m[39m[31merror[39m RateLimitService

[90mstdout[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle rapid successive attempts
[22m[39m[31merror[39m RateLimitService

[90mstdout[2m | src/services/RateLimitService.test.ts[2m > [22m[2mRateLimitService[2m > [22m[2mEdge Cases[2m > [22m[2mshould not increment count when already locked
[22m[39m[31merror[39m RateLimitService

 [31mâ¯[39m src/services/RateLimitService.test.ts [2m([22m[2m21 tests[22m[2m | [22m[31m2 failed[39m[2m)[22m[90m 230[2mms[22m[39m
[31m   [31mÃ—[31m RateLimitService[2m > [22mSecurity Logging[2m > [22mshould log when account is locked[90m 20[2mms[22m[31m[39m
[31m     â†’ expected "error" to be called at least once[39m
[31m   [31mÃ—[31m RateLimitService[2m > [22mSecurity Logging[2m > [22mshould log rate limit violations[90m 19[2mms[22m[31m[39m
[31m     â†’ expected "warn" to be called at least once[39m
[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mSecurity - Session Management[2m > [22m[2mshould generate unique session IDs
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mSecurity - Session Management[2m > [22m[2mshould enforce 24-hour session expiration
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/StartupMetrics.test.ts[2m > [22m[2mStartupMetrics[2m > [22m[2mlogStartupMetrics[2m > [22m[2mshould show recommendations for slow startup
[22m[39m[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[32minfo[39m StartupMetrics
[33mwarn[39m StartupMetrics
[33mwarn[39m StartupMetrics

[90mstdout[2m | src/services/NotificationService.test.ts[2m > [22m[2mNotificationService[2m > [22m[2mcreateNotification[2m > [22m[2mshould throw error when notification type is disabled
[22m[39m[32minfo[39m NotificationService

[90mstdout[2m | src/services/NotificationService.test.ts[2m > [22m[2mNotificationService[2m > [22m[2mcreateNotification[2m > [22m[2mshould throw error during quiet hours
[22m[39m[32minfo[39m NotificationService

 [32mâœ“[39m src/services/NotificationService.test.ts [2m([22m[2m14 tests[22m[2m)[22m[90m 152[2mms[22m[39m
[90mstdout[2m | src/repositories/EvidenceRepository.paginated.test.ts[2m > [22m[2mEvidenceRepository - Cursor Pagination
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/EvidenceRepository.paginated.test.ts[2m > [22m[2mEvidenceRepository - Cursor Pagination[2m > [22m[2mPerformance comparison[2m > [22m[2mshould be more memory efficient than findAll
[22m[39mPaginated: 10 items
Non-paginated: 100 items
Memory reduction: 90.0%

 [31mâ¯[39m src/repositories/EvidenceRepository.paginated.test.ts [2m([22m[2m10 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 415[2mms[22m[39m
[31m   [31mÃ—[31m EvidenceRepository - Cursor Pagination[2m > [22mfindByCaseIdPaginated[2m > [22mshould return second page using cursor[90m 25[2mms[22m[31m[39m
[31m     â†’ expected undefined to be null[39m
[31m   [31mÃ—[31m EvidenceRepository - Cursor Pagination[2m > [22mfindByCaseIdPaginated[2m > [22mshould return empty result when no evidence exists[90m 8[2mms[22m[31m[39m
[31m     â†’ expected undefined to be null[39m
[31m   [31mÃ—[31m EvidenceRepository - Cursor Pagination[2m > [22mfindByCaseIdPaginated[2m > [22mshould handle exact page size boundary[90m 39[2mms[22m[31m[39m
[31m     â†’ expected undefined to be null[39m
[90mstderr[2m | src/views/settings/BackupSettings.test.tsx[2m > [22m[2mBackupSettingsTab[2m > [22m[2mshows backup metadata when expanded
[22m[39mNot implemented: Window's scrollTo() method

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mRemember Me and Session Persistence[2m > [22m[2mshould create session with Remember Me flag
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mRemember Me and Session Persistence[2m > [22m[2mshould create session with Remember Me flag
[22m[39m[33mwarn[39m AuthenticationService

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mRemember Me and Session Persistence[2m > [22m[2mshould create 30-day session when Remember Me is enabled
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mInitialization[2m > [22m[2mshould initialize with correct configuration
[22m[39m[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mInitialization[2m > [22m[2mshould register update event listeners
[22m[39m[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mCheck for Updates[2m > [22m[2mshould check for updates manually
[22m[39m[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mCheck for Updates[2m > [22m[2mshould handle check errors gracefully
[22m[39m[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mCheck for Updates[2m > [22m[2mshould auto-check on startup if enabled
[22m[39m[AutoUpdater] Configured for GitHub releases
[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mDownload Updates[2m > [22m[2mshould download update when available
[22m[39m[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mDownload Updates[2m > [22m[2mshould handle download errors
[22m[39m[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mDownload Updates[2m > [22m[2mshould track download progress
[22m[39m[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mInstall Updates[2m > [22m[2mshould quit and install update
[22m[39m[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mInstall Updates[2m > [22m[2mshould notify window before quitting
[22m[39m[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mInstall Updates[2m > [22m[2mshould not notify destroyed window
[22m[39m[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mUpdate Notifications[2m > [22m[2mshould notify window of update available
[22m[39m[AutoUpdater] Configured for GitHub releases
[AutoUpdater] Update available: 1.0.1

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mUpdate Notifications[2m > [22m[2mshould notify window when no update available
[22m[39m[AutoUpdater] Configured for GitHub releases
[AutoUpdater] No update available: 1.0.0

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mUpdate Notifications[2m > [22m[2mshould notify window when update is downloaded
[22m[39m[AutoUpdater] Configured for GitHub releases
[AutoUpdater] Update downloaded: 1.0.1

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mConfiguration[2m > [22m[2mshould allow custom update server URL
[22m[39m[AutoUpdater] Configured for GitHub releases
[AutoUpdater] Configured for custom server https://updates.example.com

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mConfiguration[2m > [22m[2mshould support GitHub releases by default
[22m[39m[AutoUpdater] Configured for GitHub releases
[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mConfiguration[2m > [22m[2mshould allow disabling auto-check on startup
[22m[39m[AutoUpdater] Configured for GitHub releases
[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mStatus Reporting[2m > [22m[2mshould report current update status
[22m[39m[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mStatus Reporting[2m > [22m[2mshould update status when checking for updates
[22m[39m[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mError Handling[2m > [22m[2mshould log errors to console
[22m[39m[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mError Handling[2m > [22m[2mshould not crash app on update errors
[22m[39m[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mProduction Mode[2m > [22m[2mshould only enable updates in production
[22m[39m[AutoUpdater] Configured for GitHub releases
[AutoUpdater] Configured for GitHub releases

[90mstderr[2m | src/services/AutoUpdater.test.ts[2m > [22m[2mAutoUpdater[2m > [22m[2mProduction Mode[2m > [22m[2mshould enable updates in production
[22m[39m[AutoUpdater] Configured for GitHub releases
[AutoUpdater] Configured for GitHub releases

 [32mâœ“[39m src/services/AutoUpdater.test.ts [2m([22m[2m23 tests[22m[2m)[22m[90m 252[2mms[22m[39m
[90mstderr[2m | src/views/settings/BackupSettings.test.tsx[2m > [22m[2mBackupSettingsTab[2m > [22m[2mhandles frequency selection
[22m[39mNot implemented: Window's scrollTo() method

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mRemember Me and Session Persistence[2m > [22m[2mshould create 30-day session when Remember Me is enabled
[22m[39m[33mwarn[39m AuthenticationService

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mRemember Me and Session Persistence[2m > [22m[2mshould handle Remember Me without persistence handler gracefully
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [31mâ¯[39m src/services/SearchService.test.ts [2m([22m[2m9 tests[22m[2m | [22m[31m3 failed[39m[2m | [22m[33m1 skipped[39m[2m)[22m[90m 96[2mms[22m[39m
[31m   [31mÃ—[31m SearchService[2m > [22msearch[2m > [22mshould handle search errors gracefully[90m 27[2mms[22m[31m[39m
[31m     â†’ expected "spy" to be called with arguments: [ 'search_query', ObjectContaining{â€¦} ][90m

Received: 

[1m  1st spy call:

[22m[2m  Array [[22m
[32m-   "search_query",[90m
[32m-   ObjectContaining {[90m
[31m+   Object {[90m
[31m+     "action": "read",[90m
[31m+     "details": Object {[90m
[31m+       "filters": undefined,[90m
[2m        "query": "error test",[22m
[32m-     "userId": 1,[90m
[31m+     },[90m
[31m+     "eventType": "query.paginated",[90m
[31m+     "resourceId": "global",[90m
[31m+     "resourceType": "search",[90m
[31m+     "success": true,[90m
[31m+     "userId": "1",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[31m   [31mÃ—[31m SearchService[2m > [22msaveSearch[2m > [22mshould save a search query[90m 11[2mms[22m[31m[39m
[31m     â†’ expected "spy" to be called with arguments: [ 'search_saved', ObjectContaining{â€¦} ][90m

Received: 

[1m  1st spy call:

[22m[2m  Array [[22m
[32m-   "search_saved",[90m
[32m-   ObjectContaining {[90m
[31m+   Object {[90m
[31m+     "action": "create",[90m
[31m+     "details": Object {[90m
[2m        "name": "My Search",[22m
[32m-     "searchId": 1,[90m
[32m-     "userId": 1,[90m
[31m+       "query": Object {[90m
[31m+         "filters": Object {[90m
[31m+           "caseStatus": Array [[90m
[31m+             "active",[90m
[31m+           ],[90m
[31m+         },[90m
[31m+         "query": "test",[90m
[31m+       },[90m
[31m+     },[90m
[31m+     "eventType": "query.paginated",[90m
[31m+     "resourceId": "1",[90m
[31m+     "resourceType": "search.saved",[90m
[31m+     "success": true,[90m
[31m+     "userId": "1",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[31m   [31mÃ—[31m SearchService[2m > [22mdeleteSavedSearch[2m > [22mshould delete a saved search[90m 11[2mms[22m[31m[39m
[31m     â†’ expected "spy" to be called with arguments: [ 'search_deleted', â€¦(1) ][90m

Received: 

[1m  1st spy call:

[22m[2m  Array [[22m
[32m-   "search_deleted",[90m
[32m-   ObjectContaining {[90m
[32m-     "searchId": 5,[90m
[32m-     "userId": 1,[90m
[31m+   Object {[90m
[31m+     "action": "delete",[90m
[31m+     "eventType": "query.paginated",[90m
[31m+     "resourceId": "5",[90m
[31m+     "resourceType": "search.saved",[90m
[31m+     "success": true,[90m
[31m+     "userId": "1",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mRemember Me and Session Persistence[2m > [22m[2mshould handle Remember Me without persistence handler gracefully
[22m[39m[33mwarn[39m AuthenticationService

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mRemember Me and Session Persistence[2m > [22m[2mshould always generate new session ID on login (prevent session fixation)
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstderr[2m | src/views/settings/BackupSettings.test.tsx[2m > [22m[2mBackupSettingsTab[2m > [22m[2mrenders restore warning when backup is expanded
[22m[39mNot implemented: Window's scrollTo() method

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mRemember Me and Session Persistence[2m > [22m[2mshould restore persisted session returns null without handler
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mRemember Me and Session Persistence[2m > [22m[2mwith mock persistence handler[2m > [22m[2mshould store session when Remember Me is enabled
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [32mâœ“[39m src/views/timeline/TimelineView.test.tsx [2m([22m[2m29 tests[22m[2m)[22m[33m 11023[2mms[22m[39m
   [33m[2mâœ“[22m[39m TimelineView[2m > [22mRendering[2m > [22mshould render timeline header with title and actions [33m786[2mms[22m[39m
   [33m[2mâœ“[22m[39m TimelineView[2m > [22mAdd Deadline[2m > [22mshould open add deadline dialog when button clicked [33m665[2mms[22m[39m
   [33m[2mâœ“[22m[39m TimelineView[2m > [22mAdd Deadline[2m > [22mshould create new deadline via API [33m2304[2mms[22m[39m
   [33m[2mâœ“[22m[39m TimelineView[2m > [22mEdit Deadline[2m > [22mshould open edit dialog when edit button clicked [33m788[2mms[22m[39m
   [33m[2mâœ“[22m[39m TimelineView[2m > [22mEdit Deadline[2m > [22mshould update deadline via API [33m1956[2mms[22m[39m
   [33m[2mâœ“[22m[39m TimelineView[2m > [22mMark Complete[2m > [22mshould mark deadline as complete [33m579[2mms[22m[39m
   [33m[2mâœ“[22m[39m TimelineView[2m > [22mMark Complete[2m > [22mshould toggle completed status back to upcoming [33m572[2mms[22m[39m
   [33m[2mâœ“[22m[39m TimelineView[2m > [22mDelete Deadline[2m > [22mshould show confirmation dialog before deleting [33m563[2mms[22m[39m
   [33m[2mâœ“[22m[39m TimelineView[2m > [22mDelete Deadline[2m > [22mshould delete deadline via API when confirmed [33m1098[2mms[22m[39m
   [33m[2mâœ“[22m[39m TimelineView[2m > [22mFilter by Case[2m > [22mshould filter deadlines by selected case [33m555[2mms[22m[39m
[90mstderr[2m | src/repositories/decorators/ErrorHandlingDecorator.test.ts[2m > [22m[2mErrorHandlingDecorator[2m > [22m[2mNotFoundError handling[2m > [22m[2mshould throw NotFoundError when findById returns null
[22m[39m[findById] Error occurred:

[90mstderr[2m | src/repositories/decorators/ErrorHandlingDecorator.test.ts[2m > [22m[2mErrorHandlingDecorator[2m > [22m[2mNotFoundError handling[2m > [22m[2mshould throw NotFoundError when update returns false
[22m[39m[update] Error occurred:

[90mstderr[2m | src/repositories/decorators/ErrorHandlingDecorator.test.ts[2m > [22m[2mErrorHandlingDecorator[2m > [22m[2mNotFoundError handling[2m > [22m[2mshould throw NotFoundError when delete returns false
[22m[39m[delete] Error occurred:

[90mstderr[2m | src/repositories/decorators/ErrorHandlingDecorator.test.ts[2m > [22m[2mErrorHandlingDecorator[2m > [22m[2mUNIQUE constraint violations[2m > [22m[2mshould convert UNIQUE constraint error to RepositoryError
[22m[39m[create] Error occurred:

[90mstderr[2m | src/repositories/decorators/ErrorHandlingDecorator.test.ts[2m > [22m[2mErrorHandlingDecorator[2m > [22m[2mUNIQUE constraint violations[2m > [22m[2mshould handle UNIQUE constraint in findById
[22m[39m[findById] Error occurred:

[90mstderr[2m | src/repositories/decorators/ErrorHandlingDecorator.test.ts[2m > [22m[2mErrorHandlingDecorator[2m > [22m[2mFOREIGN KEY constraint violations[2m > [22m[2mshould convert FOREIGN KEY error to RepositoryError
[22m[39m[update] Error occurred:

[90mstderr[2m | src/repositories/decorators/ErrorHandlingDecorator.test.ts[2m > [22m[2mErrorHandlingDecorator[2m > [22m[2mFOREIGN KEY constraint violations[2m > [22m[2mshould handle FOREIGN KEY in delete
[22m[39m[delete] Error occurred:

[90mstderr[2m | src/repositories/decorators/ErrorHandlingDecorator.test.ts[2m > [22m[2mErrorHandlingDecorator[2m > [22m[2mDatabase errors[2m > [22m[2mshould convert database lock error to DatabaseError
[22m[39m[findById] Error occurred:

[90mstderr[2m | src/repositories/decorators/ErrorHandlingDecorator.test.ts[2m > [22m[2mErrorHandlingDecorator[2m > [22m[2mType errors[2m > [22m[2mshould convert TypeError to INVALID_INPUT RepositoryError
[22m[39m[create] Error occurred:

[90mstderr[2m | src/repositories/decorators/ErrorHandlingDecorator.test.ts[2m > [22m[2mErrorHandlingDecorator[2m > [22m[2mGeneric errors[2m > [22m[2mshould wrap unknown errors as RepositoryError
[22m[39m[findById] Error occurred:

[90mstderr[2m | src/repositories/decorators/ErrorHandlingDecorator.test.ts[2m > [22m[2mErrorHandlingDecorator[2m > [22m[2mError context[2m > [22m[2mshould include operation context in errors
[22m[39m[create] Error occurred:

[90mstderr[2m | src/repositories/decorators/ErrorHandlingDecorator.test.ts[2m > [22m[2mErrorHandlingDecorator[2m > [22m[2mError context[2m > [22m[2mshould sanitize sensitive fields
[22m[39m[create] Error occurred:

[90mstderr[2m | src/repositories/decorators/ErrorHandlingDecorator.test.ts[2m > [22m[2mErrorHandlingDecorator[2m > [22m[2mOptions[2m > [22m[2mshould include stack trace when enabled
[22m[39m[findById] Error occurred:

[90mstderr[2m | src/repositories/decorators/ErrorHandlingDecorator.test.ts[2m > [22m[2mErrorHandlingDecorator[2m > [22m[2mOptions[2m > [22m[2mshould not convert errors when disabled
[22m[39m[findById] Error occurred:

[90mstderr[2m | src/repositories/decorators/ErrorHandlingDecorator.test.ts[2m > [22m[2mErrorHandlingDecorator[2m > [22m[2mEntity type extraction[2m > [22m[2mshould extract entity type from repository name
[22m[39m[findById] Error occurred:

 [32mâœ“[39m src/repositories/decorators/ErrorHandlingDecorator.test.ts [2m([22m[2m15 tests[22m[2m)[22m[90m 109[2mms[22m[39m
[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mRemember Me and Session Persistence[2m > [22m[2mwith mock persistence handler[2m > [22m[2mshould not store session when Remember Me is disabled
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/NotesRepository.test.ts
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mRemember Me and Session Persistence[2m > [22m[2mwith mock persistence handler[2m > [22m[2mshould clear persisted session on logout
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mRemember Me and Session Persistence[2m > [22m[2mwith mock persistence handler[2m > [22m[2mshould restore valid persisted session
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mRemember Me and Session Persistence[2m > [22m[2mwith mock persistence handler[2m > [22m[2mshould clear expired persisted session
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [31mâ¯[39m src/shared/infrastructure/di/container.test.ts [2m([22m[2m0 test[22m[2m)[22m
[90mstdout[2m | src/repositories/NotesRepository.test.ts[2m > [22m[2mNotesRepository[2m > [22m[2mcreate[2m > [22m[2mshould create a note with encrypted content
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/NotesRepository.test.ts[2m > [22m[2mNotesRepository[2m > [22m[2mcreate[2m > [22m[2mshould audit note creation
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/NotesRepository.test.ts[2m > [22m[2mNotesRepository[2m > [22m[2mcreate[2m > [22m[2mshould not log plaintext content in audit logs
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/NotesRepository.test.ts[2m > [22m[2mNotesRepository[2m > [22m[2mfindById[2m > [22m[2mshould decrypt content when retrieving note
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/NotesRepository.test.ts[2m > [22m[2mNotesRepository[2m > [22m[2mfindById[2m > [22m[2mshould audit PII access when decrypting content
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/NotesRepository.test.ts[2m > [22m[2mNotesRepository[2m > [22m[2mfindById[2m > [22m[2mshould return null for non-existent note
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/NotesRepository.test.ts[2m > [22m[2mNotesRepository[2m > [22m[2mfindByCaseId[2m > [22m[2mshould decrypt all notes for a case
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/NotesRepository.test.ts[2m > [22m[2mNotesRepository[2m > [22m[2mfindByCaseId[2m > [22m[2mshould return empty array for case with no notes
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/NotesRepository.test.ts[2m > [22m[2mNotesRepository[2m > [22m[2mupdate[2m > [22m[2mshould update note content with new encryption
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/NotesRepository.test.ts[2m > [22m[2mNotesRepository[2m > [22m[2mupdate[2m > [22m[2mshould audit note update
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/NotesRepository.test.ts[2m > [22m[2mNotesRepository[2m > [22m[2mdelete[2m > [22m[2mshould delete note and return true
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/NotesRepository.test.ts[2m > [22m[2mNotesRepository[2m > [22m[2mdelete[2m > [22m[2mshould return false when deleting non-existent note
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/NotesRepository.test.ts[2m > [22m[2mNotesRepository[2m > [22m[2mdelete[2m > [22m[2mshould audit note deletion
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/NotesRepository.test.ts[2m > [22m[2mNotesRepository[2m > [22m[2mbackward compatibility[2m > [22m[2mshould handle legacy plaintext notes
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/NotesRepository.test.ts[2m > [22m[2mNotesRepository[2m > [22m[2mbackward compatibility[2m > [22m[2mshould handle empty content
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/repositories/NotesRepository.test.ts[2m > [22m[2mNotesRepository[2m > [22m[2mGDPR compliance[2m > [22m[2mshould never log decrypted content in audit logs
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [32mâœ“[39m src/repositories/NotesRepository.test.ts [2m([22m[2m16 tests[22m[2m)[22m[33m 672[2mms[22m[39m
[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle empty username gracefully
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle empty password gracefully
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle empty email gracefully
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle very long passwords
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.integration.test.ts
[22m[39m[CacheService] Initialized with caches: sessions, cases, evidence, profiles, default

[90mstdout[2m | src/services/AuthenticationService.test.ts[2m > [22m[2mAuthenticationService[2m > [22m[2mEdge Cases[2m > [22m[2mshould handle special characters in password
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.integration.test.ts[2m > [22m[2mAuthenticationService Integration - Rate Limiting[2m > [22m[2mRate Limiting on Login[2m > [22m[2mshould allow first login attempt
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [32mâœ“[39m src/services/AuthenticationService.test.ts [2m([22m[2m57 tests[22m[2m)[22m[33m 13506[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService[2m > [22mlogin()[2m > [22mshould create session with 24-hour expiration [33m305[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService[2m > [22mlogin()[2m > [22mshould use timing-safe password comparison [33m420[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService[2m > [22mlogout()[2m > [22mshould delete session on logout [33m346[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService[2m > [22mlogout()[2m > [22mshould log logout event [33m304[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService[2m > [22mvalidateSession()[2m > [22mshould return user for valid session [33m395[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService[2m > [22mvalidateSession()[2m > [22mshould return null and delete expired session [33m370[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService[2m > [22mchangePassword()[2m > [22mshould change password successfully [33m586[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService[2m > [22mchangePassword()[2m > [22mshould reject old password after change [33m551[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService[2m > [22mchangePassword()[2m > [22mshould invalidate all sessions after password change [33m770[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService[2m > [22mchangePassword()[2m > [22mshould log password change event [33m360[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService[2m > [22mcleanupExpiredSessions()[2m > [22mshould delete expired sessions [33m377[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService[2m > [22mSecurity - Session Management[2m > [22mshould generate unique session IDs [33m333[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService[2m > [22mRemember Me and Session Persistence[2m > [22mshould always generate new session ID on login (prevent session fixation) [33m329[2mms[22m[39m
[90mstdout[2m | src/services/AuthenticationService.integration.test.ts[2m > [22m[2mAuthenticationService Integration - Rate Limiting[2m > [22m[2mRate Limiting on Login[2m > [22m[2mshould block login after 5 failed attempts
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [32mâœ“[39m src/services/DecryptionCache.test.ts [2m([22m[2m19 tests[22m[2m)[22m[90m 110[2mms[22m[39m
[90mstderr[2m | src/views/settings/BackupSettings.test.tsx[2m > [22m[2mBackupSettingsTab[2m > [22m[2mhandles save settings button
[22m[39mNot implemented: Window's scrollTo() method

[90mstdout[2m | src/services/AuthenticationService.integration.test.ts[2m > [22m[2mAuthenticationService Integration - Rate Limiting[2m > [22m[2mRate Limiting on Login[2m > [22m[2mshould block login after 5 failed attempts
[22m[39m[31merror[39m RateLimitService
[33mwarn[39m RateLimitService

[90mstdout[2m | src/services/AuthenticationService.integration.test.ts[2m > [22m[2mAuthenticationService Integration - Rate Limiting[2m > [22m[2mRate Limiting on Login[2m > [22m[2mshould provide specific lock time in error message
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/ProcessManager.test.ts[2m > [22m[2mProcessManager[2m > [22m[2mSingle Instance Lock[2m > [22m[2mshould continue if single instance lock succeeds
[22m[39m[ProcessManager] Single instance lock acquired

 [32mâœ“[39m src/types/pagination.test.ts [2m([22m[2m26 tests[22m[2m)[22m[90m 126[2mms[22m[39m
[90mstdout[2m | src/services/AuthenticationService.integration.test.ts[2m > [22m[2mAuthenticationService Integration - Rate Limiting[2m > [22m[2mRate Limiting on Login[2m > [22m[2mshould provide specific lock time in error message
[22m[39m[31merror[39m RateLimitService
[33mwarn[39m RateLimitService

[90mstdout[2m | src/services/AuthenticationService.integration.test.ts[2m > [22m[2mAuthenticationService Integration - Rate Limiting[2m > [22m[2mRate Limiting on Login[2m > [22m[2mshould clear rate limit after successful login
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.integration.test.ts[2m > [22m[2mAuthenticationService Integration - Rate Limiting[2m > [22m[2mRate Limiting on Login[2m > [22m[2mshould handle case-insensitive usernames for rate limiting
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstdout[2m | src/services/AuthenticationService.integration.test.ts[2m > [22m[2mAuthenticationService Integration - Rate Limiting[2m > [22m[2mRate Limiting on Login[2m > [22m[2mshould handle case-insensitive usernames for rate limiting
[22m[39m[31merror[39m RateLimitService
[33mwarn[39m RateLimitService

[90mstdout[2m | src/services/AuthenticationService.integration.test.ts[2m > [22m[2mAuthenticationService Integration - Rate Limiting[2m > [22m[2mRate Limiting on Login[2m > [22m[2mshould rate limit even for non-existent users
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.
[31merror[39m RateLimitService
[33mwarn[39m RateLimitService

[90mstdout[2m | src/services/AuthenticationService.integration.test.ts[2m > [22m[2mAuthenticationService Integration - Rate Limiting[2m > [22m[2mRate Limiting on Login[2m > [22m[2mshould rate limit inactive accounts
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [32mâœ“[39m src/types/cache.test.ts [2m([22m[2m18 tests[22m[2m)[22m[90m 114[2mms[22m[39m
 [31mâ¯[39m src/services/ProcessManager.test.ts [2m([22m[2m21 tests[22m[2m | [22m[31m3 failed[39m[2m)[22m[33m 1595[2mms[22m[39m
[31m   [31mÃ—[31m ProcessManager[2m > [22mProcess Cleanup[2m > [22mshould cleanup on startup[90m 9[2mms[22m[31m[39m
[31m     â†’ expected "isPortInUse" to be called at least once[39m
[31m   [31mÃ—[31m ProcessManager[2m > [22mGraceful Shutdown[2m > [22mshould register shutdown handlers[90m 8[2mms[22m[31m[39m
[31m     â†’ expected "spy" to be called with arguments: [ 'before-quit', Any<Function> ][90m

Received: 

[31m[90m

Number of calls: [1m0[22m
[31m[39m
[31m   [31mÃ—[31m ProcessManager[2m > [22mError Handling[2m > [22mshould log errors with context[90m 7[2mms[22m[31m[39m
[31m     â†’ expected "error" to be called with arguments: [ StringContaining{â€¦}, â€¦(2) ][90m

Received: 

[31m[90m

Number of calls: [1m0[22m
[31m[39m
   [33m[2mâœ“[22m[39m ProcessManager[2m > [22mWindows-Specific[2m > [22mshould use taskkill on Windows [33m928[2mms[22m[39m
[90mstdout[2m | src/services/AuthenticationService.integration.test.ts[2m > [22m[2mAuthenticationService Integration - Rate Limiting[2m > [22m[2mRate Limiting on Login[2m > [22m[2mshould rate limit inactive accounts
[22m[39m[31merror[39m RateLimitService
[33mwarn[39m RateLimitService

[90mstdout[2m | src/services/AuthenticationService.integration.test.ts[2m > [22m[2mAuthenticationService Integration - Rate Limiting[2m > [22m[2mRate Limiting Time Window[2m > [22m[2mshould unlock account after 15 minutes
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

[90mstderr[2m | src/views/settings/BackupSettings.test.tsx[2m > [22m[2mBackupSettingsTab[2m > [22m[2mrenders refresh button
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | src/views/settings/BackupSettings.test.tsx[2m > [22m[2mBackupSettingsTab[2m > [22m[2mshows proper icons for each section
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

 [32mâœ“[39m src/repositories/decorators/ValidationDecorator.test.ts [2m([22m[2m16 tests[22m[2m)[22m[90m 106[2mms[22m[39m
 [32mâœ“[39m tests/components/LoginScreen.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[33m 2461[2mms[22m[39m
   [33m[2mâœ“[22m[39m LoginScreen[2m > [22mrenders login form with username, password, and submit button [33m582[2mms[22m[39m
[90mstdout[2m | src/services/AuthenticationService.integration.test.ts[2m > [22m[2mAuthenticationService Integration - Rate Limiting[2m > [22m[2mRate Limiting Time Window[2m > [22m[2mshould unlock account after 15 minutes
[22m[39m[31merror[39m RateLimitService
[33mwarn[39m RateLimitService

[90mstdout[2m | src/services/AuthenticationService.integration.test.ts[2m > [22m[2mAuthenticationService Integration - Rate Limiting[2m > [22m[2mRate Limiting Time Window[2m > [22m[2mshould reset attempt counter after 15 minute window
[22m[39m[TestDatabaseHelper] Initializing in-memory database...
[TestDatabaseHelper] Encryption service initialized with test key
[TestDatabaseHelper] Finding migrations directory...
[TestDatabaseHelper] process.cwd(): F:\Justice Companion take 2
[TestDatabaseHelper] __dirname: F:\Justice Companion take 2\src\test-utils
[TestDatabaseHelper] Checking path: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] âœ… Found migrations at: F:\Justice Companion take 2\src\db\migrations
[TestDatabaseHelper] Running 19 migrations...
[TestDatabaseHelper] Applying migration: 001_initial_schema.sql
[TestDatabaseHelper] Applying migration: 002_chat_history_and_profile.sql
[TestDatabaseHelper] Applying migration: 003_audit_logs.sql
[TestDatabaseHelper] Applying migration: 004_encryption_expansion.sql
[TestDatabaseHelper] Applying migration: 005_user_and_case_facts.sql
[TestDatabaseHelper] Applying migration: 010_authentication_system.sql
[TestDatabaseHelper] Applying migration: 011_add_user_ownership.sql
[TestDatabaseHelper] Applying migration: 012_consent_management.sql
[TestDatabaseHelper] Applying migration: 013_add_remember_me_to_sessions.sql
[TestDatabaseHelper] Applying migration: 014_remove_unused_remember_me_index.sql
[TestDatabaseHelper] Applying migration: 015_add_performance_indexes.sql
[TestDatabaseHelper] Applying migration: 016_create_deadlines_table.sql
[TestDatabaseHelper] Applying migration: 017_create_search_tables.sql
[TestDatabaseHelper] Applying migration: 018_create_notifications_table.sql
[TestDatabaseHelper] Applying migration: 020_create_templates_system.sql
[TestDatabaseHelper] Applying migration: 021_create_events_table.sql
[TestDatabaseHelper] Applying migration: 022_add_backup_settings.sql
[TestDatabaseHelper] Applying migration: 023_create_deadline_dependencies.sql
[TestDatabaseHelper] Applying migration: 024_add_evidence_updated_at.sql
[TestDatabaseHelper] All migrations applied successfully.

 [32mâœ“[39m tests/components/Dashboard.test.tsx [2m([22m[2m18 tests[22m[2m)[22m[33m 3323[2mms[22m[39m
   [33m[2mâœ“[22m[39m Dashboard[2m > [22mrenders all quick action buttons [33m969[2mms[22m[39m
   [33m[2mâœ“[22m[39m Dashboard[2m > [22mcalls callbacks when quick action buttons are clicked [33m952[2mms[22m[39m
 [32mâœ“[39m src/errors/DomainErrors.test.ts [2m([22m[2m14 tests[22m[2m)[22m[90m 68[2mms[22m[39m
 [32mâœ“[39m src/repositories/decorators/CachingDecorator.test.ts [2m([22m[2m7 tests[22m[2m)[22m[90m 49[2mms[22m[39m
[90mstderr[2m | src/views/settings/BackupSettings.test.tsx[2m > [22m[2mBackupSettings - Integration[2m > [22m[2mexpands and collapses backup details
[22m[39mNot implemented: Window's scrollTo() method

 [32mâœ“[39m tests/components/ConsentBanner.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[33m 1788[2mms[22m[39m
   [33m[2mâœ“[22m[39m ConsentBanner[2m > [22mrenders consent banner with message and buttons [33m497[2mms[22m[39m
[90mstderr[2m | src/views/settings/BackupSettings.test.tsx[2m > [22m[2mBackupSettings - Integration[2m > [22m[2mupdates frequency and reflects in UI
[22m[39mNot implemented: Window's scrollTo() method

 [32mâœ“[39m src/views/settings/BackupSettings.test.tsx [2m([22m[2m25 tests[22m[2m)[22m[33m 10625[2mms[22m[39m
   [33m[2mâœ“[22m[39m BackupSettingsTab[2m > [22mshows create backup button [33m716[2mms[22m[39m
   [33m[2mâœ“[22m[39m BackupSettingsTab[2m > [22mrenders backup list items with actions [33m2146[2mms[22m[39m
   [33m[2mâœ“[22m[39m BackupSettingsTab[2m > [22mshows backup metadata when expanded [33m318[2mms[22m[39m
   [33m[2mâœ“[22m[39m BackupSettingsTab[2m > [22mhandles save settings button [33m2311[2mms[22m[39m
   [33m[2mâœ“[22m[39m BackupSettingsTab[2m > [22mshows loading spinner during backup creation [33m1432[2mms[22m[39m
   [33m[2mâœ“[22m[39m BackupSettingsTab[2m > [22mrenders refresh button [33m310[2mms[22m[39m
   [33m[2mâœ“[22m[39m BackupSettings - Accessibility[2m > [22mbuttons are keyboard accessible [33m518[2mms[22m[39m
   [33m[2mâœ“[22m[39m BackupSettings - Integration[2m > [22mexpands and collapses backup details [33m640[2mms[22m[39m
 [32mâœ“[39m src/services/AuthenticationService.integration.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 4166[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting on Login[2m > [22mshould block login after 5 failed attempts [33m549[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting on Login[2m > [22mshould provide specific lock time in error message [33m589[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting on Login[2m > [22mshould clear rate limit after successful login [33m652[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting Time Window[2m > [22mshould unlock account after 15 minutes [33m733[2mms[22m[39m
   [33m[2mâœ“[22m[39m AuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting Time Window[2m > [22mshould reset attempt counter after 15 minute window [33m1027[2mms[22m[39m
 [31mâ¯[39m src/services/ChatConversationService.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m src/services/ConsentService.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m src/services/RAGService.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m src/services/UserProfileService.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31mâ¯[39m src/services/AIServiceFactory.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [32mâœ“[39m src/services/LegalAPIService.test.ts [2m([22m[2m11 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[33m 495[2mms[22m[39m
   [33m[2mâœ“[22m[39m LegalAPIService[2m > [22msearchLegalInfo[2m > [22mshould return LegalSearchResults structure [33m330[2mms[22m[39m
 [32mâœ“[39m src/views/CasesView.test.tsx [2m([22m[2m8 tests[22m[2m)[22m[33m 2685[2mms[22m[39m
   [33m[2mâœ“[22m[39m CasesView[2m > [22mrenders an error state and allows retry [33m848[2mms[22m[39m
   [33m[2mâœ“[22m[39m CasesView[2m > [22mallows creating a new case [33m731[2mms[22m[39m
 [31mâ¯[39m src/utils/passwordValidation.test.ts [2m([22m[2m10 tests[22m[2m | [22m[31m1 failed[39m[2m)[22m[90m 40[2mms[22m[39m
[31m   [31mÃ—[31m validatePasswordChange[2m > [22mshould return error when passwords do not match[90m 13[2mms[22m[31m[39m
[31m     â†’ expected true to be false // Object.is equality[39m
 [32mâœ“[39m src/utils/error-logger.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 689[2mms[22m[39m
   [33m[2mâœ“[22m[39m ErrorLogger[2m > [22mshould maintain max number of backups [33m363[2mms[22m[39m
 [32mâœ“[39m src/views/timeline/components/AddDeadlineDialog.test.tsx [2m([22m[2m25 tests[22m[2m)[22m[33m 16822[2mms[22m[39m
   [33m[2mâœ“[22m[39m AddDeadlineDialog[2m > [22mRendering[2m > [22mshould render dialog when open [33m391[2mms[22m[39m
   [33m[2mâœ“[22m[39m AddDeadlineDialog[2m > [22mRendering[2m > [22mshould render action buttons [33m446[2mms[22m[39m
   [33m[2mâœ“[22m[39m AddDeadlineDialog[2m > [22mForm Validation[2m > [22mshould require title field [33m431[2mms[22m[39m
   [33m[2mâœ“[22m[39m AddDeadlineDialog[2m > [22mForm Validation[2m > [22mshould require case selection [33m917[2mms[22m[39m
   [33m[2mâœ“[22m[39m AddDeadlineDialog[2m > [22mForm Validation[2m > [22mshould require deadline date [33m1090[2mms[22m[39m
   [33m[2mâœ“[22m[39m AddDeadlineDialog[2m > [22mForm Validation[2m > [22mshould not allow past dates [33m1279[2mms[22m[39m
   [33m[2mâœ“[22m[39m AddDeadlineDialog[2m > [22mForm Validation[2m > [22mshould validate title length (max 200 characters) [33m4911[2mms[22m[39m
   [33m[2mâœ“[22m[39m AddDeadlineDialog[2m > [22mForm Submission[2m > [22mshould submit valid form data [33m1989[2mms[22m[39m
   [33m[2mâœ“[22m[39m AddDeadlineDialog[2m > [22mForm Submission[2m > [22mshould close dialog after successful submission [33m1194[2mms[22m[39m
   [33m[2mâœ“[22m[39m AddDeadlineDialog[2m > [22mForm Submission[2m > [22mshould show error message on submission failure [33m1382[2mms[22m[39m
   [33m[2mâœ“[22m[39m AddDeadlineDialog[2m > [22mForm Submission[2m > [22mshould disable submit button while submitting [33m1153[2mms[22m[39m
   [33m[2mâœ“[22m[39m AddDeadlineDialog[2m > [22mCancel Action[2m > [22mshould reset form when reopened after cancel [33m796[2mms[22m[39m
[90mstderr[2m | tests/components/Sidebar.test.tsx[2m > [22m[2mSidebar[2m > [22m[2mrenders all navigation links
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | tests/components/Sidebar.test.tsx[2m > [22m[2mSidebar[2m > [22m[2mhighlights the active navigation link
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | tests/components/Sidebar.test.tsx[2m > [22m[2mSidebar[2m > [22m[2mdisplays user information
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | tests/components/Sidebar.test.tsx[2m > [22m[2mSidebar[2m > [22m[2mdoes not show user info when user is null
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | tests/components/Sidebar.test.tsx[2m > [22m[2mSidebar[2m > [22m[2mcalls onLogout when logout button is clicked
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | tests/components/Sidebar.test.tsx[2m > [22m[2mSidebar[2m > [22m[2mnavigation links have correct href attributes
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | tests/components/Sidebar.test.tsx[2m > [22m[2mSidebar[2m > [22m[2mcalls onNavigate when navigation link is clicked
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | tests/components/Sidebar.test.tsx[2m > [22m[2mSidebar[2m > [22m[2mdisplays app title or logo
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | tests/components/Sidebar.test.tsx[2m > [22m[2mSidebar[2m > [22m[2mhas proper navigation landmark
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | tests/components/Sidebar.test.tsx[2m > [22m[2mSidebar[2m > [22m[2mnavigation links include icons
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | tests/components/Sidebar.test.tsx[2m > [22m[2mSidebar[2m > [22m[2mcan be collapsed and expanded
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | tests/components/Sidebar.test.tsx[2m > [22m[2mSidebar[2m > [22m[2mhides text labels when collapsed
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | tests/components/Sidebar.test.tsx[2m > [22m[2mSidebar[2m > [22m[2mcalls onToggleCollapse when toggle button is clicked
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | tests/components/Sidebar.test.tsx[2m > [22m[2mSidebar[2m > [22m[2msupports keyboard navigation
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

[90mstderr[2m | tests/components/Sidebar.test.tsx[2m > [22m[2mSidebar[2m > [22m[2mdisplays notification badge when provided
[22m[39mWarning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s
Warning: An update to %s inside a test was not wrapped in act(...).

When testing, code that causes React state updates should be wrapped into act(...):

act(() => {
  /* fire events that update state */
});
/* assert on the output */

This ensures that you're testing the behavior the user would see in the browser. Learn more at https://reactjs.org/link/wrap-tests-with-act%s

 [32mâœ“[39m tests/components/Sidebar.test.tsx [2m([22m[2m15 tests[22m[2m)[22m[33m 4249[2mms[22m[39m
   [33m[2mâœ“[22m[39m Sidebar[2m > [22mrenders all navigation links [33m1739[2mms[22m[39m
   [33m[2mâœ“[22m[39m Sidebar[2m > [22mhighlights the active navigation link [33m754[2mms[22m[39m
   [33m[2mâœ“[22m[39m Sidebar[2m > [22mnavigation links have correct href attributes [33m646[2mms[22m[39m
   [33m[2mâœ“[22m[39m Sidebar[2m > [22mcalls onNavigate when navigation link is clicked [33m410[2mms[22m[39m
   [33m[2mâœ“[22m[39m Sidebar[2m > [22msupports keyboard navigation [33m308[2mms[22m[39m
 [32mâœ“[39m src/views/timeline/components/TimelineEmpty.test.tsx [2m([22m[2m13 tests[22m[2m)[22m[33m 1232[2mms[22m[39m
 [31mâ¯[39m src/services/StartupMetrics.test.ts [2m([22m[2m12 tests[22m[2m | [22m[31m4 failed[39m[2m)[22m[33m 15525[2mms[22m[39m
[31m   [31mÃ—[31m StartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould log formatted metrics to console[90m 104[2mms[22m[31m[39m
[31m     â†’ expected "info" to be called at least once[39m
[31m   [31mÃ—[31m StartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould show N/A for unrecorded phases[90m 10[2mms[22m[31m[39m
[31m     â†’ expected "info" to be called at least once[39m
[31m   [31mÃ—[31m StartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould show performance indicators[90m 86[2mms[22m[31m[39m
[31m     â†’ expected "info" to be called at least once[39m
[31m   [31mÃ—[31m StartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould show recommendations for slow startup[33m 10013[2mms[22m[31m[39m
[31m     â†’ Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
   [33m[2mâœ“[22m[39m StartupMetrics[2m > [22mexportMetrics[2m > [22mshould categorize performance correctly [33m1342[2mms[22m[39m
   [33m[2mâœ“[22m[39m StartupMetrics[2m > [22mformatDuration[2m > [22mshould format durations correctly [33m3558[2mms[22m[39m
   [33m[2mâœ“[22m[39m StartupMetrics[2m > [22mphase deltas[2m > [22mshould calculate phase deltas correctly [33m365[2mms[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Suites 10 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/AIServiceFactory.test.ts[2m [ src/services/AIServiceFactory.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m src/services/ChatConversationService.test.ts[2m [ src/services/ChatConversationService.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m src/services/ConsentService.test.ts[2m [ src/services/ConsentService.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m src/services/RAGService.test.ts[2m [ src/services/RAGService.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m src/services/UserProfileService.test.ts[2m [ src/services/UserProfileService.test.ts ][22m
[31m[1mReferenceError[22m: window is not defined[39m
[36m [2mâ¯[22m tests/setup.ts:[2m306:15[22m[39m
    [90m304| [39m
    [90m305| [39m[90m// Extend jsdom window with our mocks[39m
    [90m306| [39m[33mObject[39m[33m.[39m[34massign[39m(window[33m,[39m {
    [90m   | [39m              [31m^[39m
    [90m307| [39m  localStorage[33m:[39m [34mcreateLocalStorageMock[39m()[33m,[39m
    [90m308| [39m  justiceAPI[33m:[39m [34mcreateJusticeAPIMock[39m() [35mas[39m unknown [35mas[39m [33mWindowJusticeAPI[39m[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.e2e.test.ts[2m [ src/services/AuditLogger.e2e.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "better-sqlite3" from "src/services/AuditLogger.e2e.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36mF:/Justice Companion take 2/src/services/AuditLogger.e2e.test.ts[39m:4:21
[33m  2  |  import { AuditLogger } from "./AuditLogger.ts";
  3  |  import { EncryptionService } from "./EncryptionService.ts";
  4  |  import Database from "better-sqlite3";
     |                        ^
  5  |  describe("AuditLogger E2E", () => {
  6  |    let auditLogger;[39m
[90m [2mâ¯[22m TransformPluginContext._formatError ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49258:41[22m[39m
[90m [2mâ¯[22m TransformPluginContext.error ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49253:16[22m[39m
[90m [2mâ¯[22m normalizeUrl ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m64307:23[22m[39m
[90m [2mâ¯[22m ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m64439:39[22m[39m
[90m [2mâ¯[22m TransformPluginContext.transform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m64366:7[22m[39m
[90m [2mâ¯[22m PluginContainer.transform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49099:18[22m[39m
[90m [2mâ¯[22m loadAndTransform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m51978:27[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/AuthorizationService.test.ts[2m [ src/services/AuthorizationService.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "better-sqlite3" from "src/services/AuthorizationService.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36mF:/Justice Companion take 2/src/services/AuthorizationService.test.ts[39m:2:21
[33m  1  |  import { describe, it, expect, beforeEach } from "vitest";
  2  |  import Database from "better-sqlite3";
     |                        ^
  3  |  import { AuthorizationService } from "./AuthorizationService.ts";
  4  |  import fs from "fs";[39m
[90m [2mâ¯[22m TransformPluginContext._formatError ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49258:41[22m[39m
[90m [2mâ¯[22m TransformPluginContext.error ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49253:16[22m[39m
[90m [2mâ¯[22m normalizeUrl ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m64307:23[22m[39m
[90m [2mâ¯[22m ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m64439:39[22m[39m
[90m [2mâ¯[22m TransformPluginContext.transform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m64366:7[22m[39m
[90m [2mâ¯[22m PluginContainer.transform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49099:18[22m[39m
[90m [2mâ¯[22m loadAndTransform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m51978:27[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/TagService.test.ts[2m [ src/services/TagService.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "better-sqlite3" from "src/services/TagService.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36mF:/Justice Companion take 2/src/services/TagService.test.ts[39m:7:21
[33m  1  |  import { describe, it, expect, beforeEach, afterEach } from "vitest";
  2  |  import Database from "better-sqlite3";
     |                        ^
  3  |  import { TagService } from "./TagService.ts";
  4  |  let db;[39m
[90m [2mâ¯[22m TransformPluginContext._formatError ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49258:41[22m[39m
[90m [2mâ¯[22m TransformPluginContext.error ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49253:16[22m[39m
[90m [2mâ¯[22m normalizeUrl ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m64307:23[22m[39m
[90m [2mâ¯[22m ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m64439:39[22m[39m
[90m [2mâ¯[22m TransformPluginContext.transform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m64366:7[22m[39m
[90m [2mâ¯[22m PluginContainer.transform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49099:18[22m[39m
[90m [2mâ¯[22m loadAndTransform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m51978:27[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/shared/infrastructure/events/EventBus.test.ts[2m [ src/shared/infrastructure/events/EventBus.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "better-sqlite3" from "src/shared/infrastructure/events/EventBus.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36mF:/Justice Companion take 2/src/shared/infrastructure/events/EventBus.test.ts[39m:2:21
[33m  1  |  import { describe, it, expect, beforeEach } from "vitest";
  2  |  import Database from "better-sqlite3";
     |                        ^
  3  |  import { EventBus } from "./EventBus.ts";
  4  |  class TestEvent {[39m
[90m [2mâ¯[22m TransformPluginContext._formatError ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49258:41[22m[39m
[90m [2mâ¯[22m TransformPluginContext.error ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49253:16[22m[39m
[90m [2mâ¯[22m normalizeUrl ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m64307:23[22m[39m
[90m [2mâ¯[22m ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m64439:39[22m[39m
[90m [2mâ¯[22m TransformPluginContext.transform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m64366:7[22m[39m
[90m [2mâ¯[22m PluginContainer.transform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49099:18[22m[39m
[90m [2mâ¯[22m loadAndTransform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m51978:27[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/shared/infrastructure/di/container.test.ts[2m [ src/shared/infrastructure/di/container.test.ts ][22m
[31m[1mError[22m: Failed to resolve import "better-sqlite3" from "src/shared/infrastructure/di/container.test.ts". Does the file exist?[39m
  Plugin: [35mvite:import-analysis[39m
  File: [36mF:/Justice Companion take 2/src/shared/infrastructure/di/container.test.ts[39m:9:21
[33m  1  |  import { describe, it, expect, beforeEach, afterEach } from "vitest";
  2  |  import Database from "better-sqlite3";
     |                        ^
  3  |  import { createTestContainer, resetContainer } from "./container.ts";
  4  |  import { TYPES } from "./types.ts";[39m
[90m [2mâ¯[22m TransformPluginContext._formatError ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49258:41[22m[39m
[90m [2mâ¯[22m TransformPluginContext.error ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49253:16[22m[39m
[90m [2mâ¯[22m normalizeUrl ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m64307:23[22m[39m
[90m [2mâ¯[22m ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m64439:39[22m[39m
[90m [2mâ¯[22m TransformPluginContext.transform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m64366:7[22m[39m
[90m [2mâ¯[22m PluginContainer.transform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m49099:18[22m[39m
[90m [2mâ¯[22m loadAndTransform ../Justice%20Companion%20take%202/node_modules/.pnpm/vite@5.4.21_@types+node@22.18.10/node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m51978:27[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/32]âŽ¯[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 22 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m src/repositories/EvidenceRepository.paginated.test.ts[2m > [22mEvidenceRepository - Cursor Pagination[2m > [22mfindByCaseIdPaginated[2m > [22mshould return second page using cursor
[31m[1mAssertionError[22m: expected undefined to be null[39m

[32m- Expected:[39m 
null

[31m+ Received:[39m 
undefined

[36m [2mâ¯[22m src/repositories/EvidenceRepository.paginated.test.ts:[2m112:32[22m[39m
    [90m110| [39m      [34mexpect[39m(page2[33m.[39mitems)[33m.[39m[34mtoHaveLength[39m([34m2[39m)[33m;[39m
    [90m111| [39m      [34mexpect[39m(page2[33m.[39mhasMore)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m112| [39m      [34mexpect[39m(page2[33m.[39mnextCursor)[33m.[39m[34mtoBeNull[39m()[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m113| [39m      [34mexpect[39m(page2[33m.[39mitems[[34m0[39m][33m.[39mtitle)[33m.[39m[34mtoBe[39m([32m'Evidence 2'[39m)[33m;[39m
    [90m114| [39m      [34mexpect[39m(page2[33m.[39mitems[[34m1[39m][33m.[39mtitle)[33m.[39m[34mtoBe[39m([32m'Evidence 1'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/repositories/EvidenceRepository.paginated.test.ts[2m > [22mEvidenceRepository - Cursor Pagination[2m > [22mfindByCaseIdPaginated[2m > [22mshould return empty result when no evidence exists
[31m[1mAssertionError[22m: expected undefined to be null[39m

[32m- Expected:[39m 
null

[31m+ Received:[39m 
undefined

[36m [2mâ¯[22m src/repositories/EvidenceRepository.paginated.test.ts:[2m122:33[22m[39m
    [90m120| [39m      [34mexpect[39m(result[33m.[39mitems)[33m.[39m[34mtoHaveLength[39m([34m0[39m)[33m;[39m
    [90m121| [39m      [34mexpect[39m(result[33m.[39mhasMore)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m122| [39m      [34mexpect[39m(result[33m.[39mnextCursor)[33m.[39m[34mtoBeNull[39m()[33m;[39m
    [90m   | [39m                                [31m^[39m
    [90m123| [39m      [34mexpect[39m(result[33m.[39mtotalReturned)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m
    [90m124| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/repositories/EvidenceRepository.paginated.test.ts[2m > [22mEvidenceRepository - Cursor Pagination[2m > [22mfindByCaseIdPaginated[2m > [22mshould handle exact page size boundary
[31m[1mAssertionError[22m: expected undefined to be null[39m

[32m- Expected:[39m 
null

[31m+ Received:[39m 
undefined

[36m [2mâ¯[22m src/repositories/EvidenceRepository.paginated.test.ts:[2m169:33[22m[39m
    [90m167| [39m      [34mexpect[39m(result[33m.[39mitems)[33m.[39m[34mtoHaveLength[39m([34m10[39m)[33m;[39m
    [90m168| [39m      [34mexpect[39m(result[33m.[39mhasMore)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m169| [39m      [34mexpect[39m(result[33m.[39mnextCursor)[33m.[39m[34mtoBeNull[39m()[33m;[39m
    [90m   | [39m                                [31m^[39m
    [90m170| [39m    })[33m;[39m
    [90m171| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/AuditLogger.test.ts[2m > [22mAuditLogger[2m > [22mError Handling[2m > [22mdoes not throw on logging failure
[31m[1mAssertionError[22m: expected "error" to be called at least once[39m
[36m [2mâ¯[22m src/services/AuditLogger.test.ts:[2m643:31[22m[39m
    [90m641| [39m
    [90m642| [39m      [90m// Verify error was logged (structured logger format)[39m
    [90m643| [39m      [34mexpect[39m(consoleErrorSpy)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m644| [39m      [35mconst[39m lastCall [33m=[39m consoleErrorSpy[33m.[39mmock[33m.[39mcalls[consoleErrorSpy[33m.[39mmockâ€¦
    [90m645| [39m      [34mexpect[39m(lastCall)[33m.[39m[34mtoContain[39m([32m'âŒ Audit logging failed:'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ProcessManager.test.ts[2m > [22mProcessManager[2m > [22mProcess Cleanup[2m > [22mshould cleanup on startup
[31m[1mAssertionError[22m: expected "isPortInUse" to be called at least once[39m
[36m [2mâ¯[22m src/services/ProcessManager.test.ts:[2m128:30[22m[39m
    [90m126| [39m
    [90m127| [39m      [90m// Should check if ports are in use[39m
    [90m128| [39m      [34mexpect[39m(isPortInUseSpy)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m129| [39m      [90m// Should kill processes if ports are in use[39m
    [90m130| [39m      [34mexpect[39m(killSpy)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ProcessManager.test.ts[2m > [22mProcessManager[2m > [22mGraceful Shutdown[2m > [22mshould register shutdown handlers
[31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ 'before-quit', Any<Function> ][90m

Received: 

[31m[90m

Number of calls: [1m0[22m
[31m[39m
[36m [2mâ¯[22m src/services/ProcessManager.test.ts:[2m146:26[22m[39m
    [90m144| [39m      processManager[33m.[39m[34mregisterShutdownHandlers[39m()[33m;[39m
    [90m145| [39m
    [90m146| [39m      [34mexpect[39m(mockApp[33m.[39mon)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                         [31m^[39m
    [90m147| [39m        [32m"before-quit"[39m[33m,[39m
    [90m148| [39m        expect[33m.[39m[34many[39m([33mFunction[39m)

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ProcessManager.test.ts[2m > [22mProcessManager[2m > [22mError Handling[2m > [22mshould log errors with context
[31m[1mAssertionError[22m: expected "error" to be called with arguments: [ StringContaining{â€¦}, â€¦(2) ][90m

Received: 

[31m[90m

Number of calls: [1m0[22m
[31m[39m
[36m [2mâ¯[22m src/services/ProcessManager.test.ts:[2m214:26[22m[39m
    [90m212| [39m      processManager[33m.[39m[34mlogError[39m([35mnew[39m [33mError[39m([32m"Test error"[39m)[33m,[39m { context[33m:[39m [32m"tes[39mâ€¦
    [90m213| [39m
    [90m214| [39m      [34mexpect[39m(consoleSpy)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                         [31m^[39m
    [90m215| [39m        expect[33m.[39m[34mstringContaining[39m([32m"[ProcessManager]"[39m)[33m,[39m
    [90m216| [39m        expect[33m.[39m[34many[39m([33mString[39m)[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ProfileService.test.ts[2m > [22mProfileService[2m > [22mget()[2m > [22mshould handle localStorage errors gracefully
[31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ â€¦(2) ][90m

Received: 

[1m  1st spy call:

[22m[2m  Array [[22m
[2m    "[ProfileService] Error retrieving profile:",[22m
[32m-   Any<Error>,[90m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m src/services/ProfileService.test.ts:[2m131:32[22m[39m
    [90m129| [39m
    [90m130| [39m      [34mexpect[39m(result)[33m.[39m[34mtoBeNull[39m()[33m;[39m
    [90m131| [39m      [34mexpect[39m(consoleErrorMock)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                               [31m^[39m
    [90m132| [39m        [32m"[ProfileService] Error retrieving profile:"[39m[33m,[39m
    [90m133| [39m        expect[33m.[39m[34many[39m([33mError[39m)

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/ProfileService.test.ts[2m > [22mProfileService[2m > [22mupdate()[2m > [22mshould successfully update profile data
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2mâ¯[22m src/services/ProfileService.test.ts:[2m152:30[22m[39m
    [90m150| [39m      [35mconst[39m result [33m=[39m [35mawait[39m profileService[33m.[39m[34mupdate[39m(profileUpdate)[33m;[39m
    [90m151| [39m
    [90m152| [39m      [34mexpect[39m(result[33m.[39msuccess)[33m.[39m[34mtoBe[39m([35mtrue[39m)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m153| [39m      [34mexpect[39m(result[33m.[39mmessage)[33m.[39m[34mtoBe[39m([32m"Profile updated successfully"[39m)[33m;[39m
    [90m154| [39m      [34mexpect[39m(result[33m.[39mupdatedFields)[33m.[39m[34mtoEqual[39m({

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSecurity Logging[2m > [22mshould log when account is locked
[31m[1mAssertionError[22m: expected "error" to be called at least once[39m
[36m [2mâ¯[22m src/services/RateLimitService.test.ts:[2m230:31[22m[39m
    [90m228| [39m
    [90m229| [39m      [90m// Structured logger combines all args into single formatted str[39mâ€¦
    [90m230| [39m      [34mexpect[39m(consoleErrorSpy)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m231| [39m      [35mconst[39m lastCall [33m=[39m consoleErrorSpy[33m.[39mmock[33m.[39mcalls[consoleErrorSpy[33m.[39mmockâ€¦
    [90m232| [39m      [34mexpect[39m(lastCall)[33m.[39m[34mtoContain[39m([32m'BRUTE FORCE DETECTED for testuser'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/RateLimitService.test.ts[2m > [22mRateLimitService[2m > [22mSecurity Logging[2m > [22mshould log rate limit violations
[31m[1mAssertionError[22m: expected "warn" to be called at least once[39m
[36m [2mâ¯[22m src/services/RateLimitService.test.ts:[2m247:30[22m[39m
    [90m245| [39m
    [90m246| [39m      [90m// Structured logger combines all args into single formatted str[39mâ€¦
    [90m247| [39m      [34mexpect[39m(consoleWarnSpy)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m248| [39m      [35mconst[39m lastCall [33m=[39m consoleWarnSpy[33m.[39mmock[33m.[39mcalls[consoleWarnSpy[33m.[39mmock[33m.[39mcâ€¦
    [90m249| [39m      [34mexpect[39m(lastCall)[33m.[39m[34mtoContain[39m([32m'Rate limit exceeded for testuser'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/SearchService.test.ts[2m > [22mSearchService[2m > [22msearch[2m > [22mshould handle search errors gracefully
[31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ 'search_query', ObjectContaining{â€¦} ][90m

Received: 

[1m  1st spy call:

[22m[2m  Array [[22m
[32m-   "search_query",[90m
[32m-   ObjectContaining {[90m
[31m+   Object {[90m
[31m+     "action": "read",[90m
[31m+     "details": Object {[90m
[31m+       "filters": undefined,[90m
[2m        "query": "error test",[22m
[32m-     "userId": 1,[90m
[31m+     },[90m
[31m+     "eventType": "query.paginated",[90m
[31m+     "resourceId": "global",[90m
[31m+     "resourceType": "search",[90m
[31m+     "success": true,[90m
[31m+     "userId": "1",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m src/services/SearchService.test.ts:[2m163:35[22m[39m
    [90m161| [39m      [90m// Should return empty results on error (fallback search)[39m
    [90m162| [39m      [34mexpect[39m(result[33m.[39mresults)[33m.[39m[34mtoEqual[39m([])[33m;[39m
    [90m163| [39m      [34mexpect[39m(mockAuditLogger[33m.[39mlog)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                                  [31m^[39m
    [90m164| [39m        [32m"search_query"[39m[33m,[39m
    [90m165| [39m        expect[33m.[39m[34mobjectContaining[39m({

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/SearchService.test.ts[2m > [22mSearchService[2m > [22msaveSearch[2m > [22mshould save a search query
[31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ 'search_saved', ObjectContaining{â€¦} ][90m

Received: 

[1m  1st spy call:

[22m[2m  Array [[22m
[32m-   "search_saved",[90m
[32m-   ObjectContaining {[90m
[31m+   Object {[90m
[31m+     "action": "create",[90m
[31m+     "details": Object {[90m
[2m        "name": "My Search",[22m
[32m-     "searchId": 1,[90m
[32m-     "userId": 1,[90m
[31m+       "query": Object {[90m
[31m+         "filters": Object {[90m
[31m+           "caseStatus": Array [[90m
[31m+             "active",[90m
[31m+           ],[90m
[31m+         },[90m
[31m+         "query": "test",[90m
[31m+       },[90m
[31m+     },[90m
[31m+     "eventType": "query.paginated",[90m
[31m+     "resourceId": "1",[90m
[31m+     "resourceType": "search.saved",[90m
[31m+     "success": true,[90m
[31m+     "userId": "1",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m src/services/SearchService.test.ts:[2m203:35[22m[39m
    [90m201| [39m        queryJson[33m:[39m [33mJSON[39m[33m.[39m[34mstringify[39m(query)[33m,[39m
    [90m202| [39m      })[33m;[39m
    [90m203| [39m      [34mexpect[39m(mockAuditLogger[33m.[39mlog)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                                  [31m^[39m
    [90m204| [39m        [32m"search_saved"[39m[33m,[39m
    [90m205| [39m        expect[33m.[39m[34mobjectContaining[39m({

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[19/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/SearchService.test.ts[2m > [22mSearchService[2m > [22mdeleteSavedSearch[2m > [22mshould delete a saved search
[31m[1mAssertionError[22m: expected "spy" to be called with arguments: [ 'search_deleted', â€¦(1) ][90m

Received: 

[1m  1st spy call:

[22m[2m  Array [[22m
[32m-   "search_deleted",[90m
[32m-   ObjectContaining {[90m
[32m-     "searchId": 5,[90m
[32m-     "userId": 1,[90m
[31m+   Object {[90m
[31m+     "action": "delete",[90m
[31m+     "eventType": "query.paginated",[90m
[31m+     "resourceId": "5",[90m
[31m+     "resourceType": "search.saved",[90m
[31m+     "success": true,[90m
[31m+     "userId": "1",[90m
[2m    },[22m
[2m  ][22m
[31m[90m

Number of calls: [1m1[22m
[31m[39m
[36m [2mâ¯[22m src/services/SearchService.test.ts:[2m259:35[22m[39m
    [90m257| [39m      [35mawait[39m searchService[33m.[39m[34mdeleteSavedSearch[39m([34m1[39m[33m,[39m [34m5[39m)[33m;[39m
    [90m258| [39m
    [90m259| [39m      [34mexpect[39m(mockAuditLogger[33m.[39mlog)[33m.[39m[34mtoHaveBeenCalledWith[39m(
    [90m   | [39m                                  [31m^[39m
    [90m260| [39m        [32m"search_deleted"[39m[33m,[39m
    [90m261| [39m        expect[33m.[39m[34mobjectContaining[39m({

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[20/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould log formatted metrics to console
[31m[1mAssertionError[22m: expected "info" to be called at least once[39m
[36m [2mâ¯[22m src/services/StartupMetrics.test.ts:[2m80:30[22m[39m
    [90m 78| [39m      metrics[33m.[39m[34mlogStartupMetrics[39m()[33m;[39m
    [90m 79| [39m
    [90m 80| [39m      [34mexpect[39m(consoleInfoSpy)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m 81| [39m
    [90m 82| [39m      [90m// Check for key output strings - structured logger combines int[39mâ€¦

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[21/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould show N/A for unrecorded phases
[31m[1mAssertionError[22m: expected "info" to be called at least once[39m
[36m [2mâ¯[22m src/services/StartupMetrics.test.ts:[2m100:30[22m[39m
    [90m 98| [39m      [90m// N/A is shown for phases that weren't recorded - but might not[39mâ€¦
    [90m 99| [39m      [90m// Just verify metrics were logged[39m
    [90m100| [39m      [34mexpect[39m(consoleInfoSpy)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m101| [39m      [34mexpect[39m(output[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m102| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould show performance indicators
[31m[1mAssertionError[22m: expected "info" to be called at least once[39m
[36m [2mâ¯[22m src/services/StartupMetrics.test.ts:[2m124:30[22m[39m
    [90m122| [39m      [90m// Should contain indicator symbols (checkmark, warning, or cros[39mâ€¦
    [90m123| [39m      [90m// Just verify metrics were logged with some content[39m
    [90m124| [39m      [34mexpect[39m(consoleInfoSpy)[33m.[39m[34mtoHaveBeenCalled[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m125| [39m      [34mexpect[39m(output[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m100[39m)[33m;[39m [90m// Substantial output[39m
    [90m126| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[23/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/StartupMetrics.test.ts[2m > [22mStartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould show recommendations for slow startup
[31m[1mError[22m: Test timed out in 10000ms.
If this is a long-running test, pass a timeout value as the last argument or configure it globally with "testTimeout".[39m
[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[24/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/utils/passwordValidation.test.ts[2m > [22mvalidatePasswordChange[2m > [22mshould return error when passwords do not match
[31m[1mAssertionError[22m: expected true to be false // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- false[39m
[31m+ true[39m

[36m [2mâ¯[22m src/utils/passwordValidation.test.ts:[2m95:28[22m[39m
    [90m 93| [39m    )[33m;[39m
    [90m 94| [39m
    [90m 95| [39m    [34mexpect[39m(result[33m.[39misValid)[33m.[39m[34mtoBe[39m([35mfalse[39m)[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m 96| [39m    [34mexpect[39m(result[33m.[39merror)[33m.[39m[34mtoBe[39m([32m"New passwords do not match"[39m)[33m;[39m
    [90m 97| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[25/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/gdpr/Gdpr.integration.test.ts[2m > [22mGDPR Integration Tests[2m > [22mArticle 17: Right to Erasure (Delete)[2m > [22mshould delete all user data except audit logs and consents
[31m[1mAssertionError[22m: expected +0 to be 2 // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- 2[39m
[31m+ 0[39m

[36m [2mâ¯[22m src/services/gdpr/Gdpr.integration.test.ts:[2m295:31[22m[39m
    [90m293| [39m        [33m.[39m[34mprepare[39m([32m`SELECT * FROM consents WHERE user_id = ?`[39m)
    [90m294| [39m        [33m.[39m[34mall[39m(testUserId) [35mas[39m any[][33m;[39m
    [90m295| [39m      [34mexpect[39m(consents[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m2[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m296| [39m      [34mexpect[39m(result[33m.[39mpreservedConsents)[33m.[39m[34mtoBe[39m([34m2[39m)[33m;[39m
    [90m297| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[26/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m src/services/gdpr/Gdpr.integration.test.ts[2m > [22mGDPR Integration Tests[2m > [22mArticle 17: Right to Erasure (Delete)[2m > [22mshould require explicit confirmation
[31m[1mAssertionError[22m: promise resolved "{ success: true, â€¦(5) }" instead of rejecting[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- [Error: rejected promise][39m
[31m+ Object {[39m
[31m+   "deletedCounts": Object {[39m
[31m+     "actions": 1,[39m
[31m+     "case_facts": 1,[39m
[31m+     "cases": 1,[39m
[31m+     "chat_conversations": 1,[39m
[31m+     "chat_messages": 0,[39m
[31m+     "event_evidence": 1,[39m
[31m+     "evidence": 1,[39m
[31m+     "legal_issues": 1,[39m
[31m+     "notes": 1,[39m
[31m+     "sessions": 1,[39m
[31m+     "timeline_events": 1,[39m
[31m+     "user_facts": 0,[39m
[31m+     "users": 1,[39m
[31m+   },[39m
[31m+   "deletionDate": "2025-11-09T21:35:58.084Z",[39m
[31m+   "exportPath": undefined,[39m
[31m+   "preservedAuditLogs": 2,[39m
[31m+   "preservedConsents": 2,[39m
[31m+   "success": true,[39m
[31m+ }[39m

[36m [2mâ¯[22m src/services/gdpr/Gdpr.integration.test.ts:[2m308:7[22m[39m
    [90m306| [39m      [35mawait[39m [34mexpect[39m(
    [90m307| [39m        gdprService[33m.[39m[34mdeleteUserData[39m(testUserId[33m,[39m { confirmed[33m:[39m [35mfalse[39m })
    [90m308| [39m      )[33m.[39mrejects[33m.[39m[34mtoThrow[39m([32m"explicit confirmation"[39m)[33m;[39m
    [90m   | [39m      [31m^[39m
    [90m309| [39m    })[33m;[39m
    [90m310| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[27/32]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/components/RegistrationScreen.test.tsx[2m > [22mRegistrationScreen[2m > [22mshows error message when registration fails
[31m[1mTestingLibraryElementError[22m[39m: Unable to find an element with the text: /username already exists/i. This could be because the text is broken up by multiple elements. In this case, you can provide a function for your text matcher to make your matcher more flexible.

Ignored nodes: comments, script, style
[36m<body>[39m
  [36m<div>[39m
    [36m<div[39m
      [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-primary-900"[39m
    [36m>[39m
      [36m<div[39m
        [33mclass[39m=[32m"w-full max-w-md p-8 space-y-6 bg-primary-800 rounded-lg shadow-xl"[39m
      [36m>[39m
        [36m<div>[39m
          [36m<h2[39m
            [33mclass[39m=[32m"text-3xl font-bold text-center text-white"[39m
          [36m>[39m
            [0mCreate Account[0m
          [36m</h2>[39m
          [36m<p[39m
            [33mclass[39m=[32m"mt-2 text-center text-white/90"[39m
          [36m>[39m
            [0mJoin Justice Companion[0m
          [36m</p>[39m
        [36m</div>[39m
        [36m<form[39m
          [33mclass[39m=[32m"space-y-4"[39m
          [33mnovalidate[39m=[32m""[39m
        [36m>[39m
          [36m<div[39m
            [33mclass[39m=[32m"p-3 text-sm text-red-300 bg-red-900/50 rounded-md border border-red-700"[39m
          [36m>[39m
            [0mRegistration failed[0m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-white mb-1"[39m
              [33mfor[39m=[32m"username"[39m
            [36m>[39m
              [0mUsername[0m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-3 py-2 bg-primary-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed"[39m
              [33mid[39m=[32m"username"[39m
              [33mplaceholder[39m=[32m"Enter your username"[39m
              [33mtype[39m=[32m"text"[39m
              [33mvalue[39m=[32m"existinguser"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-white mb-1"[39m
              [33mfor[39m=[32m"email"[39m
            [36m>[39m
              [0mEmail[0m
            [36m</label>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-full px-3 py-2 bg-primary-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed"[39m
              [33mid[39m=[32m"email"[39m
              [33mplaceholder[39m=[32m"Enter your email"[39m
              [33mtype[39m=[32m"email"[39m
              [33mvalue[39m=[32m"test@example.com"[39m
            [36m/>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-white mb-1"[39m
              [33mfor[39m=[32m"password"[39m
            [36m>[39m
              [0mPassword[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-3 py-2 bg-primary-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed pr-10"[39m
                [33mid[39m=[32m"password"[39m
                [33mplaceholder[39m=[32m"Enter your password"[39m
                [33mtype[39m=[32m"password"[39m
                [33mvalue[39m=[32m"StrongPass123!"[39m
              [36m/>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Show password"[39m
                [33mclass[39m=[32m"absolute right-2 top-1/2 -translate-y-1/2 text-white/90 hover:text-white"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"w-5 h-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M15 12a3 3 0 11-6 0 3 3 0 016 0z"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div>[39m
            [36m<label[39m
              [33mclass[39m=[32m"block text-sm font-medium text-white mb-1"[39m
              [33mfor[39m=[32m"confirm-password"[39m
            [36m>[39m
              [0mConfirm Password[0m
            [36m</label>[39m
            [36m<div[39m
              [33mclass[39m=[32m"relative"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-3 py-2 bg-primary-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed pr-10"[39m
                [33mid[39m=[32m"confirm-password"[39m
                [33mplaceholder[39m=[32m"Confirm your password"[39m
                [33mtype[39m=[32m"password"[39m
                [33mvalue[39m=[32m"StrongPass123!"[39m
              [36m/>[39m
              [36m<button[39m
                [33maria-label[39m=[32m"Show password"[39m
                [33mclass[39m=[32m"absolute right-2 top-1/2 -translate-y-1/2 text-white/90 hover:text-white"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [36m<svg[39m
                  [33mclass[39m=[32m"w-5 h-5"[39m
                  [33mfill[39m=[32m"none"[39m
                  [33mstroke[39m=[32m"currentColor"[39m
                  [33mviewBox[39m=[32m"0 0 24 24"[39m
                [36m>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M15 12a3 3 0 11-6 0 3 3 0 016 0z"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                  [36m<path[39m
                    [33md[39m=[32m"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"[39m
                    [33mstroke-linecap[39m=[32m"round"[39m
                    [33mstroke-linejoin[39m=[32m"round"[39m
                    [33mstroke-width[39m=[32m"2"[39m
                  [36m/>[39m
                [36m</svg>[39m
              [36m</button>[39m
            [36m</div>[39m
          [36m</div>[39m
          [36m<div[39m
            [33mclass[39m=[32m"flex items-start"[39m
          [36m>[39m
            [36m<input[39m
              [33mclass[39m=[32m"w-4 h-4 mt-1 text-primary-600 bg-primary-700 border-gray-600 rounded focus:ring-primary-500 focus:ring-2 disabled:opacity-50 disabled:cursor-not-allowed"[39m
              [33mid[39m=[32m"terms"[39m
              [33mtype[39m=[32m"checkbox"[39m
            [36m/>[39m
            [36m<label[39m
              [33mclass[39m=[32m"ml-2 text-sm text-white"[39m
              [33mfor[39m=[32m"terms"[39m
            [36m>[39m
              [0mI agree to the Terms and Conditions[0m
            [36m</label>[39m
          [36m</div>[39m
          [36m<button[39m
            [33mclass[39m=[32m"w-full px-4 py-2 text-sm font-medium text-white bg-secondary-600 rounded-md hover:bg-secondary-700 focus:outline-none focus:ring-2 focus:ring-secondary-500 focus:ring-offset-2 focus:ring-offset-primary-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"[39m
            [33mtype[39m=[32m"submit"[39m
          [36m>[39m
            [0mSign Up[0m
          [36m</button>[39m
        [36m</form>[39m
        [36m<div[39m
          [33mclass[39m=[32m"text-center"[39m
        [36m>[39m
          [36m<p[39m
            [33mclass[39m=[32m"text-sm text-white/90"[39m
          [36m>[39m
            [0mAlready have an account?[0m
            [0m [0m
            [36m<button[39m
              [33mclass[39m=[32m"text-cyan-400 hover:text-cyan-300 font-medium"[39m
              [33mtype[39m=[32m"button"[39m
            [36m>[39m
              [0mSign in[0m
            [36m</button>[39m
          [36m</p>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</div>[39m
[36m</body>[39m

Ignored nodes: comments, script, style
[36m<html>[39m
  [36m<head />[39m
  [36m<body>[39m
    [36m<div>[39m
      [36m<div[39m
        [33mclass[39m=[32m"min-h-screen flex items-center justify-center bg-primary-900"[39m
      [36m>[39m
        [36m<div[39m
          [33mclass[39m=[32m"w-full max-w-md p-8 space-y-6 bg-primary-800 rounded-lg shadow-xl"[39m
        [36m>[39m
          [36m<div>[39m
            [36m<h2[39m
              [33mclass[39m=[32m"text-3xl font-bold text-center text-white"[39m
            [36m>[39m
              [0mCreate Account[0m
            [36m</h2>[39m
            [36m<p[39m
              [33mclass[39m=[32m"mt-2 text-center text-white/90"[39m
            [36m>[39m
              [0mJoin Justice Companion[0m
            [36m</p>[39m
          [36m</div>[39m
          [36m<form[39m
            [33mclass[39m=[32m"space-y-4"[39m
            [33mnovalidate[39m=[32m""[39m
          [36m>[39m
            [36m<div[39m
              [33mclass[39m=[32m"p-3 text-sm text-red-300 bg-red-900/50 rounded-md border border-red-700"[39m
            [36m>[39m
              [0mRegistration failed[0m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-white mb-1"[39m
                [33mfor[39m=[32m"username"[39m
              [36m>[39m
                [0mUsername[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-3 py-2 bg-primary-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed"[39m
                [33mid[39m=[32m"username"[39m
                [33mplaceholder[39m=[32m"Enter your username"[39m
                [33mtype[39m=[32m"text"[39m
                [33mvalue[39m=[32m"existinguser"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-white mb-1"[39m
                [33mfor[39m=[32m"email"[39m
              [36m>[39m
                [0mEmail[0m
              [36m</label>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-full px-3 py-2 bg-primary-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed"[39m
                [33mid[39m=[32m"email"[39m
                [33mplaceholder[39m=[32m"Enter your email"[39m
                [33mtype[39m=[32m"email"[39m
                [33mvalue[39m=[32m"test@example.com"[39m
              [36m/>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-white mb-1"[39m
                [33mfor[39m=[32m"password"[39m
              [36m>[39m
                [0mPassword[0m
              [36m</label>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full px-3 py-2 bg-primary-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed pr-10"[39m
                  [33mid[39m=[32m"password"[39m
                  [33mplaceholder[39m=[32m"Enter your password"[39m
                  [33mtype[39m=[32m"password"[39m
                  [33mvalue[39m=[32m"StrongPass123!"[39m
                [36m/>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Show password"[39m
                  [33mclass[39m=[32m"absolute right-2 top-1/2 -translate-y-1/2 text-white/90 hover:text-white"[39m
                  [33mtype[39m=[32m"button"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"w-5 h-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M15 12a3 3 0 11-6 0 3 3 0 016 0z"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                [36m</button>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div>[39m
              [36m<label[39m
                [33mclass[39m=[32m"block text-sm font-medium text-white mb-1"[39m
                [33mfor[39m=[32m"confirm-password"[39m
              [36m>[39m
                [0mConfirm Password[0m
              [36m</label>[39m
              [36m<div[39m
                [33mclass[39m=[32m"relative"[39m
              [36m>[39m
                [36m<input[39m
                  [33mclass[39m=[32m"w-full px-3 py-2 bg-primary-700 border border-gray-600 rounded-md text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed pr-10"[39m
                  [33mid[39m=[32m"confirm-password"[39m
                  [33mplaceholder[39m=[32m"Confirm your password"[39m
                  [33mtype[39m=[32m"password"[39m
                  [33mvalue[39m=[32m"StrongPass123!"[39m
                [36m/>[39m
                [36m<button[39m
                  [33maria-label[39m=[32m"Show password"[39m
                  [33mclass[39m=[32m"absolute right-2 top-1/2 -translate-y-1/2 text-white/90 hover:text-white"[39m
                  [33mtype[39m=[32m"button"[39m
                [36m>[39m
                  [36m<svg[39m
                    [33mclass[39m=[32m"w-5 h-5"[39m
                    [33mfill[39m=[32m"none"[39m
                    [33mstroke[39m=[32m"currentColor"[39m
                    [33mviewBox[39m=[32m"0 0 24 24"[39m
                  [36m>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M15 12a3 3 0 11-6 0 3 3 0 016 0z"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                    [36m/>[39m
                    [36m<path[39m
                      [33md[39m=[32m"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"[39m
                      [33mstroke-linecap[39m=[32m"round"[39m
                      [33mstroke-linejoin[39m=[32m"round"[39m
                      [33mstroke-width[39m=[32m"2"[39m
                    [36m/>[39m
                  [36m</svg>[39m
                [36m</button>[39m
              [36m</div>[39m
            [36m</div>[39m
            [36m<div[39m
              [33mclass[39m=[32m"flex items-start"[39m
            [36m>[39m
              [36m<input[39m
                [33mclass[39m=[32m"w-4 h-4 mt-1 text-primary-600 bg-primary-700 border-gray-600 rounded focus:ring-primary-500 focus:ring-2 disabled:opacity-50 disabled:cursor-not-allowed"[39m
                [33mid[39m=[32m"terms"[39m
                [33mtype[39m=[32m"checkbox"[39m
              [36m/>[39m
              [36m<label[39m
                [33mclass[39m=[32m"ml-2 text-sm text-white"[39m
                [33mfor[39m=[32m"terms"[39m
              [36m>[39m
                [0mI agree to the Terms and Conditions[0m
              [36m</label>[39m
            [36m</div>[39m
            [36m<button[39m
              [33mclass[39m=[32m"w-full px-4 py-2 text-sm font-medium text-white bg-secondary-600 rounded-md hover:bg-secondary-700 focus:outline-none focus:ring-2 focus:ring-secondary-500 focus:ring-offset-2 focus:ring-offset-primary-900 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"[39m
              [33mtype[39m=[32m"submit"[39m
            [36m>[39m
              [0mSign Up[0m
            [36m</button>[39m
          [36m</form>[39m
          [36m<div[39m
            [33mclass[39m=[32m"text-center"[39m
          [36m>[39m
            [36m<p[39m
              [33mclass[39m=[32m"text-sm text-white/90"[39m
            [36m>[39m
              [0mAlready have an account?[0m
              [0m [0m
              [36m<button[39m
                [33mclass[39m=[32m"text-cyan-400 hover:text-cyan-300 font-medium"[39m
                [33mtype[39m=[32m"button"[39m
              [36m>[39m
                [0mSign in[0m
              [36m</button>[39m
            [36m</p>[39m
          [36m</div>[39m
        [36m</div>[39m
      [36m</div>[39m
    [36m</div>[39m
  [36m</body>[39m
[36m</html>[39m
[90m [2mâ¯[22m Module.waitForWrapper node_modules/.pnpm/@testing-library+dom@10.4.1/node_modules/@testing-library/dom/dist/wait-for.js:[2m163:27[22m[39m
[36m [2mâ¯[22m tests/components/RegistrationScreen.test.tsx:[2m367:11[22m[39m
    [90m365| [39m
    [90m366| [39m    [90m// Check for error message[39m
    [90m367| [39m    [35mawait[39m [34mwaitFor[39m(() [33m=>[39m {
    [90m   | [39m          [31m^[39m
    [90m368| [39m      [34mexpect[39m(screen[33m.[39m[34mgetByText[39m([36m/username already exists/i[39m))[33m.[39m[34mtoBeInTheDo[39mâ€¦
    [90m369| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[28/32]âŽ¯[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Unhandled Errors [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
[31m[1m
Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Uncaught Exception [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m
[31m[1mAssertionError[22m: expected '' to contain 'Performance Recommendations'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Performance Recommendations[39m

[36m [2mâ¯[22m Timeout._onTimeout src/services/StartupMetrics.test.ts:[2m142:30[22m[39m
    [90m140| [39m
    [90m141| [39m          [90m// Should show recommendations[39m
    [90m142| [39m          [34mexpect[39m(warnOutput)[33m.[39m[34mtoContain[39m([32m'Performance Recommendations'[39m)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m143| [39m          [34mresolve[39m()[33m;[39m
    [90m144| [39m        }[33m,[39m slowTime)[33m;[39m
[90m [2mâ¯[22m listOnTimeout node:internal/timers:[2m581:17[22m[39m
[90m [2mâ¯[22m processTimers node:internal/timers:[2m519:7[22m[39m

[31mThis error originated in "[1msrc/services/StartupMetrics.test.ts[22m" test file. It doesn't mean the error was thrown inside the file itself, but while it was running.[39m
[31mThe latest test that might've caused the error is "[1mshould show recommendations for slow startup[22m". It might mean one of the following:
- The error was thrown, while Vitest was running this test.
- If the error occurred after the test had been completed, this was the last documented test before it was thrown.[39m
[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[2m Test Files [22m [1m[31m20 failed[39m[22m[2m | [22m[1m[32m44 passed[39m[22m[2m | [22m[33m1 skipped[39m[90m (65)[39m
[2m      Tests [22m [1m[31m22 failed[39m[22m[2m | [22m[1m[32m1224 passed[39m[22m[2m | [22m[33m15 skipped[39m[90m (1261)[39m
[2m     Errors [22m [1m[31m1 error[39m[22m
[2m   Start at [22m 21:35:43
[2m   Duration [22m 34.51s[2m (transform 20.61s, setup 21.91s, collect 47.89s, tests 116.98s, environment 139.91s, prepare 29.07s)[22m

â€‰ELIFECYCLEâ€‰ Test failed. See above for more details.
