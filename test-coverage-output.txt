
> justice-companion@1.0.0 test:coverage F:\Justice Companion take 2
> vitest run --coverage


[1m[7m[36m RUN [39m[27m[22m [36mv2.1.9 [39m[90mF:/Justice Companion take 2[39m
      [2mCoverage enabled with [22m[33mv8[39m

 [32m✓[39m src/electron-ipc-authorization.test.ts [2m([22m[2m30 tests[22m[2m)[22m[90m 102[2mms[22m[39m
 [32m✓[39m src/features/facts/services/CaseFactsService.test.ts [2m([22m[2m32 tests[22m[2m)[22m[90m 57[2mms[22m[39m
 [32m✓[39m src/services/SecureStorageService.test.ts [2m([22m[2m75 tests[22m[2m)[22m[90m 168[2mms[22m[39m
 [32m✓[39m src/electron-ipc-handlers.test.ts [2m([22m[2m90 tests[22m[2m)[22m[90m 162[2mms[22m[39m
 [32m✓[39m src/services/AuditLogger.test.ts [2m([22m[2m52 tests[22m[2m)[22m[33m 1241[2mms[22m[39m
 [32m✓[39m src/services/AuditLogger.e2e.test.ts [2m([22m[2m31 tests[22m[2m)[22m[33m 2292[2mms[22m[39m
   [33m[2m✓[22m[39m AuditLogger E2E[2m > [22mPerformance Tests[2m > [22mverifies integrity of 1000+ log chain in reasonable time [33m364[2mms[22m[39m
   [33m[2m✓[22m[39m AuditLogger E2E[2m > [22mPerformance Tests[2m > [22mqueries large audit log efficiently [33m364[2mms[22m[39m
 [32m✓[39m src/features/timeline/hooks/useTimeline.test.ts [2m([22m[2m26 tests[22m[2m)[22m[33m 2114[2mms[22m[39m
 [32m✓[39m src/features/facts/hooks/useUserFacts.test.ts [2m([22m[2m29 tests[22m[2m)[22m[33m 2317[2mms[22m[39m
 [31m❯[39m tests/e2e/specs/authentication.e2e.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m❯[39m tests/e2e/specs/authorization.e2e.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [32m✓[39m src/repositories/FactsRepositories.test.ts [2m([22m[2m14 tests[22m[2m)[22m[90m 236[2mms[22m[39m
 [32m✓[39m src/middleware/AuthorizationMiddleware.test.ts [2m([22m[2m39 tests[22m[2m)[22m[90m 81[2mms[22m[39m
 [32m✓[39m src/features/facts/hooks/useCaseFacts.test.ts [2m([22m[2m38 tests[22m[2m)[22m[33m 3736[2mms[22m[39m
 [32m✓[39m src/features/timeline/services/TimelineService.test.ts [2m([22m[2m28 tests[22m[2m)[22m[90m 63[2mms[22m[39m
 [32m✓[39m src/features/legal/hooks/useLegalIssues.test.ts [2m([22m[2m24 tests[22m[2m)[22m[33m 2226[2mms[22m[39m
   [33m[2m✓[22m[39m useLegalIssues[2m > [22mRefresh Functionality[2m > [22mshould set loading state during refresh [33m303[2mms[22m[39m
 [32m✓[39m src/services/EncryptionService.test.ts [2m([22m[2m48 tests[22m[2m)[22m[90m 65[2mms[22m[39m
 [32m✓[39m src/repositories/CaseFactsRepository.test.ts [2m([22m[2m24 tests[22m[2m)[22m[90m 133[2mms[22m[39m
 [32m✓[39m src/features/facts/services/UserFactsService.test.ts [2m([22m[2m27 tests[22m[2m)[22m[90m 74[2mms[22m[39m
 [31m❯[39m tests/e2e/specs/remember-me.e2e.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [32m✓[39m src/features/legal/services/LegalIssuesService.test.ts [2m([22m[2m26 tests[22m[2m)[22m[90m 44[2mms[22m[39m
 [32m✓[39m src/repositories/UserFactsRepository.test.ts [2m([22m[2m21 tests[22m[2m)[22m[90m 169[2mms[22m[39m
 [32m✓[39m src/features/notes/hooks/useNotes.test.ts [2m([22m[2m22 tests[22m[2m)[22m[33m 1823[2mms[22m[39m
 [32m✓[39m src/services/SessionPersistenceService.test.ts [2m([22m[2m31 tests[22m[2m)[22m[33m 374[2mms[22m[39m
 [32m✓[39m src/hooks/useLocalStorage.test.ts [2m([22m[2m27 tests[22m[2m)[22m[90m 244[2mms[22m[39m
 [32m✓[39m src/services/AuthenticationService.test.ts [2m([22m[2m57 tests[22m[2m)[22m[33m 11663[2mms[22m[39m
   [33m[2m✓[22m[39m AuthenticationService[2m > [22mregister()[2m > [22mshould register a new user with valid credentials [33m972[2mms[22m[39m
   [33m[2m✓[22m[39m AuthenticationService[2m > [22mlogin()[2m > [22mshould update last login timestamp [33m322[2mms[22m[39m
   [33m[2m✓[22m[39m AuthenticationService[2m > [22mlogin()[2m > [22mshould use timing-safe password comparison [33m316[2mms[22m[39m
   [33m[2m✓[22m[39m AuthenticationService[2m > [22mchangePassword()[2m > [22mshould change password successfully [33m371[2mms[22m[39m
   [33m[2m✓[22m[39m AuthenticationService[2m > [22mchangePassword()[2m > [22mshould reject old password after change [33m375[2mms[22m[39m
   [33m[2m✓[22m[39m AuthenticationService[2m > [22mchangePassword()[2m > [22mshould invalidate all sessions after password change [33m406[2mms[22m[39m
   [33m[2m✓[22m[39m AuthenticationService[2m > [22mcleanupExpiredSessions()[2m > [22mshould delete expired sessions [33m322[2mms[22m[39m
 [32m✓[39m src/repositories/EvidenceRepository.test.ts [2m([22m[2m16 tests[22m[2m)[22m[90m 159[2mms[22m[39m
 [32m✓[39m src/features/chat/components/MessageBubble.test.tsx [2m([22m[2m32 tests[22m[2m)[22m[33m 2597[2mms[22m[39m
   [33m[2m✓[22m[39m MessageBubble[2m > [22mAI Reasoning Process[2m > [22mshould show reasoning dropdown when thinkingContent is present [33m428[2mms[22m[39m
   [33m[2m✓[22m[39m MessageBubble[2m > [22mAI Reasoning Process[2m > [22mshould expand and collapse reasoning content when clicked [33m706[2mms[22m[39m
 [32m✓[39m src/features/documents/components/DocumentsView.test.tsx [2m([22m[2m32 tests[22m[2m)[22m[33m 13251[2mms[22m[39m
   [33m[2m✓[22m[39m DocumentsView[2m > [22mRendering - Filters and Controls[2m > [22mshould render upload evidence button [33m2386[2mms[22m[39m
   [33m[2m✓[22m[39m DocumentsView[2m > [22mFiltering[2m > [22mshould filter documents by status [33m357[2mms[22m[39m
   [33m[2m✓[22m[39m DocumentsView[2m > [22mFiltering[2m > [22mshould reset to all statuses [33m570[2mms[22m[39m
   [33m[2m✓[22m[39m DocumentsView[2m > [22mDocument Selection[2m > [22mshould select document when clicked [33m323[2mms[22m[39m
   [33m[2m✓[22m[39m DocumentsView[2m > [22mDocument Selection[2m > [22mshould deselect document when clicked again [33m330[2mms[22m[39m
   [33m[2m✓[22m[39m DocumentsView[2m > [22mDocument Selection[2m > [22mshould allow multiple selections [33m393[2mms[22m[39m
   [33m[2m✓[22m[39m DocumentsView[2m > [22mBundle Operations[2m > [22mshould download only selected documents [33m404[2mms[22m[39m
   [33m[2m✓[22m[39m DocumentsView[2m > [22mBundle Operations[2m > [22mshould email bundle with multiple files [33m513[2mms[22m[39m
   [33m[2m✓[22m[39m DocumentsView[2m > [22mUpload Modal[2m > [22mshould open upload modal when clicking upload button [33m1145[2mms[22m[39m
   [33m[2m✓[22m[39m DocumentsView[2m > [22mUpload Modal[2m > [22mshould close upload modal when clicking close [33m1774[2mms[22m[39m
   [33m[2m✓[22m[39m DocumentsView[2m > [22mUpload Modal[2m > [22mshould refresh evidence when upload completes [33m2160[2mms[22m[39m
 [32m✓[39m src/components/ErrorBoundary.test.tsx [2m([22m[2m30 tests[22m[2m)[22m[33m 3695[2mms[22m[39m
   [33m[2m✓[22m[39m ErrorBoundary[2m > [22mError Fallback UI[2m > [22mshould display heading [33m667[2mms[22m[39m
   [33m[2m✓[22m[39m ErrorBoundary[2m > [22mError Fallback UI[2m > [22mshould display reload button [33m380[2mms[22m[39m
   [33m[2m✓[22m[39m ErrorBoundary[2m > [22mRecovery Actions[2m > [22mshould reload page when reload button is clicked [33m335[2mms[22m[39m
   [33m[2m✓[22m[39m ErrorBoundary[2m > [22mRecovery Actions[2m > [22mshould reset error state when continue button is clicked [33m359[2mms[22m[39m
 [32m✓[39m src/features/cases/components/CaseDetailView.test.tsx [2m([22m[2m25 tests[22m[2m)[22m[33m 5787[2mms[22m[39m
   [33m[2m✓[22m[39m CaseDetailView[2m > [22mHeader[2m > [22mshould call onBack when back button clicked [33m329[2mms[22m[39m
   [33m[2m✓[22m[39m CaseDetailView[2m > [22mTab Navigation[2m > [22mshould render all 6 tabs [33m540[2mms[22m[39m
   [33m[2m✓[22m[39m CaseDetailView[2m > [22mTab Navigation[2m > [22mshould default to Overview tab [33m392[2mms[22m[39m
   [33m[2m✓[22m[39m CaseDetailView[2m > [22mTab Navigation[2m > [22mshould change tab when clicked [33m438[2mms[22m[39m
   [33m[2m✓[22m[39m CaseDetailView[2m > [22mTab Navigation[2m > [22mshould activate Evidence tab [33m495[2mms[22m[39m
   [33m[2m✓[22m[39m CaseDetailView[2m > [22mTab Navigation[2m > [22mshould activate Facts tab [33m492[2mms[22m[39m
   [33m[2m✓[22m[39m CaseDetailView[2m > [22mTab Navigation[2m > [22mshould activate Notes tab [33m381[2mms[22m[39m
   [33m[2m✓[22m[39m CaseDetailView[2m > [22mTab Navigation[2m > [22mshould activate Legal Issues tab [33m320[2mms[22m[39m
   [33m[2m✓[22m[39m CaseDetailView[2m > [22mEvidence Tab[2m > [22mshould display evidence list [33m484[2mms[22m[39m
   [33m[2m✓[22m[39m CaseDetailView[2m > [22mEvidence Tab[2m > [22mshould show empty state when no evidence [33m344[2mms[22m[39m
   [33m[2m✓[22m[39m CaseDetailView[2m > [22mComponent Integration[2m > [22mshould render TimelineView component in timeline tab [33m341[2mms[22m[39m
 [32m✓[39m src/components/PostItNote.test.tsx [2m([22m[2m29 tests[22m[2m)[22m[33m 8135[2mms[22m[39m
   [33m[2m✓[22m[39m PostItNote[2m > [22mRendering[2m > [22mshould render delete button when onDelete is provided and not readOnly [33m367[2mms[22m[39m
   [33m[2m✓[22m[39m PostItNote[2m > [22mEdit Mode Interactions[2m > [22mshould enter edit mode when clicked [33m369[2mms[22m[39m
   [33m[2m✓[22m[39m PostItNote[2m > [22mEdit Mode Interactions[2m > [22mshould select all text when entering edit mode [33m317[2mms[22m[39m
   [33m[2m✓[22m[39m PostItNote[2m > [22mEdit Mode Interactions[2m > [22mshould update content and call onUpdate when blur occurs [33m756[2mms[22m[39m
   [33m[2m✓[22m[39m PostItNote[2m > [22mEdit Mode Interactions[2m > [22mshould trim whitespace before calling onUpdate [33m810[2mms[22m[39m
   [33m[2m✓[22m[39m PostItNote[2m > [22mEdit Mode Interactions[2m > [22mshould revert changes when Escape key is pressed [33m815[2mms[22m[39m
   [33m[2m✓[22m[39m PostItNote[2m > [22mAccessibility[2m > [22mshould have placeholder in textarea when editing empty note [33m335[2mms[22m[39m
   [33m[2m✓[22m[39m PostItNote[2m > [22mEdge Cases[2m > [22mshould handle special characters in content [33m1531[2mms[22m[39m
   [33m[2m✓[22m[39m PostItNote[2m > [22mEdge Cases[2m > [22mshould handle rapid click events without breaking [33m485[2mms[22m[39m
   [33m[2m✓[22m[39m PostItNote[2m > [22mEdge Cases[2m > [22mshould handle empty onUpdate gracefully [33m416[2mms[22m[39m
 [32m✓[39m src/features/facts/components/CaseFactsPanel.test.tsx [2m([22m[2m31 tests[22m[2m)[22m[33m 16086[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mRendering States[2m > [22mshould render Add Case Fact button [33m730[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mCategory Filtering[2m > [22mshould display all category filter buttons with counts [33m1724[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mCategory Filtering[2m > [22mshould filter facts by timeline category [33m669[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mCategory Filtering[2m > [22mshould filter facts by evidence category [33m665[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mCategory Filtering[2m > [22mshould show all facts when "All" category filter is selected [33m1206[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mImportance Filtering[2m > [22mshould display all importance filter buttons with counts [33m972[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mImportance Filtering[2m > [22mshould filter facts by critical importance [33m435[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mImportance Filtering[2m > [22mshould filter facts by high importance [33m432[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mImportance Filtering[2m > [22mshould combine category and importance filters [33m825[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mImportance Filtering[2m > [22mshould show empty state when combined filters match nothing [33m708[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mCreate Case Fact Workflow[2m > [22mshould show fact creator when Add button is clicked [33m570[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mCreate Case Fact Workflow[2m > [22mshould default to "timeline" category and "medium" importance [33m537[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mCreate Case Fact Workflow[2m > [22mshould allow changing category before creating [33m1098[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mCreate Case Fact Workflow[2m > [22mshould allow changing importance before creating [33m1283[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mCreate Case Fact Workflow[2m > [22mshould render new fact creator UI elements [33m1055[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mUpdate Case Fact[2m > [22mshould call updateCaseFact when fact is updated [33m799[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mDelete Case Fact[2m > [22mshould call deleteCaseFact when delete button is clicked [33m681[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mEdge Cases[2m > [22mshould update count when filtering [33m518[2mms[22m[39m
   [33m[2m✓[22m[39m CaseFactsPanel[2m > [22mAccessibility[2m > [22mshould have accessible labels for selects [33m569[2mms[22m[39m
 [32m✓[39m src/repositories/Phase3Repositories.test.ts [2m([22m[2m15 tests[22m[2m)[22m[90m 101[2mms[22m[39m
 [32m✓[39m src/utils/migrate-to-secure-storage.test.ts [2m([22m[2m12 tests[22m[2m)[22m[90m 45[2mms[22m[39m
 [32m✓[39m src/features/dashboard/components/DashboardView.test.tsx [2m([22m[2m24 tests[22m[2m)[22m[33m 4419[2mms[22m[39m
   [33m[2m✓[22m[39m DashboardView[2m > [22mRendering - Welcome Section[2m > [22mshould render welcome heading and description [33m350[2mms[22m[39m
   [33m[2m✓[22m[39m DashboardView[2m > [22mRendering - Welcome Section[2m > [22mshould expand and collapse legal disclaimer when clicked [33m1131[2mms[22m[39m
   [33m[2m✓[22m[39m DashboardView[2m > [22mRecent Activity[2m > [22mshould render recent activity section with empty state [33m494[2mms[22m[39m
 [31m❯[39m tests/e2e/specs/user-journey.e2e.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [32m✓[39m src/features/notes/components/NotesPanel.test.tsx [2m([22m[2m36 tests[22m[2m)[22m[33m 18274[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mRendering States[2m > [22mshould render Add Note button [33m398[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mCreate Note Workflow[2m > [22mshould show note creator when Add button is clicked [33m971[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mCreate Note Workflow[2m > [22mshould autofocus textarea when creating new note [33m382[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mCreate Note Workflow[2m > [22mshould call createNote when Save button is clicked with content [33m1569[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mCreate Note Workflow[2m > [22mshould clear textarea and hide creator after successful creation [33m1308[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mCreate Note Workflow[2m > [22mshould NOT call createNote when content is empty [33m713[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mCreate Note Workflow[2m > [22mshould NOT call createNote when content is only whitespace [33m830[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mCreate Note Workflow[2m > [22mshould hide creator and clear content when Cancel is clicked [33m1021[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mUpdate Note Workflow[2m > [22mshould show Save and Cancel buttons in edit mode [33m601[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mUpdate Note Workflow[2m > [22mshould call updateNote when Save button is clicked with changes [33m1276[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mUpdate Note Workflow[2m > [22mshould exit edit mode after successful update [33m1586[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mUpdate Note Workflow[2m > [22mshould NOT call updateNote when content is empty [33m976[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mUpdate Note Workflow[2m > [22mshould exit edit mode and revert changes when Cancel is clicked [33m1562[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mUpdate Note Workflow[2m > [22mshould handle editing multiple notes independently [33m1037[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mEdge Cases[2m > [22mshould handle rapid create and cancel clicks [33m1164[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mAccessibility[2m > [22mshould have accessible placeholder for new note textarea [33m382[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mAccessibility[2m > [22mshould autofocus edit textarea when entering edit mode [33m340[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mAccessibility[2m > [22mshould have clear button labels [33m391[2mms[22m[39m
   [33m[2m✓[22m[39m NotesPanel[2m > [22mAccessibility[2m > [22mshould handle keyboard navigation through buttons [33m320[2mms[22m[39m
 [32m✓[39m src/features/facts/components/UserFactsPanel.test.tsx [2m([22m[2m24 tests[22m[2m)[22m[33m 8181[2mms[22m[39m
   [33m[2m✓[22m[39m UserFactsPanel[2m > [22mRendering States[2m > [22mshould display correct count in header [33m440[2mms[22m[39m
   [33m[2m✓[22m[39m UserFactsPanel[2m > [22mRendering States[2m > [22mshould render Add User Fact button [33m761[2mms[22m[39m
   [33m[2m✓[22m[39m UserFactsPanel[2m > [22mType Filtering[2m > [22mshould display all filter buttons with counts [33m1295[2mms[22m[39m
   [33m[2m✓[22m[39m UserFactsPanel[2m > [22mType Filtering[2m > [22mshould filter facts by personal type when clicked [33m641[2mms[22m[39m
   [33m[2m✓[22m[39m UserFactsPanel[2m > [22mType Filtering[2m > [22mshould filter facts by employment type [33m431[2mms[22m[39m
   [33m[2m✓[22m[39m UserFactsPanel[2m > [22mType Filtering[2m > [22mshould show all facts when "All" filter is selected [33m663[2mms[22m[39m
   [33m[2m✓[22m[39m UserFactsPanel[2m > [22mType Filtering[2m > [22mshould update count in header when filtering [33m362[2mms[22m[39m
   [33m[2m✓[22m[39m UserFactsPanel[2m > [22mType Filtering[2m > [22mshould show empty state when filtered category has no facts [33m409[2mms[22m[39m
   [33m[2m✓[22m[39m UserFactsPanel[2m > [22mCreate User Fact Workflow[2m > [22mshould show fact creator when Add button is clicked [33m429[2mms[22m[39m
   [33m[2m✓[22m[39m UserFactsPanel[2m > [22mCreate User Fact Workflow[2m > [22mshould default to "personal" type when creating new fact [33m390[2mms[22m[39m
   [33m[2m✓[22m[39m UserFactsPanel[2m > [22mCreate User Fact Workflow[2m > [22mshould allow changing fact type before creating [33m607[2mms[22m[39m
   [33m[2m✓[22m[39m UserFactsPanel[2m > [22mCreate User Fact Workflow[2m > [22mshould render new fact creator UI elements [33m387[2mms[22m[39m
   [33m[2m✓[22m[39m UserFactsPanel[2m > [22mUpdate User Fact[2m > [22mshould call updateUserFact when fact is updated [33m332[2mms[22m[39m
   [33m[2m✓[22m[39m UserFactsPanel[2m > [22mDelete User Fact[2m > [22mshould call deleteUserFact when delete button is clicked [33m405[2mms[22m[39m
 [32m✓[39m src/features/cases/components/CasesView.test.tsx [2m([22m[2m21 tests[22m[2m)[22m[33m 2570[2mms[22m[39m
   [33m[2m✓[22m[39m CasesView[2m > [22mLoading State[2m > [22mshould show skeleton when cases are loading [33m411[2mms[22m[39m
   [33m[2m✓[22m[39m CasesView[2m > [22mCase Selection[2m > [22mshould list all cases in dropdown [33m404[2mms[22m[39m
 [32m✓[39m src/features/settings/components/DataPrivacySettings.test.tsx [2m([22m[2m16 tests[22m[2m)[22m[33m 5463[2mms[22m[39m
   [33m[2m✓[22m[39m DataPrivacySettings[2m > [22mEncryption Toggle[2m > [22mshould toggle encryption setting on and off [33m652[2mms[22m[39m
   [33m[2m✓[22m[39m DataPrivacySettings[2m > [22mEncryption Toggle[2m > [22mshould persist encryption setting to localStorage [33m317[2mms[22m[39m
   [33m[2m✓[22m[39m DataPrivacySettings[2m > [22mExport & Backup Settings[2m > [22mshould change export location [33m421[2mms[22m[39m
   [33m[2m✓[22m[39m DataPrivacySettings[2m > [22mExport & Backup Settings[2m > [22mshould persist backup frequency to localStorage [33m388[2mms[22m[39m
   [33m[2m✓[22m[39m DataPrivacySettings[2m > [22mClear All Data[2m > [22mshould close confirmation dialog when Cancel is clicked [33m762[2mms[22m[39m
   [33m[2m✓[22m[39m DataPrivacySettings[2m > [22mClear All Data[2m > [22mshould clear all data when confirmed [33m681[2mms[22m[39m
   [33m[2m✓[22m[39m DataPrivacySettings[2m > [22mClear All Data[2m > [22mshould handle clear data errors gracefully [33m612[2mms[22m[39m
 [32m✓[39m src/services/RateLimitService.test.ts [2m([22m[2m21 tests[22m[2m)[22m[90m 35[2mms[22m[39m
 [32m✓[39m src/repositories/CaseRepository.test.ts [2m([22m[2m13 tests[22m[2m)[22m[90m 79[2mms[22m[39m
 [32m✓[39m src/repositories/NotesRepository.test.ts [2m([22m[2m16 tests[22m[2m)[22m[90m 97[2mms[22m[39m
 [32m✓[39m src/features/settings/components/AppearanceSettings.test.tsx [2m([22m[2m14 tests[22m[2m)[22m[33m 3539[2mms[22m[39m
   [33m[2m✓[22m[39m AppearanceSettings[2m > [22mAppearance Settings[2m > [22mshould toggle dark mode on and off [33m610[2mms[22m[39m
   [33m[2m✓[22m[39m AppearanceSettings[2m > [22mAppearance Settings[2m > [22mshould change font size [33m413[2mms[22m[39m
   [33m[2m✓[22m[39m AppearanceSettings[2m > [22mAppearance Settings[2m > [22mshould persist dark mode to localStorage [33m328[2mms[22m[39m
   [33m[2m✓[22m[39m AppearanceSettings[2m > [22mAppearance Settings[2m > [22mshould persist font size to localStorage [33m378[2mms[22m[39m
   [33m[2m✓[22m[39m AppearanceSettings[2m > [22mVoice Input Settings[2m > [22mshould persist voice input settings to localStorage [33m378[2mms[22m[39m
 [32m✓[39m src/features/notes/services/NotesService.test.ts [2m([22m[2m17 tests[22m[2m)[22m[90m 39[2mms[22m[39m
 [32m✓[39m src/services/DecryptionCache.test.ts [2m([22m[2m19 tests[22m[2m)[22m[90m 44[2mms[22m[39m
 [32m✓[39m src/features/chat/components/ChatInput.test.tsx [2m([22m[2m23 tests[22m[2m)[22m[33m 4071[2mms[22m[39m
   [33m[2m✓[22m[39m ChatInput[2m > [22mKeyboard Shortcuts[2m > [22mshould send message when Enter key is pressed [33m716[2mms[22m[39m
   [33m[2m✓[22m[39m ChatInput[2m > [22mKeyboard Shortcuts[2m > [22mshould create new line when Shift+Enter is pressed [33m533[2mms[22m[39m
   [33m[2m✓[22m[39m ChatInput[2m > [22mKeyboard Shortcuts[2m > [22mshould trim whitespace before sending [33m351[2mms[22m[39m
   [33m[2m✓[22m[39m ChatInput[2m > [22mSend Button Click[2m > [22mshould send message when send button is clicked [33m408[2mms[22m[39m
   [33m[2m✓[22m[39m ChatInput[2m > [22mAuto-resize Behavior[2m > [22mshould resize textarea as content grows [33m417[2mms[22m[39m
   [33m[2m✓[22m[39m ChatInput[2m > [22mAccessibility[2m > [22mshould be keyboard navigable [33m500[2mms[22m[39m
 [32m✓[39m src/features/settings/components/AIConfigurationSettings.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[33m 3918[2mms[22m[39m
   [33m[2m✓[22m[39m AIConfigurationSettings[2m > [22mRAG Toggle[2m > [22mshould toggle RAG on and off [33m775[2mms[22m[39m
   [33m[2m✓[22m[39m AIConfigurationSettings[2m > [22mRAG Toggle[2m > [22mshould persist RAG setting to localStorage [33m385[2mms[22m[39m
   [33m[2m✓[22m[39m AIConfigurationSettings[2m > [22mResponse Length Setting[2m > [22mshould change response length [33m347[2mms[22m[39m
   [33m[2m✓[22m[39m AIConfigurationSettings[2m > [22mResponse Length Setting[2m > [22mshould persist response length to localStorage [33m311[2mms[22m[39m
   [33m[2m✓[22m[39m AIConfigurationSettings[2m > [22mCitation Detail Setting[2m > [22mshould persist citation detail to localStorage [33m379[2mms[22m[39m
   [33m[2m✓[22m[39m AIConfigurationSettings[2m > [22mJurisdiction Setting[2m > [22mshould change jurisdiction [33m410[2mms[22m[39m
   [33m[2m✓[22m[39m AIConfigurationSettings[2m > [22mJurisdiction Setting[2m > [22mshould persist jurisdiction to localStorage [33m478[2mms[22m[39m
 [32m✓[39m src/services/StartupMetrics.test.ts [2m([22m[2m12 tests[22m[2m)[22m[33m 6133[2mms[22m[39m
   [33m[2m✓[22m[39m StartupMetrics[2m > [22mlogStartupMetrics[2m > [22mshould show recommendations for slow startup [33m710[2mms[22m[39m
   [33m[2m✓[22m[39m StartupMetrics[2m > [22mexportMetrics[2m > [22mshould categorize performance correctly [33m1315[2mms[22m[39m
   [33m[2m✓[22m[39m StartupMetrics[2m > [22mformatDuration[2m > [22mshould format durations correctly [33m3565[2mms[22m[39m
   [33m[2m✓[22m[39m StartupMetrics[2m > [22mphase deltas[2m > [22mshould calculate phase deltas correctly [33m381[2mms[22m[39m
 [32m✓[39m src/types/pagination.test.ts [2m([22m[2m26 tests[22m[2m)[22m[90m 93[2mms[22m[39m
 [32m✓[39m src/features/settings/components/ConsentSettings.test.tsx [2m([22m[2m12 tests[22m[2m)[22m[33m 3293[2mms[22m[39m
   [33m[2m✓[22m[39m ConsentSettings[2m > [22mGranting Consent[2m > [22mshould grant consent successfully [33m834[2mms[22m[39m
   [33m[2m✓[22m[39m ConsentSettings[2m > [22mGranting Consent[2m > [22mshould handle grant consent error [33m409[2mms[22m[39m
   [33m[2m✓[22m[39m ConsentSettings[2m > [22mRevoking Consent[2m > [22mshould revoke consent successfully [33m576[2mms[22m[39m
   [33m[2m✓[22m[39m ConsentSettings[2m > [22mRevoking Consent[2m > [22mshould handle revoke consent error [33m344[2mms[22m[39m
 [31m❯[39m tests/e2e/specs/facts-tracking.e2e.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m❯[39m tests/e2e/specs/case-management.e2e.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [32m✓[39m src/types/cache.test.ts [2m([22m[2m18 tests[22m[2m)[22m[90m 34[2mms[22m[39m
 [32m✓[39m src/services/AuthenticationService.integration.test.ts [2m([22m[2m9 tests[22m[2m)[22m[33m 4475[2mms[22m[39m
   [33m[2m✓[22m[39m AuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting on Login[2m > [22mshould block login after 5 failed attempts [33m630[2mms[22m[39m
   [33m[2m✓[22m[39m AuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting on Login[2m > [22mshould provide specific lock time in error message [33m615[2mms[22m[39m
   [33m[2m✓[22m[39m AuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting on Login[2m > [22mshould clear rate limit after successful login [33m757[2mms[22m[39m
   [33m[2m✓[22m[39m AuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting on Login[2m > [22mshould handle case-insensitive usernames for rate limiting [33m337[2mms[22m[39m
   [33m[2m✓[22m[39m AuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting Time Window[2m > [22mshould unlock account after 15 minutes [33m872[2mms[22m[39m
   [33m[2m✓[22m[39m AuthenticationService Integration - Rate Limiting[2m > [22mRate Limiting Time Window[2m > [22mshould reset attempt counter after 15 minute window [33m852[2mms[22m[39m
 [32m✓[39m src/features/settings/components/CaseManagementSettings.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[33m 3879[2mms[22m[39m
   [33m[2m✓[22m[39m CaseManagementSettings[2m > [22mDefault Case Type Setting[2m > [22mshould change default case type [33m1323[2mms[22m[39m
   [33m[2m✓[22m[39m CaseManagementSettings[2m > [22mDefault Case Type Setting[2m > [22mshould persist default case type to localStorage [33m423[2mms[22m[39m
   [33m[2m✓[22m[39m CaseManagementSettings[2m > [22mAuto-Archive Setting[2m > [22mshould change auto-archive days [33m680[2mms[22m[39m
   [33m[2m✓[22m[39m CaseManagementSettings[2m > [22mAuto-Archive Setting[2m > [22mshould persist auto-archive days to localStorage [33m496[2mms[22m[39m
   [33m[2m✓[22m[39m CaseManagementSettings[2m > [22mCase Numbering Setting[2m > [22mshould change case numbering format [33m368[2mms[22m[39m
   [33m[2m✓[22m[39m CaseManagementSettings[2m > [22mCase Numbering Setting[2m > [22mshould persist case numbering format to localStorage [33m391[2mms[22m[39m
 [32m✓[39m src/hooks/useAI.test.ts [2m([22m[2m15 tests[22m[2m)[22m[90m 17[2mms[22m[39m
 [32m✓[39m src/features/settings/components/ProfileSettings.test.tsx [2m([22m[2m13 tests[22m[2m)[22m[33m 12206[2mms[22m[39m
   [33m[2m✓[22m[39m ProfileSettings[2m > [22mProfile Editing[2m > [22mshould enable edit mode when edit button clicked [33m1066[2mms[22m[39m
   [33m[2m✓[22m[39m ProfileSettings[2m > [22mProfile Editing[2m > [22mshould allow editing name and email [33m1204[2mms[22m[39m
   [33m[2m✓[22m[39m ProfileSettings[2m > [22mProfile Editing[2m > [22mshould save profile changes successfully [33m898[2mms[22m[39m
   [33m[2m✓[22m[39m ProfileSettings[2m > [22mProfile Editing[2m > [22mshould cancel editing and restore original values [33m883[2mms[22m[39m
   [33m[2m✓[22m[39m ProfileSettings[2m > [22mPassword Change[2m > [22mshould validate password requirements [33m1065[2mms[22m[39m
   [33m[2m✓[22m[39m ProfileSettings[2m > [22mPassword Change[2m > [22mshould validate password confirmation match [33m1512[2mms[22m[39m
   [33m[2m✓[22m[39m ProfileSettings[2m > [22mPassword Change[2m > [22mshould successfully change password [33m2284[2mms[22m[39m
   [33m[2m✓[22m[39m ProfileSettings[2m > [22mError Handling[2m > [22mshould handle profile save error [33m754[2mms[22m[39m
   [33m[2m✓[22m[39m ProfileSettings[2m > [22mError Handling[2m > [22mshould handle password change error [33m2078[2mms[22m[39m
 [32m✓[39m src/services/LegalAPIService.test.ts [2m([22m[2m11 tests[22m[2m | [22m[33m1 skipped[39m[2m)[22m[33m 565[2mms[22m[39m
   [33m[2m✓[22m[39m LegalAPIService[2m > [22msearchLegalInfo[2m > [22mshould return LegalSearchResults structure [33m400[2mms[22m[39m
 [32m✓[39m src/services/RAGService.test.ts [2m([22m[2m21 tests[22m[2m)[22m[90m 25[2mms[22m[39m
 [32m✓[39m src/utils/passwordValidation.test.ts [2m([22m[2m10 tests[22m[2m)[22m[90m 10[2mms[22m[39m
 [32m✓[39m src/services/ConsentService.test.ts [2m([22m[2m33 tests[22m[2m)[22m[33m 768[2mms[22m[39m
 [31m❯[39m tests/e2e/specs/evidence-upload.e2e.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [32m✓[39m src/utils/error-logger.test.ts [2m([22m[2m8 tests[22m[2m)[22m[33m 2313[2mms[22m[39m
   [33m[2m✓[22m[39m ErrorLogger[2m > [22mshould maintain max number of backups [33m2076[2mms[22m[39m
 [32m✓[39m src/features/settings/components/NotificationSettings.test.tsx [2m([22m[2m9 tests[22m[2m)[22m[33m 2513[2mms[22m[39m
   [33m[2m✓[22m[39m NotificationSettings[2m > [22mToggling Notifications[2m > [22mshould toggle chat notifications on and off [33m553[2mms[22m[39m
   [33m[2m✓[22m[39m NotificationSettings[2m > [22mToggling Notifications[2m > [22mshould toggle case updates on and off [33m428[2mms[22m[39m
   [33m[2m✓[22m[39m NotificationSettings[2m > [22mToggling Notifications[2m > [22mshould toggle document analysis notifications on and off [33m590[2mms[22m[39m
   [33m[2m✓[22m[39m NotificationSettings[2m > [22mLocalStorage Persistence[2m > [22mshould persist document analysis notifications to localStorage [33m303[2mms[22m[39m
 [32m✓[39m src/services/ChatConversationService.test.ts [2m([22m[2m30 tests[22m[2m)[22m[33m 637[2mms[22m[39m
 [32m✓[39m src/services/UserProfileService.test.ts [2m([22m[2m30 tests[22m[2m)[22m[33m 839[2mms[22m[39m
 [32m✓[39m src/services/AIServiceFactory.test.ts [2m([22m[2m5 tests[22m[2m)[22m[90m 16[2mms[22m[39m
 [32m✓[39m src/hooks/useReducedMotion.test.ts [2m([22m[2m4 tests[22m[2m)[22m[90m 53[2mms[22m[39m
 [31m❯[39m tests/e2e/specs/ai-chat.e2e.test.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m❯[39m tests/e2e/specs/test-1.spec.ts [2m([22m[2m0 test[22m[2m)[22m
 [31m❯[39m tests/e2e/specs/test-2.spec.ts [2m([22m[2m0 test[22m[2m)[22m
 [32m✓[39m src/features/settings/components/SettingsView.test.tsx [2m([22m[2m14 tests[22m[2m)[22m[33m 19709[2mms[22m[39m
   [33m[2m✓[22m[39m SettingsView Integration[2m > [22mTab Structure[2m > [22mshould render main heading and description [33m2024[2mms[22m[39m
   [33m[2m✓[22m[39m SettingsView Integration[2m > [22mTab Structure[2m > [22mshould render all tab buttons [33m2531[2mms[22m[39m
   [33m[2m✓[22m[39m SettingsView Integration[2m > [22mTab Structure[2m > [22mshould switch to AI Configuration tab [33m1121[2mms[22m[39m
   [33m[2m✓[22m[39m SettingsView Integration[2m > [22mTab Structure[2m > [22mshould switch to Preferences tab [33m807[2mms[22m[39m
   [33m[2m✓[22m[39m SettingsView Integration[2m > [22mTab Structure[2m > [22mshould switch to Data & Privacy tab [33m606[2mms[22m[39m
   [33m[2m✓[22m[39m SettingsView Integration[2m > [22mTab Structure[2m > [22mshould switch to Case Management tab [33m2277[2mms[22m[39m
   [33m[2m✓[22m[39m SettingsView Integration[2m > [22mTab Structure[2m > [22mshould switch to About tab [33m2670[2mms[22m[39m
   [33m[2m✓[22m[39m SettingsView Integration[2m > [22mAI Configuration Settings[2m > [22mshould toggle RAG enabled setting [33m2277[2mms[22m[39m
   [33m[2m✓[22m[39m SettingsView Integration[2m > [22mAI Configuration Settings[2m > [22mshould change response length setting [33m1701[2mms[22m[39m
   [33m[2m✓[22m[39m SettingsView Integration[2m > [22mAI Configuration Settings[2m > [22mshould change jurisdiction setting [33m749[2mms[22m[39m
   [33m[2m✓[22m[39m SettingsView Integration[2m > [22mCase Management Settings[2m > [22mshould change default case type [33m804[2mms[22m[39m
   [33m[2m✓[22m[39m SettingsView Integration[2m > [22mCase Management Settings[2m > [22mshould change auto-archive setting [33m1199[2mms[22m[39m
   [33m[2m✓[22m[39m SettingsView Integration[2m > [22mLocalStorage Persistence[2m > [22mshould load AI settings from localStorage on mount [33m666[2mms[22m[39m

[2m Test Files [22m [1m[31m10 failed[39m[22m[2m | [22m[1m[32m63 passed[39m[22m[90m (73)[39m
[2m      Tests [22m [1m[32m1557 passed[39m[22m[2m | [22m[33m1 skipped[39m[90m (1558)[39m
[2m   Start at [22m 03:28:44
[2m   Duration [22m 41.91s[2m (transform 9.24s, setup 32.50s, collect 36.83s, tests 187.55s, environment 149.93s, prepare 33.52s)[22m

 ELIFECYCLE  Command failed with exit code 1.
